var DOKU_BASE='/';var DOKU_TPL='/lib/tpl/bootstrap3/';var DOKU_COOKIE_PARAM={"path":"\/","secure":false};Object.defineProperty(window,'DOKU_UHN',{get:function(){console.warn('Using DOKU_UHN is deprecated. Please use JSINFO.useHeadingNavigation instead');return JSINFO.useHeadingNavigation;}});Object.defineProperty(window,'DOKU_UHC',{get:function(){console.warn('Using DOKU_UHC is deprecated. Please use JSINFO.useHeadingContent instead');return JSINFO.useHeadingContent;}});LANG={"search_toggle_tools":"Toggle Search Tools","willexpire":"Your lock for editing this page is about to expire in a minute.\\nTo avoid conflicts use the preview button to reset the locktimer.","notsavedyet":"Unsaved changes will be lost.","searchmedia":"Search for files","keepopen":"Keep window open on selection","hidedetails":"Hide Details","mediatitle":"Link settings","mediadisplay":"Link type","mediaalign":"Alignment","mediasize":"Image size","mediatarget":"Link target","mediaclose":"Close","mediainsert":"Insert","mediadisplayimg":"Show the image.","mediadisplaylnk":"Show only the link.","mediasmall":"Small version","mediamedium":"Medium version","medialarge":"Large version","mediaoriginal":"Original version","medialnk":"Link to detail page","mediadirect":"Direct link to original","medianolnk":"No link","medianolink":"Do not link the image","medialeft":"Align the image on the left.","mediaright":"Align the image on the right.","mediacenter":"Align the image in the middle.","medianoalign":"Use no align.","nosmblinks":"Linking to Windows shares only works in Microsoft Internet Explorer.\\nYou still can copy and paste the link.","linkwiz":"Link Wizard","linkto":"Link to:","del_confirm":"Really delete selected item(s)?","restore_confirm":"Really restore this version?","media_diff":"View differences:","media_diff_both":"Side by Side","media_diff_opacity":"Shine-through","media_diff_portions":"Swipe","media_select":"Select files\u2026","media_upload_btn":"Upload","media_done_btn":"Done","media_drop":"Drop files here to upload","media_cancel":"remove","media_overwrt":"Overwrite existing files","data_insecure":"WARNING: It seems your data directory is not properly secured. Please read about <a href=\"https:\/\/www.dokuwiki.org\/security#web_access_security\">Web Access Security in DokuWiki<\/a>.","plugins":{"extension":{"reallydel":"Really uninstall this extension?","display_viewoptions":"View Options:","display_enabled":"enabled","display_disabled":"disabled","display_updatable":"updatable","close":"Click to close","filter":"Show updatable extensions only"},"filelisting":{"filter_label":"Filter","delete_confirm":"Are you sure you want to delete the file(s)?"},"gallery":{"addgal":"Add namespace as gallery","label_toolbar_button":"Insert Gallery","title_dialog":"Gallery Plugin","label_namespace":"Namespace or RSS feed","label_thumbnailsize":"Sets the size for thumbnails","pattern_hint_thumbnailsize":"<number><lowercase x><number>","label_imagesize":"Sets the size for the linked images in direct mode.","pattern_hint_imagesize":"<number><uppercase X><number>","label_cache":"Cache the thumbnails","label_filter":"Filter (must contain a \"*\" character)","label_showname":"Show filename below thumbnails","label_showtitle":"Show the EXIF tag Headline as title below thumbnails","label_crop":"Make thumbnails the exact given thumbnail size big, cropping when needed","label_direct":"Link thumbnails with the bigger sized images not with their detail page","label_lightbox":"Show images in a fancy JavaScript modal","label_reverse":"Reverse the order of the displayed images","label_recursive":"Find images in the given namespace and all sub namespaces","label_align_left":"align left","label_align_center":"align center","label_align_right":"align right","label_cols":"The number images per row in the gallery table","label_limit":"Limits the output to the given number of images. 0 means all","label_offset":"Skip the first number of images. Useful with the option above","label_paginate":"Add a pagination for the thumbnails displaying the number of given thumbnails per page. 0 disables pagination","label_sort_file":"Sort the images by filename","label_sort_random":"Sort images randomly. You might want to disable the cache as well","label_sort_mod":"Sort images by file modification date","label_sort_exif_date":"Sort images by EXIF date","label_sort_exif_title":"Sort images by EXIF title"},"logviewer":{"filter":"Filter Loglines:"},"move":{"rename":"Rename","cancel":"Cancel","newname":"New name:","inprogress":"renaming page and adjusting links...","complete":"Move operation finished.","renameitem":"Rename this item","add":"Create a new namespace","duplicate":"Sorry, \"%s\" already exists in this namespace.","moveButton":"Move file","dialogIntro":"Enter new file destination. You may change the namespace but not the file extension."},"searchindex":{"indexing":"Indexed:","done":"Finished indexing.","pages":"%d pages found.","clearing":"Clearing index...","finding":"Finding pages...","notindexed":"Skipped: Up-to-date","indexed":"Updated"},"styling":{"loader":"Preview is loading...<br \/>if this does not goes away, your values may be faulty","popup":"Open as a popup"},"tplmod":{"ui_save_err":"Unable to save changes to:  ","ui_updated":"UI language changed to: "},"vshare":{"button":"Insert video from video sharing sites","prompt":"Please paste the full URL to the video page here:","notfound":"Sorry, this URL wasn't recognized.\nPlease refer to the documentation on how to insert the correct syntax manually.","click":"Click to load this video. Your IP address and possibly other data will be transferred to %s."}}};var toolbar=[{"type":"format","title":"Bold Text","icon":"bold.png","key":"b","open":"**","close":"**","block":false},{"type":"format","title":"Italic Text","icon":"italic.png","key":"i","open":"\/\/","close":"\/\/","block":false},{"type":"format","title":"Underlined Text","icon":"underline.png","key":"u","open":"__","close":"__","block":false},{"type":"format","title":"Monospaced Text","icon":"mono.png","key":"m","open":"''","close":"''","block":false},{"type":"format","title":"Strike-through Text","icon":"strike.png","key":"d","open":"<del>","close":"<\/del>","block":false},{"type":"autohead","title":"Same Level Headline","icon":"hequal.png","key":"8","text":"Headline","mod":0,"block":true},{"type":"autohead","title":"Lower Headline","icon":"hminus.png","key":"9","text":"Headline","mod":1,"block":true},{"type":"autohead","title":"Higher Headline","icon":"hplus.png","key":"0","text":"Headline","mod":-1,"block":true},{"type":"picker","title":"Select Headline","icon":"h.png","class":"pk_hl","list":[{"type":"format","title":"Level 1 Headline","icon":"h1.png","key":"1","open":"====== ","close":" ======\\n"},{"type":"format","title":"Level 2 Headline","icon":"h2.png","key":"2","open":"===== ","close":" =====\\n"},{"type":"format","title":"Level 3 Headline","icon":"h3.png","key":"3","open":"==== ","close":" ====\\n"},{"type":"format","title":"Level 4 Headline","icon":"h4.png","key":"4","open":"=== ","close":" ===\\n"},{"type":"format","title":"Level 5 Headline","icon":"h5.png","key":"5","open":"== ","close":" ==\\n"}],"block":true},{"type":"linkwiz","title":"Internal Link","icon":"link.png","key":"l","open":"[[","close":"]]","block":false},{"type":"format","title":"External Link","icon":"linkextern.png","open":"[[","close":"]]","sample":"http:\/\/example.com|External Link","block":false},{"type":"formatln","title":"Ordered List Item","icon":"ol.png","open":"  - ","close":"","key":"-","block":true},{"type":"formatln","title":"Unordered List Item","icon":"ul.png","open":"  * ","close":"","key":".","block":true},{"type":"insert","title":"Horizontal Rule","icon":"hr.png","insert":"\\n----\\n","block":true},{"type":"mediapopup","title":"Add Images and other files (opens in a new window)","icon":"image.png","url":"lib\/exe\/mediamanager.php?ns=","name":"mediaselect","options":"width=750,height=500,left=20,top=20,scrollbars=yes,resizable=yes","block":false},{"type":"picker","title":"Smileys","icon":"smiley.png","list":{"8-)":"cool.svg","8-O":"eek.svg","8-o":"eek.svg",":-(":"sad.svg",":-)":"smile.svg","=)":"smile2.svg",":-\/":"doubt.svg",":-\\":"doubt2.svg",":-?":"confused.svg",":-D":"biggrin.svg",":-P":"razz.svg",":-o":"surprised.svg",":-O":"surprised.svg",":-x":"silenced.svg",":-X":"silenced.svg",":-|":"neutral.svg",";-)":"wink.svg","m(":"facepalm.svg","^_^":"fun.svg",":?:":"question.svg",":!:":"exclaim.svg","LOL":"lol.svg","FIXME":"fixme.svg","DELETEME":"deleteme.svg"},"icobase":"smileys","block":false},{"type":"picker","title":"Special Chars","icon":"chars.png","list":["\u00c0","\u00e0","\u00c1","\u00e1","\u00c2","\u00e2","\u00c3","\u00e3","\u00c4","\u00e4","\u01cd","\u01ce","\u0102","\u0103","\u00c5","\u00e5","\u0100","\u0101","\u0104","\u0105","\u00c6","\u00e6","\u0106","\u0107","\u00c7","\u00e7","\u010c","\u010d","\u0108","\u0109","\u010a","\u010b","\u00d0","\u0111","\u00f0","\u010e","\u010f","\u00c8","\u00e8","\u00c9","\u00e9","\u00ca","\u00ea","\u00cb","\u00eb","\u011a","\u011b","\u0112","\u0113","\u0116","\u0117","\u0118","\u0119","\u0122","\u0123","\u011c","\u011d","\u011e","\u011f","\u0120","\u0121","\u0124","\u0125","\u00cc","\u00ec","\u00cd","\u00ed","\u00ce","\u00ee","\u00cf","\u00ef","\u01cf","\u01d0","\u012a","\u012b","\u0130","\u0131","\u012e","\u012f","\u0134","\u0135","\u0136","\u0137","\u0139","\u013a","\u013b","\u013c","\u013d","\u013e","\u0141","\u0142","\u013f","\u0140","\u0143","\u0144","\u00d1","\u00f1","\u0145","\u0146","\u0147","\u0148","\u00d2","\u00f2","\u00d3","\u00f3","\u00d4","\u00f4","\u00d5","\u00f5","\u00d6","\u00f6","\u01d1","\u01d2","\u014c","\u014d","\u0150","\u0151","\u0152","\u0153","\u00d8","\u00f8","\u0154","\u0155","\u0156","\u0157","\u0158","\u0159","\u015a","\u015b","\u015e","\u015f","\u0160","\u0161","\u015c","\u015d","\u0162","\u0163","\u0164","\u0165","\u00d9","\u00f9","\u00da","\u00fa","\u00db","\u00fb","\u00dc","\u00fc","\u01d3","\u01d4","\u016c","\u016d","\u016a","\u016b","\u016e","\u016f","\u01d6","\u01d8","\u01da","\u01dc","\u0172","\u0173","\u0170","\u0171","\u0174","\u0175","\u00dd","\u00fd","\u0178","\u00ff","\u0176","\u0177","\u0179","\u017a","\u017d","\u017e","\u017b","\u017c","\u00de","\u00fe","\u00df","\u0126","\u0127","\u00bf","\u00a1","\u00a2","\u00a3","\u00a4","\u00a5","\u20ac","\u00a6","\u00a7","\u00aa","\u00ac","\u00af","\u00b0","\u00b1","\u00f7","\u2030","\u00bc","\u00bd","\u00be","\u00b9","\u00b2","\u00b3","\u00b5","\u00b6","\u2020","\u2021","\u00b7","\u2022","\u00ba","\u2200","\u2202","\u2203","\u018f","\u0259","\u2205","\u2207","\u2208","\u2209","\u220b","\u220f","\u2211","\u203e","\u2212","\u2217","\u00d7","\u2044","\u221a","\u221d","\u221e","\u2220","\u2227","\u2228","\u2229","\u222a","\u222b","\u2234","\u223c","\u2245","\u2248","\u2260","\u2261","\u2264","\u2265","\u2282","\u2283","\u2284","\u2286","\u2287","\u2295","\u2297","\u22a5","\u22c5","\u25ca","\u2118","\u2111","\u211c","\u2135","\u2660","\u2663","\u2665","\u2666","\u03b1","\u03b2","\u0393","\u03b3","\u0394","\u03b4","\u03b5","\u03b6","\u03b7","\u0398","\u03b8","\u03b9","\u03ba","\u039b","\u03bb","\u03bc","\u039e","\u03be","\u03a0","\u03c0","\u03c1","\u03a3","\u03c3","\u03a4","\u03c4","\u03c5","\u03a6","\u03c6","\u03c7","\u03a8","\u03c8","\u03a9","\u03c9","\u2605","\u2606","\u260e","\u261a","\u261b","\u261c","\u261d","\u261e","\u261f","\u2639","\u263a","\u2714","\u2718","\u201e","\u201c","\u201d","\u201a","\u2018","\u2019","\u00ab","\u00bb","\u2039","\u203a","\u2014","\u2013","\u2026","\u2190","\u2191","\u2192","\u2193","\u2194","\u21d0","\u21d1","\u21d2","\u21d3","\u21d4","\u00a9","\u2122","\u00ae","\u2032","\u2033","[","]","{","}","~","(",")","%","\u00a7","$","#","|","@"],"block":false},{"type":"signature","title":"Insert Signature","icon":"sig.png","key":"y","block":false},{"type":"mediapopup","title":"Bootstrap Wrapper","icon":"..\/..\/plugins\/bootswrapper\/images\/bootstrap.png","url":"lib\/plugins\/bootswrapper\/exe\/popup.php?ns=","name":"bootstrap-wrapper","options":"width=800,height=600,left=20,top=20,toolbar=no,menubar=no,scrollbars=yes,resizable=yes","block":false},{"type":"format","title":"Insert button","icon":"..\/..\/plugins\/button\/images\/add-button.png","open":"[[{}","close":"]]","sample":"Wiki link|Button title"},{"type":"mediapopup","title":"Icons","icon":"..\/..\/tpl\/dokuwiki\/images\/logo.png","url":"lib\/plugins\/icons\/exe\/popup.php?ns=","name":"icons","options":"width=800,height=600,left=20,top=20,toolbar=no,menubar=no,scrollbars=yes,resizable=yes","block":false},{"type":"picker","title":"Wrap Plugin","icon":"..\/..\/plugins\/wrap\/images\/toolbar\/picker.png","list":[{"type":"format","title":"columns","icon":"..\/..\/plugins\/wrap\/images\/toolbar\/column.png","open":"<WRAP group>\\n<WRAP half column>\\n","close":"\\n<\/WRAP>\\n\\n<WRAP half column>\\n\\n<\/WRAP>\\n<\/WRAP>\\n"},{"type":"format","title":"simple centered box","icon":"..\/..\/plugins\/wrap\/images\/toolbar\/box.png","open":"<WRAP center round box 60%>\\n","close":"\\n<\/WRAP>\\n"},{"type":"format","title":"info box","icon":"..\/..\/plugins\/wrap\/images\/note\/16\/info.png","open":"<WRAP center round info 60%>\\n","close":"\\n<\/WRAP>\\n"},{"type":"format","title":"tip box","icon":"..\/..\/plugins\/wrap\/images\/note\/16\/tip.png","open":"<WRAP center round tip 60%>\\n","close":"\\n<\/WRAP>\\n"},{"type":"format","title":"important box","icon":"..\/..\/plugins\/wrap\/images\/note\/16\/important.png","open":"<WRAP center round important 60%>\\n","close":"\\n<\/WRAP>\\n"},{"type":"format","title":"alert box","icon":"..\/..\/plugins\/wrap\/images\/note\/16\/alert.png","open":"<WRAP center round alert 60%>\\n","close":"\\n<\/WRAP>\\n"},{"type":"format","title":"help box","icon":"..\/..\/plugins\/wrap\/images\/note\/16\/help.png","open":"<WRAP center round help 60%>\\n","close":"\\n<\/WRAP>\\n"},{"type":"format","title":"download box","icon":"..\/..\/plugins\/wrap\/images\/note\/16\/download.png","open":"<WRAP center round download 60%>\\n","close":"\\n<\/WRAP>\\n"},{"type":"format","title":"todo box","icon":"..\/..\/plugins\/wrap\/images\/note\/16\/todo.png","open":"<WRAP center round todo 60%>\\n","close":"\\n<\/WRAP>\\n"},{"type":"insert","title":"clear floats","icon":"..\/..\/plugins\/wrap\/images\/toolbar\/clear.png","insert":"<WRAP clear\/>\\n"},{"type":"format","title":"especially emphasised","icon":"..\/..\/plugins\/wrap\/images\/toolbar\/em.png","open":"<wrap em>","close":"<\/wrap>"},{"type":"format","title":"highlighted","icon":"..\/..\/plugins\/wrap\/images\/toolbar\/hi.png","open":"<wrap hi>","close":"<\/wrap>"},{"type":"format","title":"less significant","icon":"..\/..\/plugins\/wrap\/images\/toolbar\/lo.png","open":"<wrap lo>","close":"<\/wrap>"}]}];(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}function decode(s){return config.raw?s:decodeURIComponent(s);}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setTime(+t+days*864e+5);}return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}var result=key?undefined:{};var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=parts.join('=');if(key&&key===name){result=read(cookie,value);break;}if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));var qq=qq||{};qq.extend=function(first,second){for(var prop in second){first[prop]=second[prop];}};qq.indexOf=function(arr,elt,from){if(arr.indexOf)return arr.indexOf(elt,from);from=from||0;var len=arr.length;if(from<0)from+=len;for(;from<len;from++){if(from in arr&&arr[from]===elt){return from;}}return-1;};qq.getUniqueId=(function(){var id=0;return function(){return id++;};})();qq.attach=function(element,type,fn){if(element.addEventListener){element.addEventListener(type,fn,false);}else if(element.attachEvent){element.attachEvent('on'+type,fn);}};qq.detach=function(element,type,fn){if(element.removeEventListener){element.removeEventListener(type,fn,false);}else if(element.attachEvent){element.detachEvent('on'+type,fn);}};qq.preventDefault=function(e){if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}};qq.insertBefore=function(a,b){b.parentNode.insertBefore(a,b);};qq.remove=function(element){element.parentNode.removeChild(element);};qq.contains=function(parent,descendant){if(parent==descendant)return true;if(parent.contains){return parent.contains(descendant);}else{return!!(descendant.compareDocumentPosition(parent)&8);}};qq.toElement=(function(){var div=document.createElement('div');return function(html){div.innerHTML=html;var element=div.firstChild;div.removeChild(element);return element;};})();qq.css=function(element,styles){if(styles.opacity!=null){if(typeof element.style.opacity!='string'&&typeof(element.filters)!='undefined'){styles.filter='alpha(opacity='+Math.round(100*styles.opacity)+')';}}qq.extend(element.style,styles);};qq.hasClass=function(element,name){var re=new RegExp('(^| )'+name+'( |$)');return re.test(element.className);};qq.addClass=function(element,name){if(!qq.hasClass(element,name)){element.className+=' '+name;}};qq.removeClass=function(element,name){var re=new RegExp('(^| )'+name+'( |$)');element.className=element.className.replace(re,' ').replace(/^\s+|\s+$/g,"");};qq.setText=function(element,text){element.innerText=text;element.textContent=text;};qq.children=function(element){var children=[],child=element.firstChild;while(child){if(child.nodeType==1){children.push(child);}child=child.nextSibling;}return children;};qq.getByClass=function(element,className){if(element.querySelectorAll){return element.querySelectorAll('.'+className);}var result=[];var candidates=element.getElementsByTagName("*");var len=candidates.length;for(var i=0;i<len;i++){if(qq.hasClass(candidates[i],className)){result.push(candidates[i]);}}return result;};qq.obj2url=function(obj,temp,prefixDone){var uristrings=[],prefix='&',add=function(nextObj,i){var nextTemp=temp?(/\[\]$/.test(temp))?temp:temp+'['+i+']':i;if((nextTemp!='undefined')&&(i!='undefined')){uristrings.push((typeof nextObj==='object')?qq.obj2url(nextObj,nextTemp,true):(Object.prototype.toString.call(nextObj)==='[object Function]')?encodeURIComponent(nextTemp)+'='+encodeURIComponent(nextObj()):encodeURIComponent(nextTemp)+'='+encodeURIComponent(nextObj));}};if(!prefixDone&&temp){prefix=(/\?/.test(temp))?(/\?$/.test(temp))?'':'&':'?';uristrings.push(temp);uristrings.push(qq.obj2url(obj));}else if((Object.prototype.toString.call(obj)==='[object Array]')&&(typeof obj!='undefined')){for(var i=0,len=obj.length;i<len;++i){add(obj[i],i);}}else if((typeof obj!='undefined')&&(obj!==null)&&(typeof obj==="object")){for(var i in obj){if(obj.hasOwnProperty(i)&&typeof obj[i]!='function'){add(obj[i],i);}}}else{uristrings.push(encodeURIComponent(temp)+'='+encodeURIComponent(obj));}return uristrings.join(prefix).replace(/^&/,'').replace(/%20/g,'+');};var qq=qq||{};qq.FileUploaderBasic=function(o){this._options={debug:false,action:'/server/upload',params:{},button:null,multiple:true,maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(id,fileName){},onProgress:function(id,fileName,loaded,total){},onComplete:function(id,fileName,responseJSON){},onCancel:function(id,fileName){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(message){alert(message);}};qq.extend(this._options,o);this._filesInProgress=0;this._handler=this._createUploadHandler();if(this._options.button){this._button=this._createUploadButton(this._options.button);}this._preventLeaveInProgress();};qq.FileUploaderBasic.prototype={setParams:function(params){this._options.params=params;},getInProgress:function(){return this._filesInProgress;},_createUploadButton:function(element){var self=this;return new qq.UploadButton({element:element,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(input){self._onInputChange(input);}});},_createUploadHandler:function(){var self=this,handlerClass;if(qq.UploadHandlerXhr.isSupported()){handlerClass='UploadHandlerXhr';}else{handlerClass='UploadHandlerForm';}var handler=new qq[handlerClass]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(id,fileName,loaded,total){self._onProgress(id,fileName,loaded,total);self._options.onProgress(id,fileName,loaded,total);},onComplete:function(id,fileName,result){self._onComplete(id,fileName,result);self._options.onComplete(id,fileName,result);},onCancel:function(id,fileName){self._onCancel(id,fileName);self._options.onCancel(id,fileName);}});return handler;},_preventLeaveInProgress:function(){var self=this;qq.attach(window,'beforeunload',function(e){if(!self._filesInProgress){return;}var e=e||window.event;e.returnValue=self._options.messages.onLeave;return self._options.messages.onLeave;});},_onSubmit:function(id,fileName){this._filesInProgress++;},_onProgress:function(id,fileName,loaded,total){},_onComplete:function(id,fileName,result){this._filesInProgress--;if(result.error){this._options.showMessage(result.error);}},_onCancel:function(id,fileName){this._filesInProgress--;},_onInputChange:function(input){if(this._handler instanceof qq.UploadHandlerXhr){this._uploadFileList(input.files);}else{if(this._validateFile(input)){this._uploadFile(input);}}this._button.reset();},_uploadFileList:function(files){for(var i=0;i<files.length;i++){if(!this._validateFile(files[i])){return;}}for(var i=0;i<files.length;i++){this._uploadFile(files[i]);}},_uploadFile:function(fileContainer){var id=this._handler.add(fileContainer);var fileName=this._handler.getName(id);if(this._options.onSubmit(id,fileName)!==false){this._onSubmit(id,fileName);this._handler.upload(id,this._options.params);}},_validateFile:function(file){var name,size;if(file.value){name=file.value.replace(/.*(\/|\\)/,"");}else{name=file.fileName!=null?file.fileName:file.name;size=file.fileSize!=null?file.fileSize:file.size;}if(!this._isAllowedExtension(name)){this._error('typeError',name);return false;}else if(size===0){this._error('emptyError',name);return false;}else if(size&&this._options.sizeLimit&&size>this._options.sizeLimit){this._error('sizeError',name);return false;}else if(size&&size<this._options.minSizeLimit){this._error('minSizeError',name);return false;}return true;},_error:function(code,fileName){var message=this._options.messages[code];function r(name,replacement){message=message.replace(name,replacement);}r('{file}',this._formatFileName(fileName));r('{extensions}',this._options.allowedExtensions.join(', '));r('{sizeLimit}',this._formatSize(this._options.sizeLimit));r('{minSizeLimit}',this._formatSize(this._options.minSizeLimit));this._options.showMessage(message);},_formatFileName:function(name){if(name.length>33){name=name.slice(0,19)+'...'+name.slice(-13);}return name;},_isAllowedExtension:function(fileName){var ext=(-1!==fileName.indexOf('.'))?fileName.replace(/.*[.]/,'').toLowerCase():'';var allowed=this._options.allowedExtensions;if(!allowed.length){return true;}for(var i=0;i<allowed.length;i++){if(allowed[i].toLowerCase()==ext){return true;}}return false;},_formatSize:function(bytes){var i=-1;do{bytes=bytes/1024;i++;}while(bytes>99);return Math.max(bytes,0.1).toFixed(1)+['kB','MB','GB','TB','PB','EB'][i];}};qq.FileUploader=function(o){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader">'+'<div class="qq-upload-drop-area"><span>Drop files here to upload</span></div>'+'<div class="qq-upload-button">Upload a file</div>'+'<ul class="qq-upload-list"></ul>'+'</div>',fileTemplate:'<li>'+'<span class="qq-upload-file"></span>'+'<span class="qq-upload-spinner"></span>'+'<span class="qq-upload-size"></span>'+'<a class="qq-upload-cancel" href="#">Cancel</a>'+'<span class="qq-upload-failed-text">Failed</span>'+'</li>',classes:{button:'qq-upload-button',drop:'qq-upload-drop-area',dropActive:'qq-upload-drop-area-active',list:'qq-upload-list',file:'qq-upload-file',spinner:'qq-upload-spinner',size:'qq-upload-size',cancel:'qq-upload-cancel',success:'qq-upload-success',fail:'qq-upload-fail'}});qq.extend(this._options,o);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,'list');this._classes=this._options.classes;this._button=this._createUploadButton(this._find(this._element,'button'));this._bindCancelEvent();this._setupDragDrop();};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);qq.extend(qq.FileUploader.prototype,{_find:function(parent,type){var element=qq.getByClass(parent,this._options.classes[type])[0];if(!element){throw new Error('element not found '+type);}return element;},_setupDragDrop:function(){var self=this,dropArea=this._find(this._element,'drop');var dz=new qq.UploadDropZone({element:dropArea,onEnter:function(e){qq.addClass(dropArea,self._classes.dropActive);e.stopPropagation();},onLeave:function(e){e.stopPropagation();},onLeaveNotDescendants:function(e){qq.removeClass(dropArea,self._classes.dropActive);},onDrop:function(e){dropArea.style.display='none';qq.removeClass(dropArea,self._classes.dropActive);self._uploadFileList(e.dataTransfer.files);}});dropArea.style.display='none';qq.attach(document,'dragenter',function(e){if(!dz._isValidFileDrag(e))return;dropArea.style.display='block';});qq.attach(document,'dragleave',function(e){if(!dz._isValidFileDrag(e))return;var relatedTarget=document.elementFromPoint(e.clientX,e.clientY);if(!relatedTarget||relatedTarget.nodeName=="HTML"){dropArea.style.display='none';}});},_onSubmit:function(id,fileName){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(id,fileName);},_onProgress:function(id,fileName,loaded,total){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var item=this._getItemByFileId(id);var size=this._find(item,'size');size.style.display='inline';var text;if(loaded!=total){text=Math.round(loaded/total*100)+'% from '+this._formatSize(total);}else{text=this._formatSize(total);}qq.setText(size,text);},_onComplete:function(id,fileName,result){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var item=this._getItemByFileId(id);qq.remove(this._find(item,'cancel'));qq.remove(this._find(item,'spinner'));if(result.success){qq.addClass(item,this._classes.success);}else{qq.addClass(item,this._classes.fail);}},_addToList:function(id,fileName){var item=qq.toElement(this._options.fileTemplate);item.qqFileId=id;var fileElement=this._find(item,'file');qq.setText(fileElement,this._formatFileName(fileName));this._find(item,'size').style.display='none';this._listElement.appendChild(item);},_getItemByFileId:function(id){var item=this._listElement.firstChild;while(item){if(item.qqFileId==id)return item;item=item.nextSibling;}},_bindCancelEvent:function(){var self=this,list=this._listElement;qq.attach(list,'click',function(e){e=e||window.event;var target=e.target||e.srcElement;if(qq.hasClass(target,self._classes.cancel)){qq.preventDefault(e);var item=target.parentNode;self._handler.cancel(item.qqFileId);qq.remove(item);}});}});qq.UploadDropZone=function(o){this._options={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}};qq.extend(this._options,o);this._element=this._options.element;this._disableDropOutside();this._attachEvents();};qq.UploadDropZone.prototype={_disableDropOutside:function(e){if(!qq.UploadDropZone.dropOutsideDisabled){qq.attach(document,'dragover',function(e){if(e.dataTransfer){e.dataTransfer.dropEffect='none';e.preventDefault();}});qq.UploadDropZone.dropOutsideDisabled=true;}},_attachEvents:function(){var self=this;qq.attach(self._element,'dragover',function(e){if(!self._isValidFileDrag(e))return;var effect=e.dataTransfer.effectAllowed;if(effect=='move'||effect=='linkMove'){e.dataTransfer.dropEffect='move';}else{e.dataTransfer.dropEffect='copy';}e.stopPropagation();e.preventDefault();});qq.attach(self._element,'dragenter',function(e){if(!self._isValidFileDrag(e))return;self._options.onEnter(e);});qq.attach(self._element,'dragleave',function(e){if(!self._isValidFileDrag(e))return;self._options.onLeave(e);var relatedTarget=document.elementFromPoint(e.clientX,e.clientY);if(qq.contains(this,relatedTarget))return;self._options.onLeaveNotDescendants(e);});qq.attach(self._element,'drop',function(e){if(!self._isValidFileDrag(e))return;e.preventDefault();self._options.onDrop(e);});},_isValidFileDrag:function(e){var dt=e.dataTransfer,isWebkit=navigator.userAgent.indexOf("AppleWebKit")>-1;return dt&&dt.effectAllowed!='none'&&(dt.files||(!isWebkit&&dt.types.contains&&dt.types.contains('Files')));}};qq.UploadButton=function(o){this._options={element:null,multiple:false,name:'file',onChange:function(input){},hoverClass:'qq-upload-button-hover',focusClass:'qq-upload-button-focus'};qq.extend(this._options,o);this._element=this._options.element;qq.css(this._element,{position:'relative',overflow:'hidden',direction:'ltr'});this._input=this._createInput();};qq.UploadButton.prototype={getInput:function(){return this._input;},reset:function(){if(this._input.parentNode){qq.remove(this._input);}qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput();},_createInput:function(){var input=document.createElement("input");if(this._options.multiple){input.setAttribute("multiple","multiple");}input.setAttribute("type","file");input.setAttribute("name",this._options.name);qq.css(input,{position:'absolute',right:0,top:0,fontFamily:'Arial',fontSize:'118px',margin:0,padding:0,cursor:'pointer',opacity:0});this._element.appendChild(input);var self=this;qq.attach(input,'change',function(){self._options.onChange(input);});qq.attach(input,'mouseover',function(){qq.addClass(self._element,self._options.hoverClass);});qq.attach(input,'mouseout',function(){qq.removeClass(self._element,self._options.hoverClass);});qq.attach(input,'focus',function(){qq.addClass(self._element,self._options.focusClass);});qq.attach(input,'blur',function(){qq.removeClass(self._element,self._options.focusClass);});if(window.attachEvent){input.setAttribute('tabIndex',"-1");}return input;}};qq.UploadHandlerAbstract=function(o){this._options={debug:false,action:'/upload.php',maxConnections:999,onProgress:function(id,fileName,loaded,total){},onComplete:function(id,fileName,response){},onCancel:function(id,fileName){}};qq.extend(this._options,o);this._queue=[];this._params=[];};qq.UploadHandlerAbstract.prototype={log:function(str){if(this._options.debug&&window.console)console.log('[uploader] '+str);},add:function(file){},upload:function(id,params){var len=this._queue.push(id);var copy={};qq.extend(copy,params);this._params[id]=copy;if(len<=this._options.maxConnections){this._upload(id,this._params[id]);}},cancel:function(id){this._cancel(id);this._dequeue(id);},cancelAll:function(){for(var i=0;i<this._queue.length;i++){this._cancel(this._queue[i]);}this._queue=[];},getName:function(id){},getSize:function(id){},getQueue:function(){return this._queue;},_upload:function(id){},_cancel:function(id){},_dequeue:function(id){var i=qq.indexOf(this._queue,id);this._queue.splice(i,1);var max=this._options.maxConnections;if(this._queue.length>=max&&i<max){var nextId=this._queue[max-1];this._upload(nextId,this._params[nextId]);}}};qq.UploadHandlerForm=function(o){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={};};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerForm.prototype,{add:function(fileInput){fileInput.setAttribute('name','qqfile');var id='qq-upload-handler-iframe'+qq.getUniqueId();this._inputs[id]=fileInput;if(fileInput.parentNode){qq.remove(fileInput);}return id;},getName:function(id){return this._inputs[id].value.replace(/.*(\/|\\)/,"");},_cancel:function(id){this._options.onCancel(id,this.getName(id));delete this._inputs[id];var iframe=document.getElementById(id);if(iframe){iframe.setAttribute('src','javascript:false;');qq.remove(iframe);}},_upload:function(id,params){var input=this._inputs[id];if(!input){throw new Error('file with passed id was not added, or already uploaded or cancelled');}var fileName=this.getName(id);var iframe=this._createIframe(id);var form=this._createForm(iframe,params);form.appendChild(input);var self=this;this._attachLoadEvent(iframe,function(){self.log('iframe loaded');var response=self._getIframeContentJSON(iframe);self._options.onComplete(id,fileName,response);self._dequeue(id);delete self._inputs[id];setTimeout(function(){qq.remove(iframe);},1);});form.submit();qq.remove(form);return id;},_attachLoadEvent:function(iframe,callback){qq.attach(iframe,'load',function(){if(!iframe.parentNode){return;}if(iframe.contentDocument&&iframe.contentDocument.body&&iframe.contentDocument.body.innerHTML=="false"){return;}callback();});},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+doc.body.innerHTML+")");}catch(err){response={};}return response;},_createIframe:function(id){var iframe=qq.toElement('<iframe src="javascript:false;" name="'+id+'" />');iframe.setAttribute('id',id);iframe.style.display='none';document.body.appendChild(iframe);return iframe;},_createForm:function(iframe,params){var form=qq.toElement('<form method="post" enctype="multipart/form-data"></form>');var queryString=qq.obj2url(params,this._options.action);form.setAttribute('action',queryString);form.setAttribute('target',iframe.name);form.style.display='none';document.body.appendChild(form);return form;}});qq.UploadHandlerXhr=function(o){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[];};qq.UploadHandlerXhr.isSupported=function(){var input=document.createElement('input');input.type='file';return('multiple'in input&&typeof File!="undefined"&&typeof(new XMLHttpRequest()).upload!="undefined");};qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerXhr.prototype,{add:function(file){if(!(file instanceof File)){throw new Error('Passed obj in not a File (in qq.UploadHandlerXhr)');}return this._files.push(file)-1;},getName:function(id){var file=this._files[id];return file.fileName!=null?file.fileName:file.name;},getSize:function(id){var file=this._files[id];return file.fileSize!=null?file.fileSize:file.size;},getLoaded:function(id){return this._loaded[id]||0;},_upload:function(id,params){var file=this._files[id],name=this.getName(id),size=this.getSize(id);this._loaded[id]=0;var xhr=this._xhrs[id]=new XMLHttpRequest();var self=this;xhr.upload.onprogress=function(e){if(e.lengthComputable){self._loaded[id]=e.loaded;self._options.onProgress(id,name,e.loaded,e.total);}};xhr.onreadystatechange=function(){if(xhr.readyState==4){self._onComplete(id,xhr);}};params=params||{};params['qqfile']=name;var queryString=qq.obj2url(params,this._options.action);xhr.open("POST",queryString,true);xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.setRequestHeader("X-File-Name",encodeURIComponent(name));xhr.setRequestHeader("Content-Type","application/octet-stream");xhr.send(file);},_onComplete:function(id,xhr){if(!this._files[id])return;var name=this.getName(id);var size=this.getSize(id);this._options.onProgress(id,name,size,size);if(xhr.status==200){this.log("xhr - server response received");this.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+")");}catch(err){response={};}this._options.onComplete(id,name,response);}else{this._options.onComplete(id,name,{});}this._files[id]=null;this._xhrs[id]=null;this._dequeue(id);},_cancel:function(id){this._options.onCancel(id,this.getName(id));this._files[id]=null;if(this._xhrs[id]){this._xhrs[id].abort();this._xhrs[id]=null;}}});qq.extend(qq.FileUploader.prototype,{_createUploadHandler:function(){var self=this,handlerClass;if(qq.UploadHandlerXhr.isSupported()){handlerClass='UploadHandlerXhr';}else{handlerClass='UploadHandlerForm';}var handler=new qq[handlerClass]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(id,fileName,loaded,total){self._onProgress(id,fileName,loaded,total);self._options.onProgress(id,fileName,loaded,total);},onComplete:function(id,fileName,result){self._onComplete(id,fileName,result);self._options.onComplete(id,fileName,result);},onCancel:function(id,fileName){self._onCancel(id,fileName);self._options.onCancel(id,fileName);},onUpload:function(){self._onUpload();}});return handler;},_onUpload:function(){this._handler.uploadAll(this._options.params);},_uploadFile:function(fileContainer){var id=this._handler.add(fileContainer);var fileName=this._handler.getName(id);if(this._options.onSubmit(id,fileName)!==false){this._onSubmit(id,fileName);}},_addToList:function(id,fileName){var item=qq.toElement(this._options.fileTemplate);item.qqFileId=id;var fileElement=this._find(item,'file');qq.setText(fileElement,fileName);this._find(item,'size').style.display='none';var nameElement=this._find(item,'nameInput');fileName=fileName.toLowerCase();fileName=fileName.replace(/([ !"#$%&\'()+,\/;<=>?@[\]^`{|}~:]+)/g,'_');fileName=fileName.replace(/^_+/,'');nameElement.value=fileName;nameElement.id='mediamanager__upload_item'+id;this._listElement.appendChild(item);}});qq.FileUploaderExtended=function(o){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader">'+'<div class="qq-upload-drop-area"><span>'+LANG.media_drop+'</span></div>'+'<div class="qq-upload-button">'+LANG.media_select+'</div>'+'<ul class="qq-upload-list"></ul>'+'<div class="qq-action-container">'+'  <button class="qq-upload-action" type="submit" id="mediamanager__upload_button">'+LANG.media_upload_btn+'</button>'+'  <label class="qq-overwrite-check"><input type="checkbox" value="1" name="ow" class="dw__ow"> <span>'+LANG.media_overwrt+'</span></label>'+'</div>'+'</div>',fileTemplate:'<li>'+'<span class="qq-upload-file hidden"></span>'+'  <input class="qq-upload-name-input edit" type="text" value="" />'+'  <span class="qq-upload-spinner hidden"></span>'+'  <span class="qq-upload-size"></span>'+'  <a class="qq-upload-cancel" href="#">'+LANG.media_cancel+'</a>'+'  <span class="qq-upload-failed-text error">Failed</span>'+'</li>',classes:{button:'qq-upload-button',drop:'qq-upload-drop-area',dropActive:'qq-upload-drop-area-active',list:'qq-upload-list',nameInput:'qq-upload-name-input',overwriteInput:'qq-overwrite-check',uploadButton:'qq-upload-action',file:'qq-upload-file',spinner:'qq-upload-spinner',size:'qq-upload-size',cancel:'qq-upload-cancel',success:'qq-upload-success',fail:'qq-upload-fail',failedText:'qq-upload-failed-text'}});qq.extend(this._options,o);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,'list');this._classes=this._options.classes;this._button=this._createUploadButton(this._find(this._element,'button'));this._bindCancelEvent();this._bindUploadEvent();this._setupDragDrop();};qq.extend(qq.FileUploaderExtended.prototype,qq.FileUploader.prototype);qq.extend(qq.FileUploaderExtended.prototype,{_bindUploadEvent:function(){var self=this,list=this._listElement;qq.attach(document.getElementById('mediamanager__upload_button'),'click',function(e){e=e||window.event;var target=e.target||e.srcElement;qq.preventDefault(e);self._handler._options.onUpload();jQuery(".qq-upload-name-input").each(function(i){jQuery(this).prop('disabled',true);});});},_onComplete:function(id,fileName,result){this._filesInProgress--;var item=this._getItemByFileId(id);qq.remove(this._find(item,'cancel'));qq.remove(this._find(item,'spinner'));var nameInput=this._find(item,'nameInput');var fileElement=this._find(item,'file');qq.setText(fileElement,nameInput.value);qq.removeClass(fileElement,'hidden');qq.remove(nameInput);jQuery('.qq-upload-button, #mediamanager__upload_button').remove();jQuery('.dw__ow').parent().hide();jQuery('.qq-upload-drop-area').remove();if(result.success){qq.addClass(item,this._classes.success);$link='<a href="'+result.link+'" id="h_:'+result.id+'" class="select">'+nameInput.value+'</a>';jQuery(fileElement).html($link);}else{qq.addClass(item,this._classes.fail);var fail=this._find(item,'failedText');if(result.error)qq.setText(fail,result.error);}if(document.getElementById('media__content')&&!document.getElementById('mediamanager__done_form')){var action=document.location.href;var i=action.indexOf('?');if(i)action=action.substr(0,i);var button='<form method="post" action="'+action+'" id="mediamanager__done_form"><div>';button+='<input type="hidden" value="'+result.ns+'" name="ns">';button+='<input type="hidden" value="1" name="recent">';button+='<button type="submit">'+LANG.media_done_btn+'</button></div></form>';jQuery('#mediamanager__uploader').append(button);}}});qq.extend(qq.UploadHandlerForm.prototype,{uploadAll:function(params){this._uploadAll(params);},getName:function(id){var file=this._inputs[id];var name=document.getElementById('mediamanager__upload_item'+id);if(name!=null){return name.value;}else{if(file!=null){return file.value.replace(/.*(\/|\\)/,"");}else{return null;}}},_uploadAll:function(params){jQuery(".qq-upload-spinner").each(function(i){jQuery(this).removeClass('hidden');});for(key in this._inputs){this.upload(key,params);}},_upload:function(id,params){var input=this._inputs[id];if(!input){throw new Error('file with passed id was not added, or already uploaded or cancelled');}var fileName=this.getName(id);var iframe=this._createIframe(id);var form=this._createForm(iframe,params);form.appendChild(input);var nameInput=qq.toElement('<input name="mediaid" value="'+fileName+'" type="text">');form.appendChild(nameInput);var checked=jQuery('.dw__ow').is(':checked');var owCheckbox=jQuery('.dw__ow').clone();owCheckbox.attr('checked',checked);jQuery(form).append(owCheckbox);var self=this;this._attachLoadEvent(iframe,function(){self.log('iframe loaded');var response=self._getIframeContentJSON(iframe);self._options.onComplete(id,fileName,response);self._dequeue(id);delete self._inputs[id];setTimeout(function(){qq.remove(iframe);},1);});form.submit();qq.remove(form);return id;}});qq.extend(qq.UploadHandlerXhr.prototype,{uploadAll:function(params){this._uploadAll(params);},getName:function(id){var file=this._files[id];var name=document.getElementById('mediamanager__upload_item'+id);if(name!=null){return name.value;}else{if(file!=null){return file.fileName!=null?file.fileName:file.name;}else{return null;}}},getSize:function(id){var file=this._files[id];if(file==null)return null;return file.fileSize!=null?file.fileSize:file.size;},_upload:function(id,params){var file=this._files[id],name=this.getName(id),size=this.getSize(id);if(name==null||size==null)return;this._loaded[id]=0;var xhr=this._xhrs[id]=new XMLHttpRequest();var self=this;xhr.upload.onprogress=function(e){if(e.lengthComputable){self._loaded[id]=e.loaded;self._options.onProgress(id,name,e.loaded,e.total);}};xhr.onreadystatechange=function(){if(xhr.readyState==4){self._onComplete(id,xhr);}};params=params||{};params['qqfile']=name;params['ow']=jQuery('.dw__ow').is(':checked');var queryString=qq.obj2url(params,this._options.action);xhr.open("POST",queryString,true);xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.setRequestHeader("X-File-Name",encodeURIComponent(name));xhr.setRequestHeader("Content-Type","application/octet-stream");xhr.send(file);},_uploadAll:function(params){jQuery(".qq-upload-spinner").each(function(i){jQuery(this).removeClass('hidden');});for(key in this._files){this.upload(key,params);}}});function substr_replace(str,replace,start,length){var a2,b1;a2=(start<0?str.length:0)+start;if(typeof length==='undefined'){length=str.length-a2;}else if(length<0&&start<0&&length<=start){length=0;}b1=(length<0?str.length:a2)+length;return str.substring(0,a2)+replace+str.substring(b1);}function bind(fnc){var Aps=Array.prototype.slice,static_args=Aps.call(arguments,1);return function(){return fnc.apply(this,static_args.concat(Aps.call(arguments,0)));};}function logError(e,file){if(window.console&&console.error){console.error('The error "%s: %s" occurred in file "%s". '+'If this is in a plugin try updating or disabling the plugin, '+'if this is in a template try updating the template or switching to the "dokuwiki" template.',e.name,e.message,file);if(e.stack){console.error(e.stack);}}}var timer={_cur_id:0,_handlers:{},execDispatch:function(id){timer._handlers[id]();},add:function(func,timeout){var id=++timer._cur_id;timer._handlers[id]=func;return window.setTimeout('timer.execDispatch('+id+')',timeout);}};function Delay(func,timeout){this.func=func;if(timeout){this.timeout=timeout;}}Delay.prototype={func:null,timeout:500,delTimer:function(){if(this.timer!==null){window.clearTimeout(this.timer);this.timer=null;}},start:function(){DEPRECATED('don\'t use the Delay object, use window.timeout with a callback instead');this.delTimer();var _this=this;this.timer=timer.add(function(){_this.exec.call(_this);},this.timeout);this._data={_this:arguments[0],_params:Array.prototype.slice.call(arguments,2)};},exec:function(){this.delTimer();this.func.call(this._data._this,this._data._params);}};var DokuCookie={data:{},name:'DOKU_PREFS',setValue:function(key,val){var text=[],_this=this;this.init();if(val===false){delete this.data[key];}else{val=val+"";this.data[key]=val;}jQuery.each(_this.data,function(key,val){if(_this.data.hasOwnProperty(key)){text.push(encodeURIComponent(key)+'#'+encodeURIComponent(val));}});jQuery.cookie(this.name,text.join('#'),{expires:365,path:DOKU_COOKIE_PARAM.path,secure:DOKU_COOKIE_PARAM.secure});},getValue:function(key,def){this.init();return this.data.hasOwnProperty(key)?this.data[key]:def;},init:function(){var text,parts,i;if(!jQuery.isEmptyObject(this.data)){return;}text=jQuery.cookie(this.name);if(text){parts=text.split('#');for(i=0;i<parts.length;i+=2){this.data[decodeURIComponent(parts[i])]=decodeURIComponent(parts[i+1]);}}}};if('function'===typeof jQuery&&'function'===typeof jQuery.noConflict){jQuery.noConflict();}var clientPC=navigator.userAgent.toLowerCase();var is_macos=navigator.appVersion.indexOf('Mac')!=-1;var is_gecko=((clientPC.indexOf('gecko')!=-1)&&(clientPC.indexOf('spoofer')==-1)&&(clientPC.indexOf('khtml')==-1)&&(clientPC.indexOf('netscape/7.0')==-1));var is_safari=((clientPC.indexOf('applewebkit')!=-1)&&(clientPC.indexOf('spoofer')==-1));var is_khtml=(navigator.vendor=='KDE'||(document.childNodes&&!document.all&&!navigator.taintEnabled));if(clientPC.indexOf('opera')!=-1){var is_opera=true;var is_opera_preseven=(window.opera&&!document.childNodes);var is_opera_seven=(window.opera&&document.childNodes);}function closePopups(){jQuery('div.JSpopup').hide();}jQuery(function(){jQuery(document).on('click',closePopups);});jQuery.fn.dw_qsearch=function(overrides){var dw_qsearch={output:'#qsearch__out',$inObj:this,$outObj:null,timer:null,curRequest:null,init:function(){var do_qsearch;dw_qsearch.$outObj=jQuery(dw_qsearch.output);if(dw_qsearch.$inObj.length===0||dw_qsearch.$outObj.length===0){return;}do_qsearch=function(){if(dw_qsearch.curRequest!=null){dw_qsearch.curRequest.abort();}var value=dw_qsearch.getSearchterm();if(value===''){dw_qsearch.clear_results();return;}dw_qsearch.$inObj.parents('form').addClass('searching');dw_qsearch.curRequest=jQuery.post(DOKU_BASE+'lib/exe/ajax.php',{call:'qsearch',q:encodeURI(value)},dw_qsearch.onCompletion,'html');};dw_qsearch.$inObj.on('keyup',function(){if(dw_qsearch.timer){window.clearTimeout(dw_qsearch.timer);dw_qsearch.timer=null;}dw_qsearch.timer=window.setTimeout(do_qsearch,500);});dw_qsearch.$outObj.on('click',dw_qsearch.clear_results);},getSearchterm:function(){return dw_qsearch.$inObj.val();},clear_results:function(){dw_qsearch.$inObj.parents('form').removeClass('searching');dw_qsearch.$outObj.hide();dw_qsearch.$outObj.text('');},onCompletion:function(data){var max,$links,too_big;dw_qsearch.$inObj.parents('form').removeClass('searching');dw_qsearch.curRequest=null;if(data===''){dw_qsearch.clear_results();return;}dw_qsearch.$outObj .html(data).show().css('white-space','nowrap');dw_qsearch.$outObj.find('li').css('overflow','visible');$links=dw_qsearch.$outObj.find('a');max=dw_qsearch.$outObj[0].clientWidth;if(document.documentElement.dir==='rtl'){max-=parseInt(dw_qsearch.$outObj.css('padding-left'));too_big=function(l){return l.offsetLeft<0;};}else{max-=parseInt(dw_qsearch.$outObj.css('padding-right'));too_big=function(l){return l.offsetWidth+l.offsetLeft>max;};}$links.each(function(){var start,length,replace,nsL,nsR,eli,runaway;if(!too_big(this)){return;}nsL=this.textContent.indexOf('(');nsR=this.textContent.indexOf(')');eli=0;runaway=0;while((nsR-nsL>3)&&too_big(this)&&runaway++<500){if(eli!==0){if((eli-nsL)>(nsR-eli)){start=eli-2;length=2;}else{start=eli+1;length=1;}replace='';}else{start=Math.floor(nsL+((nsR-nsL)/2));length=1;replace='…';}this.textContent=substr_replace(this.textContent,replace,start,length);eli=this.textContent.indexOf('…');nsL=this.textContent.indexOf('(');nsR=this.textContent.indexOf(')');}});dw_qsearch.$outObj.find('li').css('overflow','hidden').css('text-overflow','ellipsis');}};jQuery.extend(dw_qsearch,overrides);if(!overrides.deferInit){dw_qsearch.init();}return dw_qsearch;};jQuery(function(){jQuery('#qsearch__in').dw_qsearch({output:'#qsearch__out'});});jQuery(function(){'use strict';var $searchForm=jQuery('.search-results-form');if(!$searchForm.length){return;}var $toggleAssistanceButton=jQuery('<button>').addClass('toggleAssistant').attr('type','button').attr('aria-expanded','false').text(LANG.search_toggle_tools).prependTo($searchForm.find('fieldset'));$toggleAssistanceButton.on('click',function(){jQuery('.advancedOptions').toggle(0,function(){var $me=jQuery(this);if($me.attr('aria-hidden')){$me.removeAttr('aria-hidden');$toggleAssistanceButton.attr('aria-expanded','true');DokuCookie.setValue('sa','on');}else{$me.attr('aria-hidden','true');$toggleAssistanceButton.attr('aria-expanded','false');DokuCookie.setValue('sa','off');}});});if(DokuCookie.getValue('sa')==='on'){$toggleAssistanceButton.trigger('click');}$searchForm.find('.advancedOptions .toggle div.current').on('click',function(){var $me=jQuery(this);$me.parent().siblings().removeClass('open');$me.parent().siblings().find('ul:first').attr('aria-expanded','false');$me.parent().toggleClass('open');if($me.parent().hasClass('open')){$me.parent().find('ul:first').attr('aria-expanded','true');}else{$me.parent().find('ul:first').attr('aria-expanded','false');}});});jQuery.fn.dw_tree=function(overrides){var dw_tree={throbber_delay:500,$obj:this,toggle_selector:'a.idx_dir',init:function(){this.$obj.on('click',this.toggle_selector,this,this.toggle);jQuery('ul:first',this.$obj).attr('role','tree');jQuery('ul',this.$obj).not(':first').attr('role','group');jQuery('li',this.$obj).attr('role','treeitem');jQuery('li.open > ul',this.$obj).attr('aria-expanded','true');jQuery('li.closed > ul',this.$obj).attr('aria-expanded','false');jQuery('li.closed',this.$obj).attr('aria-live','assertive');},toggle:function(e){var $listitem,$sublist,timeout,$clicky,show_sublist,dw_tree,opening;e.preventDefault();dw_tree=e.data;$clicky=jQuery(this);$listitem=$clicky.closest('li');$sublist=$listitem.find('ul').first();opening=$listitem.hasClass('closed');dw_tree.toggle_display($clicky,opening);if($sublist.is(':visible')){$listitem.removeClass('open').addClass('closed');$sublist.attr('aria-expanded','false');}else{$listitem.removeClass('closed').addClass('open');$sublist.attr('aria-expanded','true');}if(!opening){$sublist.dw_hide();return;}show_sublist=function(data){$sublist.hide();if(typeof data!=='undefined'){$sublist.html(data);$sublist.parent().attr('aria-busy','false').removeAttr('aria-live');jQuery('li.closed',$sublist).attr('aria-live','assertive');}if($listitem.hasClass('open')){$sublist.dw_show();}};if($sublist.length>0){show_sublist();return;}$sublist=jQuery('<ul class="idx" role="group"/>');$listitem.append($sublist);timeout=window.setTimeout(bind(show_sublist,'<li aria-busy="true"><img src="'+DOKU_BASE+'lib/images/throbber.gif" alt="loading..." title="loading..." /></li>'),dw_tree.throbber_delay);dw_tree.load_data(function(data){window.clearTimeout(timeout);show_sublist(data);},$clicky);},toggle_display:function($clicky,opening){},load_data:function(show_data,$clicky){show_data();}};jQuery.extend(dw_tree,overrides);if(!overrides.deferInit){dw_tree.init();}return dw_tree;};var dw_index=jQuery('#index__tree').dw_tree({deferInit:true,load_data:function(show_sublist,$clicky){jQuery.post(DOKU_BASE+'lib/exe/ajax.php',$clicky[0].search.substr(1)+'&call=index',show_sublist,'html');}});jQuery(function(){var $tree=jQuery('#index__tree');dw_index.$obj=$tree;dw_index.init();});function selection_class(){this.start=0;this.end=0;this.obj=null;this.scroll=0;this.fix=0;this.getLength=function(){return this.end-this.start;};this.getText=function(){return(!this.obj)?'':this.obj.value.substring(this.start,this.end);};}function DWgetSelection(textArea){var sel=new selection_class();textArea.focus();sel.obj=textArea;sel.start=textArea.selectionStart;sel.end=textArea.selectionEnd;sel.scroll=textArea.scrollTop;return sel;}function DWsetSelection(selection){selection.obj.setSelectionRange(selection.start,selection.end);if(selection.scroll)selection.obj.scrollTop=selection.scroll;}function pasteText(selection,text,opts){if(!opts)opts={};selection.obj.value=selection.obj.value.substring(0,selection.start)+text+selection.obj.value.substring(selection.end,selection.obj.value.length);if(is_opera){selection.end=selection.start+text.replace(/\r?\n/g,'\r\n').length;}else{selection.end=selection.start+text.length;}if(opts.startofs)selection.start+=opts.startofs;if(opts.endofs)selection.end-=opts.endofs;if(opts.nosel)selection.start=selection.end;DWsetSelection(selection);}function insertTags(textAreaID,tagOpen,tagClose,sampleText){var txtarea=jQuery('#'+textAreaID)[0];var selection=DWgetSelection(txtarea);var text=selection.getText();var opts;if(text.charAt(text.length-1)==' '){selection.end--;text=selection.getText();}if(!text){text=sampleText;opts={startofs:tagOpen.length,endofs:tagClose.length};}else{opts={nosel:true};}text=tagOpen+text+tagClose;pasteText(selection,text,opts);}function insertAtCarret(textAreaID,text){var txtarea=jQuery('#'+textAreaID)[0];var selection=DWgetSelection(txtarea);pasteText(selection,text,{nosel:true});}var pickercounter=0;function initToolbar(tbid,edid,tb,allowblock){var $toolbar,$edit;if(typeof tbid=='string'){$toolbar=jQuery('#'+tbid);}else{$toolbar=jQuery(tbid);}$edit=jQuery('#'+edid);if($toolbar.length==0||$edit.length==0||$edit.attr('readOnly')){return;}if(typeof allowblock==='undefined'){allowblock=true;}$toolbar.html('');jQuery.each(tb,function(k,val){if(!tb.hasOwnProperty(k)||(!allowblock&&val.block===true)){return;}var actionFunc,$btn;$btn=jQuery(createToolButton(val.icon,val.title,val.key,val.id,val['class']));actionFunc='tb_'+val.type;if(jQuery.isFunction(window[actionFunc])){$btn.on('click',bind(window[actionFunc],$btn,val,edid));$toolbar.append($btn);return;}actionFunc='addBtnAction'+val.type.charAt(0).toUpperCase()+val.type.substring(1);if(jQuery.isFunction(window[actionFunc])){var pickerid=window[actionFunc]($btn,val,edid);if(pickerid!==''){$toolbar.append($btn);$btn.attr('aria-controls',pickerid);if(actionFunc==='addBtnActionPicker'){$btn.attr('aria-haspopup','true');}}return;}alert('unknown toolbar type: '+val.type+'  '+actionFunc);});}function tb_format(btn,props,edid){var sample=props.sample||props.title;insertTags(edid,fixtxt(props.open),fixtxt(props.close),fixtxt(sample));pickerClose();return false;}function tb_formatln(btn,props,edid){var sample=props.sample||props.title,opts,selection=DWgetSelection(jQuery('#'+edid)[0]);sample=fixtxt(sample);props.open=fixtxt(props.open);props.close=fixtxt(props.close);if(selection.getLength()){sample=selection.getText();opts={nosel:true};}else{opts={startofs:props.open.length,endofs:props.close.length};}sample=sample.split("\n").join(props.close+"\n"+props.open);sample=props.open+sample+props.close;pasteText(selection,sample,opts);pickerClose();return false;}function tb_insert(btn,props,edid){insertAtCarret(edid,fixtxt(props.insert));pickerClose();return false;}function tb_mediapopup(btn,props,edid){window.open(DOKU_BASE+props.url+encodeURIComponent(NS)+'&edid='+encodeURIComponent(edid),props.name,props.options);return false;}function tb_autohead(btn,props,edid){var lvl=currentHeadlineLevel(edid),tags;lvl+=props.mod;if(lvl<1)lvl=1;if(lvl>5)lvl=5;tags=(new Array(8-lvl)).join('=');insertTags(edid,tags+' ',' '+tags+"\n",props.text);pickerClose();return false;}function addBtnActionPicker($btn,props,edid){var pickerid='picker'+(pickercounter++);var picker=createPicker(pickerid,props,edid);jQuery(picker).attr('aria-hidden','true');$btn.click(function(e){pickerToggle(pickerid,$btn);e.preventDefault();return'';});return pickerid;}function addBtnActionLinkwiz($btn,props,edid){dw_linkwiz.init(jQuery('#'+edid));jQuery($btn).click(function(e){dw_linkwiz.val=props;dw_linkwiz.toggle();e.preventDefault();return'';});return'link__wiz';}function pickerToggle(pickerid,$btn){var $picker=jQuery('#'+pickerid),pos=$btn.offset();if($picker.hasClass('a11y')){$picker.removeClass('a11y').attr('aria-hidden','false');}else{$picker.addClass('a11y').attr('aria-hidden','true');}var picker_left=pos.left+3,picker_width=$picker.width(),window_width=jQuery(window).width();if(picker_width>300){$picker.css("max-width","300");picker_width=300;}if((picker_left+picker_width+40)>window_width){picker_left=window_width-picker_width-40;}if(picker_left<0){picker_left=0;}$picker.offset({left:picker_left,top:pos.top+$btn[0].offsetHeight+3});}function pickerClose(){jQuery('.picker').addClass('a11y');}function fixtxt(str){return str.replace(/\\n/g,"\n");}jQuery(function(){initToolbar('tool__bar','wiki__text',toolbar);jQuery('#tool__bar').attr('role','toolbar');});function createToolButton(icon,label,key,id,classname){var $btn=jQuery(document.createElement('button')),$ico=jQuery(document.createElement('img'));$btn.addClass('toolbutton');if(classname){$btn.addClass(classname);}$btn.attr('title',label).attr('aria-controls','wiki__text');if(key){$btn.attr('title',label+' ['+key.toUpperCase()+']').attr('accessKey',key);}if(id){$btn.attr('id',id);$ico.attr('id',id+'_ico');}if(icon.substr(0,1)!=='/'){icon=DOKU_BASE+'lib/images/toolbar/'+icon;}$ico.attr('src',icon);$ico.attr('alt','');$ico.attr('width',16);$ico.attr('height',16);$btn.append($ico);return $btn[0];}function createPicker(id,props,edid){var $picker=jQuery(document.createElement('div'));$picker.addClass('picker a11y');if(props['class']){$picker.addClass(props['class']);}$picker.attr('id',id).css('position','absolute');function $makebutton(title){var $btn=jQuery(document.createElement('button')).addClass('pickerbutton').attr('title',title).attr('aria-controls',edid).on('click',bind(pickerInsert,title,edid)).appendTo($picker);return $btn;}jQuery.each(props.list,function(key,item){if(!props.list.hasOwnProperty(key)){return;}if(isNaN(key)){if(item.substr(0,1)!=='/'){item=DOKU_BASE+'lib/images/'+props.icobase+'/'+item;}jQuery(document.createElement('img')).attr('src',item).attr('alt','').css('height','16').appendTo($makebutton(key));}else if(typeof item=='string'){$makebutton(item).text(item);}else{initToolbar($picker,edid,props.list);return false;}});jQuery('body').append($picker);return $picker[0];}function pickerInsert(text,edid){insertAtCarret(edid,text);pickerClose();}function addBtnActionSignature($btn,props,edid){if(typeof SIG!='undefined'&&SIG!=''){$btn.on('click',function(e){insertAtCarret(edid,SIG);e.preventDefault();});return edid;}return'';}function currentHeadlineLevel(textboxId){var field=jQuery('#'+textboxId)[0],s=false,opts=[field.value.substr(0,DWgetSelection(field).start)];if(field.form&&field.form.prefix){opts.push(field.form.prefix.value);}jQuery.each(opts,function(_,opt){var str="\n"+opt,lasthl=str.lastIndexOf("\n==");if(lasthl!==-1){s=str.substr(lasthl+1,6);return false;}});if(s===false){return 0;}return 7-s.match(/^={2,6}/)[0].length;}window.textChanged=false;window.doku_edit_text_content='';function deleteDraft(){if(is_opera||window.keepDraft){return;}var $dwform=jQuery('#dw__editform');if($dwform.length===0){return;}jQuery.post(DOKU_BASE+'lib/exe/ajax.php',{call:'draftdel',id:$dwform.find('input[name=id]').val(),sectok:$dwform.find('input[name=sectok]').val()});}jQuery(function(){var $editform=jQuery('#dw__editform');if($editform.length==0){return;}var $edit_text=jQuery('#wiki__text');if($edit_text.length>0){if($edit_text.attr('readOnly')){return;}var sel=DWgetSelection($edit_text[0]);sel.start=0;sel.end=0;DWsetSelection(sel);$edit_text.trigger('focus');doku_edit_text_content=$edit_text.val();}var changeHandler=function(){doku_hasTextBeenModified();doku_summaryCheck();};$editform.change(changeHandler);$editform.keydown(changeHandler);window.onbeforeunload=function(){if(window.textChanged){return LANG.notsavedyet;}};window.onunload=deleteDraft;jQuery('#edbtn__save').on('click',function(){window.onbeforeunload='';textChanged=false;});jQuery('#edbtn__preview').on('click',function(){window.onbeforeunload='';textChanged=false;window.keepDraft=true;});var $summary=jQuery('#edit__summary');$summary.on('change keyup',doku_summaryCheck);if(textChanged)doku_summaryCheck();});function doku_hasTextBeenModified(){if(!textChanged){var $edit_text=jQuery('#wiki__text');if($edit_text.length>0){textChanged=doku_edit_text_content!=$edit_text.val();}else{textChanged=true;}}}function doku_summaryCheck(){var $sum=jQuery('#edit__summary'),missing=$sum.val()==='';$sum.toggleClass('missing',missing).toggleClass('edit',!missing);}var dw_editor={init:function(){var $editor=jQuery('#wiki__text');if($editor.length===0){return;}dw_editor.initSizeCtl('#size__ctl',$editor);if($editor.attr('readOnly')){return;}$editor.keydown(dw_editor.keyHandler);},initSizeCtl:function(ctlarea,editor){var $ctl=jQuery(ctlarea),$textarea=jQuery(editor);if($ctl.length===0||$textarea.length===0){return;}$textarea.css('height',DokuCookie.getValue('sizeCtl')||'300px');var wrp=DokuCookie.getValue('wrapCtl');if(wrp){dw_editor.setWrap($textarea[0],wrp);}jQuery.each([['larger',function(){dw_editor.sizeCtl(editor,100);}],['smaller',function(){dw_editor.sizeCtl(editor,-100);}],['wrap',function(){dw_editor.toggleWrap(editor);}]],function(_,img){jQuery(document.createElement('img')).attr('src',DOKU_BASE+'lib/images/'+img[0]+'.gif').attr('alt','').on('click',img[1]).appendTo($ctl);});},sizeCtl:function(editor,val){var $textarea=jQuery(editor),height=parseInt($textarea.css('height'))+val;$textarea.css('height',height+'px');DokuCookie.setValue('sizeCtl',$textarea.css('height'));},toggleWrap:function(editor){var $textarea=jQuery(editor),wrap=$textarea.attr('wrap');dw_editor.setWrap($textarea[0],(wrap&&wrap.toLowerCase()=='off')?'soft':'off');DokuCookie.setValue('wrapCtl',$textarea.attr('wrap'));},setWrap:function(textarea,wrapAttrValue){textarea.setAttribute('wrap',wrapAttrValue);var parNod=textarea.parentNode;var nxtSib=textarea.nextSibling;parNod.removeChild(textarea);parNod.insertBefore(textarea,nxtSib);},keyHandler:function(e){if(jQuery.inArray(e.keyCode,[8,10,13,32])===-1){return;}var selection=DWgetSelection(this);if(selection.getLength()>0){return;}var search="\n"+this.value.substr(0,selection.start);var linestart=Math.max(search.lastIndexOf("\n"),search.lastIndexOf("\r"));search=search.substr(linestart);if((e.keyCode==13||e.keyCode==10)&&e.ctrlKey){jQuery('#edbtn__save').trigger('click');e.preventDefault();return false;}else if(e.keyCode==13){var match=search.match(/(\n  +([\*-] ?)?)/);if(match){var scroll=this.scrollHeight;var match2=search.match(/^\n  +[\*-]\s*$/);if(match2&&this.value.substr(selection.start).match(/^($|\r?\n)/)){this.value=this.value.substr(0,linestart)+"\n"+this.value.substr(selection.start);selection.start=linestart+1;selection.end=linestart+1;DWsetSelection(selection);}else{insertAtCarret(this.id,match[1]);}this.scrollTop+=(this.scrollHeight-scroll);e.preventDefault();return false;}}else if(e.keyCode==8){var match=search.match(/(\n  +)([*-] ?)$/);if(match){var spaces=match[1].length-1;if(spaces>3){this.value=this.value.substr(0,linestart)+this.value.substr(linestart+2);selection.start=selection.start-2;selection.end=selection.start;}else{this.value=this.value.substr(0,linestart)+this.value.substr(selection.start);selection.start=linestart;selection.end=linestart;}DWsetSelection(selection);e.preventDefault();return false;}}else if(e.keyCode==32){var match=search.match(/(\n  +)([*-] )$/);if(match){this.value=this.value.substr(0,linestart)+'  '+this.value.substr(linestart);selection.start=selection.start+2;selection.end=selection.start;DWsetSelection(selection);e.preventDefault();return false;}}}};jQuery(dw_editor.init);var dw_locktimer={timeout:0,draft:false,timerID:null,lasttime:null,msg:LANG.willexpire,pageid:'',fieldsToSaveAsDraft:['input[name=prefix]','textarea[name=wikitext]','input[name=suffix]','input[name=date]',],callbacks:[],init:function(timeout,draft,edid){var $edit;edid=edid||'wiki__text';$edit=jQuery('#'+edid);if($edit.length===0||$edit.attr('readonly')){return;}dw_locktimer.timeout=timeout*1000;dw_locktimer.draft=draft;dw_locktimer.lasttime=new Date();dw_locktimer.pageid=jQuery('#dw__editform').find('input[name=id]').val();if(!dw_locktimer.pageid){return;}$edit.keypress(dw_locktimer.refresh);dw_locktimer.reset();},addField:function(selector){dw_locktimer.fieldsToSaveAsDraft.push(selector);},addRefreshCallback:function(callback){dw_locktimer.callbacks.push(callback);},reset:function(){dw_locktimer.clear();dw_locktimer.timerID=window.setTimeout(dw_locktimer.warning,dw_locktimer.timeout);},warning:function(){dw_locktimer.clear();alert(fixtxt(dw_locktimer.msg));},clear:function(){if(dw_locktimer.timerID!==null){window.clearTimeout(dw_locktimer.timerID);dw_locktimer.timerID=null;}},refresh:function(){var now=new Date(),params='call=lock&id='+dw_locktimer.pageid+'&';if(now.getTime()-dw_locktimer.lasttime.getTime()<=30*1000){return;}if(dw_locktimer.draft&&jQuery('#dw__editform').find('textarea[name=wikitext]').length>0){params+=jQuery('#dw__editform').find(dw_locktimer.fieldsToSaveAsDraft.join(', ')).serialize();}jQuery.post(DOKU_BASE+'lib/exe/ajax.php',params,null,'json').done(function dwLocktimerRefreshDoneHandler(data){dw_locktimer.callbacks.forEach(function(callback){callback(data);});});dw_locktimer.lasttime=now;},refreshed:function(data){if(data.errors.length){data.errors.forEach(function(error){jQuery('#draft__status').after(jQuery('<div class="error"></div>').text(error));})}jQuery('#draft__status').html(data.draft);if(data.lock!=='1'){return;}dw_locktimer.reset();}};dw_locktimer.callbacks.push(dw_locktimer.refreshed);class LinkWizard{$wiz=null;$entry=null;result=null;timer=null;textArea=null;selected=-1;selection=null;val={open:'[[',close:']]'};init($editor){const pos=$editor.position();if(this.$wiz)return;this.$wiz=jQuery(document.createElement('div')).dialog({autoOpen:false,draggable:true,title:LANG.linkwiz,resizable:false}).html('<div>'+LANG.linkto+' <input type="text" class="edit" id="link__wiz_entry" autocomplete="off" /></div>'+'<div id="link__wiz_result"></div>').parent().attr('id','link__wiz').css({'position':'absolute','top':(pos.top+20)+'px','left':(pos.left+80)+'px'}).hide().appendTo('.dokuwiki:first');this.textArea=$editor[0];this.result=jQuery('#link__wiz_result')[0];jQuery(this.result).css('position','relative');this.$entry=jQuery('#link__wiz_entry');if(JSINFO.namespace){this.$entry.val(JSINFO.namespace+':');}jQuery('#link__wiz .ui-dialog-titlebar-close').on('click',()=>this.hide());this.$entry.keyup((e)=>this.onEntry(e));jQuery(this.result).on('click','a',(e)=>this.onResultClick(e));}onEntry(e){if(e.key==='ArrowLeft'||e.key==='ArrowRight'){return true;}if(e.key==='Escape'){this.hide();e.preventDefault();e.stopPropagation();return false;}if(e.key==='ArrowUp'){this.select(this.selected-1);e.preventDefault();e.stopPropagation();return false;}if(e.key==='ArrowDown'){this.select(this.selected+1);e.preventDefault();e.stopPropagation();return false;}if(e.key==='Enter'){if(this.selected>-1){const $obj=this.$getResult(this.selected);if($obj.length>0){this.resultClick($obj.find('a')[0]);}}else if(this.$entry.val()){this.insertLink(this.$entry.val());}e.preventDefault();e.stopPropagation();return false;}this.autocomplete();}$getResult(num){return jQuery(this.result).find('div').eq(num);}select(num){if(num<0){this.deselect();return;}const $obj=this.$getResult(num);if($obj.length===0){return;}this.deselect();$obj.addClass('selected');const childPos=$obj.position().top;const yDiff=childPos+$obj.outerHeight()-jQuery(this.result).innerHeight();if(childPos<0){jQuery(this.result)[0].scrollTop+=childPos;}else if(yDiff>0){jQuery(this.result)[0].scrollTop+=yDiff;}this.selected=num;}deselect(){if(this.selected>-1){this.$getResult(this.selected).removeClass('selected');}this.selected=-1;}onResultClick(e){if(!jQuery(e.target).is('a')){return;}e.stopPropagation();e.preventDefault();this.resultClick(e.target);return false;}resultClick(a){this.$entry.val(a.title);if(a.title===''||a.title.charAt(a.title.length-1)===':'){this.autocomplete_exec();}else{if(jQuery(a.nextSibling).is('span')){this.insertLink(a.nextSibling.innerText);}else{this.insertLink('');}}}insertLink(title){let link=this.$entry.val();let selection;let linkTitle;if(!link){return;}selection=DWgetSelection(this.textArea);if(selection.start===0&&selection.end===0){selection=this.selection;}linkTitle=selection.getText();if(linkTitle.charAt(linkTitle.length-1)===' '){selection.end--;linkTitle=selection.getText();}if(!linkTitle&&!DOKU_UHC){linkTitle=title;}const syntax=this.createLinkSyntax(link,linkTitle);pasteText(selection,syntax.link,syntax);this.hide();const externallinkpattern=new RegExp('^((f|ht)tps?:)?//','i');let entry_value;if(externallinkpattern.test(this.$entry.val())){if(JSINFO.namespace){entry_value=JSINFO.namespace+':';}else{entry_value='';}}else{entry_value=this.$entry.val().replace(/[^:]*$/,'')}this.$entry.val(entry_value);}createLinkSyntax(id,title){let link=id;if(!id.match(/^(f|ht)tps?:\/\//i)){const refId=this.textArea.form.id.value;link=LinkWizard.createRelativeID(refId,id);}let startofs=link.length;let endofs=0;if(this.val.open){startofs+=this.val.open.length;link=this.val.open+link;}link+='|';startofs+=1;if(title){link+=title;}if(this.val.close){link+=this.val.close;endofs=this.val.close.length;}return{link,startofs,endofs};}autocomplete(){if(this.timer!==null){window.clearTimeout(this.timer);this.timer=null;}this.timer=window.setTimeout(()=>this.autocomplete_exec(),350);}autocomplete_exec(){const $res=jQuery(this.result);this.deselect();$res.html('<img src="'+DOKU_BASE+'lib/images/throbber.gif" alt="" width="16" height="16" />').load(DOKU_BASE+'lib/exe/ajax.php',{call:'linkwiz',q:this.$entry.val()});}show(){this.selection=DWgetSelection(this.textArea);this.$wiz.show();this.$entry.focus();this.autocomplete();const temp=this.$entry.val();this.$entry.val('');this.$entry.val(temp);}hide(){this.$wiz.hide();this.textArea.focus();}toggle(){if(this.$wiz.css('display')==='none'){this.show();}else{this.hide();}}static createRelativeID(ref,id){const sourceNs=ref.split(':');[]=sourceNs.pop();const targetNs=id.split(':');const targetPage=targetNs.pop();const relativeID=[];let commonPrefixLength=0;while(commonPrefixLength<sourceNs.length&&commonPrefixLength<targetNs.length&&sourceNs[commonPrefixLength]===targetNs[commonPrefixLength]){commonPrefixLength++;}if(sourceNs.length){if(commonPrefixLength){if(commonPrefixLength===sourceNs.length&&commonPrefixLength===targetNs.length){}else if(commonPrefixLength<sourceNs.length){relativeID.push(...Array(sourceNs.length-commonPrefixLength).fill('..'));}else{relativeID.push('.');}}else if(targetNs.length===0){relativeID.push('');}relativeID.push(...targetNs.slice(commonPrefixLength));}else{relativeID.push(...targetNs);}relativeID.push(targetPage);return relativeID.join(':');}}window.dw_linkwiz=new LinkWizard();var dw_mediamanager={keepopen:false,hide:false,popup:false,display:false,ext:false,$popup:null,align:false,link:false,size:false,forbidden_opts:{},view_opts:{list:false,sort:false},layout_width:0,minHeights:{thumbs:200,rows:100},init:function(){var $content,$tree;$content=jQuery('#media__content');$tree=jQuery('#media__tree');if(!$tree.length)return;dw_mediamanager.prepare_content($content);dw_mediamanager.attachoptions();dw_mediamanager.initpopup();$content .on('change','#upload__file',dw_mediamanager.suggest).on('click','a.select',dw_mediamanager.select).on('click','#media__content a.btn_media_delete',dw_mediamanager.confirmattach).on('submit','#mediamanager__done_form',dw_mediamanager.list);$tree.dw_tree({toggle_selector:'img',load_data:function(show_sublist,$clicky){var $link=$clicky.parent().find('div.li a.idx_dir');jQuery.post(DOKU_BASE+'lib/exe/ajax.php',$link[0].search.substr(1)+'&call=medians',show_sublist,'html');},toggle_display:function($clicky,opening){$clicky.attr('src',DOKU_BASE+'lib/images/'+(opening?'minus':'plus')+'.gif');}});$tree.on('click','a',dw_mediamanager.list);dw_mediamanager.set_fileview_list();dw_mediamanager.init_options();dw_mediamanager.image_diff();dw_mediamanager.init_ajax_uploader();var $page=jQuery('#mediamanager__page');$page.find('div.filelist').on('click','ul.tabs a',dw_mediamanager.list).on('click','div.panelContent a',dw_mediamanager.details).on('submit','#dw__mediasearch',dw_mediamanager.list).on('change','#upload__file',dw_mediamanager.suggest).on('click','.qq-upload-file a',dw_mediamanager.details);$page.find('div.file').on('click','ul.tabs a',dw_mediamanager.details).on('submit','#mediamanager__btn_update',dw_mediamanager.list).on('submit','#page__revisions',dw_mediamanager.details).on('click','#page__revisions a',dw_mediamanager.details).on('submit','#mediamanager__save_meta',dw_mediamanager.details).on('submit','#mediamanager__btn_delete',dw_mediamanager.details).on('submit','#mediamanager__btn_restore',dw_mediamanager.details).on('submit','.btn_newer, .btn_older',dw_mediamanager.details);dw_mediamanager.resize();dw_mediamanager.update_resizable();dw_mediamanager.layout_width=$page.width();jQuery(window).on('resize',dw_mediamanager.window_resize);},init_options:function(){var $options=jQuery('div.filelist div.panelHeader form.options'),$listType,$sortBy,$both;if($options.length===0){return;}$listType=$options.find('li.listType');$sortBy=$options.find('li.sortBy');$both=$listType.add($sortBy);$options.find('button[type=submit]').parent().hide();$both.find('label').each(function(){var $this=jQuery(this);$this.children('input').appendTo($this.parent());});$both.find("input[type='radio']").checkboxradio({icon:false});$both.controlgroup();$listType.children('input').change(function(){dw_mediamanager.set_fileview_list();});$sortBy.children('input').change(function(event){dw_mediamanager.set_fileview_sort();dw_mediamanager.list.call(jQuery('#dw__mediasearch')[0]||this,event);});},initpopup:function(){var opts,$insp,$insbtn;dw_mediamanager.$popup=jQuery(document.createElement('div')).attr('id','media__popup_content').dialog({autoOpen:false,width:280,modal:true,draggable:true,title:LANG.mediatitle,resizable:false});opts=[{id:'link',label:LANG.mediatarget,btns:['lnk','direct','nolnk','displaylnk']},{id:'align',label:LANG.mediaalign,btns:['noalign','left','center','right']},{id:'size',label:LANG.mediasize,btns:['small','medium','large','original']}];jQuery.each(opts,function(_,opt){var $p,$l;$p=jQuery(document.createElement('p')).attr('id','media__'+opt.id);if(dw_mediamanager.display==="2"){$p.hide();}$l=jQuery(document.createElement('label')).text(opt.label);$p.append($l);jQuery.each(opt.btns,function(i,text){var $btn,$img;$btn=jQuery(document.createElement('button')).addClass('button').attr('id',"media__"+opt.id+"btn"+(i+1)).attr('title',LANG['media'+text]).on('click',bind(dw_mediamanager.setOpt,opt.id));$img=jQuery(document.createElement('img')).attr('src',DOKU_BASE+'lib/images/media_'+opt.id+'_'+text+'.png');$btn.append($img);$p.append($btn);});dw_mediamanager.$popup.append($p);});$insp=jQuery(document.createElement('p'));dw_mediamanager.$popup.append($insp);$insbtn=jQuery(document.createElement('input')).attr('id','media__sendbtn').attr('type','button').addClass('button').val(LANG.mediainsert);$insp.append($insbtn);},insert:function(id){var opts,cb,edid,s;dw_mediamanager.$popup.dialog('close');opts='';if({img:1,swf:1}[dw_mediamanager.ext]===1){if(dw_mediamanager.link==='4'){opts='?linkonly';}else{if(dw_mediamanager.link==="3"&&dw_mediamanager.ext==='img'){opts='?nolink';}else if(dw_mediamanager.link==="2"&&dw_mediamanager.ext==='img'){opts='?direct';}s=parseInt(dw_mediamanager.size,10);var size=s*200;if(s&&s>=1&&s<4){opts+=(opts.length)?'&':'?';opts+=size;if(dw_mediamanager.ext==='swf'){switch(s){case 1:opts+='x62';break;case 2:opts+='x123';break;case 3:opts+='x185';break;}}}}}edid=String.prototype.match.call(document.location,/&edid=([^&]+)/);edid=edid?edid[1]:'wiki__text';cb=String.prototype.match.call(document.location,/&onselect=([^&]+)/);cb=cb?cb[1].replace(/[^\w]+/,''):'dw_mediamanager_item_select';opener[cb](edid,id,opts,dw_mediamanager.align,dw_mediamanager.keepopen);if(!dw_mediamanager.keepopen){window.close();}opener.focus();return false;},suggest:function(){var $file,$name,text;$file=jQuery(this);$name=jQuery('#upload__name');if($name.val()!='')return;if(!$file.length||!$name.length){return;}text=$file.val();text=text.substr(text.lastIndexOf('/')+1);text=text.substr(text.lastIndexOf('\\')+1);$name.val(text);},list:function(event){var $link,$content,params;if(event){event.preventDefault();}jQuery('div.success, div.info, div.error, div.notify').remove();$link=jQuery(this);$content=jQuery('#media__content');if($content.length===0){$content=jQuery('div.filelist');if($link.hasClass('idx_dir')){jQuery('div.file').empty();jQuery('div.namespaces .selected').removeClass('selected');$link.addClass('selected');}}params='call=medialist&';if($link[0].search){params+=$link[0].search.substr(1);}else if($link.is('form')){params+=dw_mediamanager.form_params($link);}else if($link.closest('form').length>0){params+=dw_mediamanager.form_params($link.closest('form'));}dw_mediamanager.update_content($content,params);},form_params:function($form){if(!$form.length)return;var action='';var i=$form[0].action.indexOf('?');if(i>=0){action=$form[0].action.substr(i+1);}return action+'&'+$form.serialize();},set_fileview_list:function(new_type){dw_mediamanager.set_fileview_opt(['list','listType',function(new_type){jQuery('div.filelist div.panelContent ul').toggleClass('rows',new_type==='rows').toggleClass('thumbs',new_type==='thumbs');}],new_type);},set_fileview_sort:function(new_sort){dw_mediamanager.set_fileview_opt(['sort','sortBy',function(new_sort){}],new_sort);},set_fileview_opt:function(opt,new_val){if(typeof new_val==='undefined'){new_val=jQuery('form.options li.'+opt[1]+' input').filter(':checked').val();if(typeof new_val==='undefined'){new_val='thumbs';}}if(new_val!==dw_mediamanager.view_opts[opt[0]]){opt[2](new_val);DokuCookie.setValue(opt[0],new_val);dw_mediamanager.view_opts[opt[0]]=new_val;}},details:function(event){var $link,$content,params,update_list;$link=jQuery(this);event.preventDefault();jQuery('div.success, div.info, div.error, div.notify').remove();if($link[0].id=='mediamanager__btn_delete'&&!confirm(LANG.del_confirm)){return false;}if($link[0].id=='mediamanager__btn_restore'&&!confirm(LANG.restore_confirm)){return false;}$content=jQuery('div.file');params='call=mediadetails&';if($link[0].search){params+=$link[0].search.substr(1);}else if($link.is('form')){params+=dw_mediamanager.form_params($link);}else if($link.closest('form').length>0){params+=dw_mediamanager.form_params($link.closest('form'));}update_list=($link[0].id=='mediamanager__btn_delete'||$link[0].id=='mediamanager__btn_restore');dw_mediamanager.update_content($content,params,update_list);},update_content:function($content,params,update_list){var $container;jQuery.post(DOKU_BASE+'lib/exe/ajax.php',params,function(data){dw_mediamanager.$resizables().resizable('destroy');if(update_list){dw_mediamanager.list.call(jQuery('#mediamanager__page').find('form.options button[type="submit"]')[0]);}$content.html(data);dw_mediamanager.prepare_content($content);dw_mediamanager.updatehide();dw_mediamanager.update_resizable();dw_behaviour.revisionBoxHandler();dw_mediamanager.set_fileview_list(dw_mediamanager.view_opts.list);dw_mediamanager.image_diff();dw_mediamanager.init_ajax_uploader();dw_mediamanager.init_options();},'html');$container=$content.find('div.panelContent');if($container.length===0){$container=$content;}$container.html('<img src="'+DOKU_BASE+'lib/images/throbber.gif" alt="..." class="load" />');},window_resize:function(){dw_mediamanager.opacity_slider();dw_mediamanager.portions_slider();},$resizables:function(){return jQuery('#mediamanager__page').find('div.namespaces, div.filelist');},update_resizable:function(){var $resizables=dw_mediamanager.$resizables();$resizables.resizable({handles:(jQuery('html[dir=rtl]').length?'w':'e'),resize:function(event,ui){var $page=jQuery('#mediamanager__page');var widthFull=$page.width();var widthResizables=0;$resizables.each(function(){widthResizables+=jQuery(this).width();});var $filePanel=$page.find('div.panel.file');var widthOtherResizable=widthResizables-jQuery(this).width();var minWidthNonResizable=parseFloat($filePanel.css("min-width"));var maxWidth=widthFull-(widthOtherResizable+minWidthNonResizable)-1;$resizables.resizable("option","maxWidth",maxWidth);var relWidthNonResizable=99.9-(100*widthResizables/widthFull);$filePanel.width(relWidthNonResizable+'%');dw_mediamanager.opacity_slider();dw_mediamanager.portions_slider();}});},resize:function(){jQuery('#mediamanager__page').find('div.panelContent').css('height','60vh');},image_diff:function(){if(jQuery('#mediamanager__difftype').length)return;var $form=jQuery('#mediamanager__form_diffview');if(!$form.length)return;var $label=jQuery(document.createElement('label'));$label.append('<span>'+LANG.media_diff+'</span> ');var $select=jQuery(document.createElement('select')).attr('id','mediamanager__difftype').attr('name','difftype').change(dw_mediamanager.change_diff_type);$select.append(new Option(LANG.media_diff_both,"both"));$select.append(new Option(LANG.media_diff_opacity,"opacity"));$select.append(new Option(LANG.media_diff_portions,"portions"));$label.append($select);$form.append($label);var select=document.getElementById('mediamanager__difftype');select.options[0].text=LANG.media_diff_both;select.options[1].text=LANG.media_diff_opacity;select.options[2].text=LANG.media_diff_portions;},change_diff_type:function(){var $select=jQuery('#mediamanager__difftype');var $content=jQuery('#mediamanager__diff');var params=dw_mediamanager.form_params($select.closest('form'))+'&call=mediadiff';jQuery.post(DOKU_BASE+'lib/exe/ajax.php',params,function(data){$content.html(data);dw_mediamanager.portions_slider();dw_mediamanager.opacity_slider();},'html');},opacity_slider:function(){var $diff=jQuery("#mediamanager__diff");var $slider=$diff.find("div.slider");if(!$slider.length)return;var $image=$diff.find('div.imageDiff.opacity div.image1 img');if(!$image.length)return;$slider.width($image.width()-20);$slider.slider();$slider.slider("option","min",0);$slider.slider("option","max",0.999);$slider.slider("option","step",0.001);$slider.slider("option","value",0.5);$slider.on("slide",function(event,ui){jQuery('#mediamanager__diff').find('div.imageDiff.opacity div.image2 img').css({opacity:$slider.slider("option","value")});});},portions_slider:function(){var $diff=jQuery("#mediamanager__diff");if(!$diff.length)return;var $image1=$diff.find('div.imageDiff.portions div.image1 img');var $image2=$diff.find('div.imageDiff.portions div.image2 img');if(!$image1.length||!$image2.length)return;$diff.width('100%');$image2.parent().width('97%');$image1.width('100%');$image2.width('100%');if($image1.width()<$diff.width()){$diff.width($image1.width());}$image2.parent().width('50%');$image2.width($image1.width());$image1.width($image1.width());var $slider=$diff.find("div.slider");if(!$slider.length)return;$slider.width($image1.width()-20);$slider.slider();$slider.slider("option","min",0);$slider.slider("option","max",97);$slider.slider("option","step",1);$slider.slider("option","value",50);$slider.on("slide",function(event,ui){jQuery('#mediamanager__diff').find('div.imageDiff.portions div.image2').css({width:$slider.slider("option","value")+'%'});});},params_toarray:function(str){var vars=[],hash;var hashes=str.split('&');for(var i=0;i<hashes.length;i++){hash=hashes[i].split('=');vars[decodeURIComponent(hash[0])]=decodeURIComponent(hash[1]);}return vars;},init_ajax_uploader:function(){if(!jQuery('#mediamanager__uploader').length)return;if(jQuery('.qq-upload-list').length)return;var params=dw_mediamanager.form_params(jQuery('#dw__upload'))+'&call=mediaupload';params=dw_mediamanager.params_toarray(params);var uploader=new qq.FileUploaderExtended({element:document.getElementById('mediamanager__uploader'),action:DOKU_BASE+'lib/exe/ajax.php',params:params});},prepare_content:function($content){$content.find('div.example:visible').hide();$content.find('a.allowedmime').on('click',function(event){event.preventDefault();$toggle=jQuery(this);$list=$toggle.next('span');$list.toggle();}).next('span').hide();},select:function(event){var $link,id,dot,ext;event.preventDefault();$link=jQuery(this);id=$link.attr('id').substr(2);if(!opener){jQuery(document.getElementById('ex_'+id.replace(/:/g,'_').replace(/^_/,''))).dw_toggle();return;}dw_mediamanager.ext=false;dot=id.lastIndexOf(".");if(-1===dot){dw_mediamanager.insert(id);return;}ext=id.substr(dot);if({'.jpg':1,'.jpeg':1,'.png':1,'.gif':1,'.swf':1}[ext]!==1){dw_mediamanager.insert(id);return;}var $sendbtn=jQuery('#media__sendbtn');$sendbtn.off().on('click',bind(dw_mediamanager.insert,id));dw_mediamanager.unforbid('ext');if(ext==='.swf'){dw_mediamanager.ext='swf';dw_mediamanager.forbid('ext',{link:['1','2'],size:['4']});}else{dw_mediamanager.ext='img';}dw_mediamanager.setOpt('link');dw_mediamanager.setOpt('align');dw_mediamanager.setOpt('size');jQuery('#media__linkbtn1, #media__linkbtn2, #media__sizebtn4').toggle(dw_mediamanager.ext==='img');dw_mediamanager.$popup.dialog('open');$sendbtn.focus();},confirmattach:function(e){if(!confirm(LANG.del_confirm+"\n"+jQuery(this).attr('title'))){e.preventDefault();}},attachoptions:function(){var $obj,opts;$obj=jQuery('#media__opts');if($obj.length===0){return;}opts=[];if(opener){opts.push(['keepopen','keepopen']);}opts.push(['hide','hidedetails']);jQuery.each(opts,function(_,opt){var $box,$lbl;$box=jQuery(document.createElement('input')).attr('type','checkbox').attr('id','media__'+opt[0]).on('click',bind(dw_mediamanager.toggleOption,opt[0]));if(DokuCookie.getValue(opt[0])){$box.prop('checked',true);dw_mediamanager[opt[0]]=true;}$lbl=jQuery(document.createElement('label')).attr('for','media__'+opt[0]).text(LANG[opt[1]]);$obj.append($box,$lbl,document.createElement('br'));});dw_mediamanager.updatehide();},toggleOption:function(variable){if(jQuery(this).prop('checked')){DokuCookie.setValue(variable,1);dw_mediamanager[variable]=true;}else{DokuCookie.setValue(variable,'');dw_mediamanager[variable]=false;}if(variable==='hide'){dw_mediamanager.updatehide();}},updatehide:function(){jQuery('#media__content').find('div.detail').dw_toggle(!dw_mediamanager.hide);},setOpt:function(opt,e){var val,i;if(typeof e!=='undefined'){val=this.id.substring(this.id.length-1);}else{val=dw_mediamanager.getOpt(opt);}if(val===false){DokuCookie.setValue(opt,'');dw_mediamanager[opt]=false;return;}if(opt==='link'){if(val!=='4'&&dw_mediamanager.link==='4'){dw_mediamanager.unforbid('linkonly');dw_mediamanager.setOpt('align');dw_mediamanager.setOpt('size');}else if(val==='4'){dw_mediamanager.forbid('linkonly',{align:false,size:false});}jQuery("#media__size, #media__align").dw_toggle(val!=='4');}DokuCookie.setValue(opt,val);dw_mediamanager[opt]=val;for(i=1;i<=4;i++){jQuery("#media__"+opt+"btn"+i).removeClass('selected');}jQuery('#media__'+opt+'btn'+val).addClass('selected');},unforbid:function(group){delete dw_mediamanager.forbidden_opts[group];},forbid:function(group,forbids){dw_mediamanager.forbidden_opts[group]=forbids;},allowedOpt:function(opt,val){var ret=true;jQuery.each(dw_mediamanager.forbidden_opts,function(_,forbids){ret=forbids[opt]!==false&&jQuery.inArray(val,forbids[opt])===-1;return ret;});return ret;},getOpt:function(opt){var allowed=bind(dw_mediamanager.allowedOpt,opt);if(dw_mediamanager[opt]!==false&&allowed(dw_mediamanager[opt])){return dw_mediamanager[opt];}if(DokuCookie.getValue(opt)&&allowed(DokuCookie.getValue(opt))){return DokuCookie.getValue(opt);}if(opt==='size'&&allowed('2')){return'2';}return jQuery.grep(['1','2','3','4'],allowed)[0]||false;}};function dw_mediamanager_item_select(edid,mediaid,opts,align,keepopen){var alignleft='';var alignright='';var cursorInImageTag=false;var textArea=jQuery('#'+edid)[0];var selection=DWgetSelection(textArea);selection.end=selection.end+2;var charsAfterCursor=selection.getText();if(charsAfterCursor==='}}'){cursorInImageTag=true;}if(align!=='1'){alignleft=align==='2'?'':' ';alignright=align==='4'?'':' ';}if(keepopen&&cursorInImageTag){selection.start=selection.start+2;DWsetSelection(selection);}insertTags(edid,'{{'+alignleft+mediaid+opts+alignright+'|','}}','');}jQuery(dw_mediamanager.init);function DEPRECATED(msg){if(!window.console)return;if(!msg)msg='';var func;if(arguments.callee)func=arguments.callee.caller.name;if(func)func=' '+func+'()';var line='DEPRECATED function call'+func+'. '+msg;if(console.warn){console.warn(line);}else{console.log(line);}if(console.trace)console.trace();}function DEPRECATED_WRAP(func,context){return function(){DEPRECATED();return func.apply(context||this,arguments);};}jQuery.fn.dw_hide=function(fn,noaria){if(!noaria)this.attr('aria-expanded','false');return this.slideUp('fast',fn);};jQuery.fn.dw_show=function(fn,noaria){if(!noaria)this.attr('aria-expanded','true');return this.slideDown('fast',fn);};jQuery.fn.dw_toggle=function(state,fn,noaria){return this.each(function(){var $this=jQuery(this);if(typeof state==='undefined'){state=$this.is(':hidden');}$this[state?"dw_show":"dw_hide"](fn,noaria);});};var dw_behaviour={init:function(){dw_behaviour.focusMarker();dw_behaviour.scrollToMarker();dw_behaviour.removeHighlightOnClick();dw_behaviour.quickSelect();dw_behaviour.checkWindowsShares();dw_behaviour.subscription();dw_behaviour.pageRestoreConfirm();dw_behaviour.securityCheck();dw_behaviour.revisionBoxHandler();jQuery(document).on('click','#page__revisions input[type=checkbox]',dw_behaviour.revisionBoxHandler);jQuery('.bounce').effect('bounce',{times:10},2000);},scrollToMarker:function(){var $obj=jQuery('#scroll__here');if($obj.length){if($obj.offset().top!=0){jQuery('html, body').animate({scrollTop:$obj.offset().top-100},500);}else{$obj[0].scrollIntoView();}}},pageRestoreConfirm:function(){jQuery('#dokuwiki__pagetools li.revert a').on('click',function(){return confirm(LANG.restore_confirm);});},focusMarker:function(){jQuery('#focus__this').trigger('focus');},removeHighlightOnClick:function(){jQuery('span.search_hit').on('click',function(e){jQuery(e.target).removeClass('search_hit',1000);});},quickSelect:function(){jQuery('.quickselect').change(function(e){HTMLFormElement.prototype.submit.call(e.target.form);}).closest('form').find(':button').not('.show').hide();},checkWindowsShares:function(){if(!LANG.nosmblinks||navigator.userAgent.match(/(Trident|MSIE|Edge)/)){return;}jQuery('a.windows').on('click',function(){alert(LANG.nosmblinks.replace(/\\n/,"\n"));});},subscription:function(){var $form,$list,$digest;$form=jQuery('#subscribe__form');if(0===$form.length)return;$list=$form.find("input[name='sub_style'][value='list']");$digest=$form.find("input[name='sub_style'][value='digest']");$form.find("input[name='sub_target']").on('click',function(){var $this=jQuery(this),show_list;if(!$this.prop('checked')){return;}show_list=$this.val().match(/:$/);$list.parent().dw_toggle(show_list);if(!show_list&&$list.prop('checked')){$digest.prop('checked','checked');}}).filter(':checked').trigger('click');},revisionBoxHandler:function(){var $revisions=jQuery('#page__revisions');var $all=jQuery('input[type="checkbox"][name="rev2[]"]',$revisions);var $checked=$all.filter(':checked');var $button=jQuery('button',$revisions);if($checked.length<2){$all.prop('disabled',false);$button.prop('disabled',true);}else{$all.prop('disabled',true);$button.prop('disabled',false);$checked.each(function(i){jQuery(this).prop('disabled',false);if(i>1){jQuery(this).prop('checked',false);}});}},securityCheck:function(){var $checkDiv=jQuery('#security__check');if(!$checkDiv.length)return;if(sessionStorage.getItem('dw-security-check:'+DOKU_BASE)){$checkDiv.remove();return;}var img=new Image();img.onerror=function(){$checkDiv.remove();sessionStorage.setItem('dw-security-check:'+DOKU_BASE,true);};img.onload=function(){$checkDiv.html(LANG.data_insecure);$checkDiv.addClass('error');};img.src=$checkDiv.data('src')+'?t='+Date.now();}};jQuery(dw_behaviour.init);dw_page={init:function(){dw_page.sectionHighlight();dw_page.currentIDHighlight();jQuery('a.fn_top').on('mouseover',dw_page.footnoteDisplay);dw_page.makeToggle('#dw__toc h3','#dw__toc > div');},sectionHighlight:function(){jQuery('form.btn_secedit').each(function(){let $tgt=jQuery(this).parent();const match=$tgt.attr('class').match(/(\s+|^)editbutton_(\d+)(\s+|$)/);if(!match)return;const nr=match[2];let $highlight=jQuery();const $highlightWrap=jQuery('<div class="section_highlight_wrapper"></div>');$highlight=$highlight.add($tgt);while($tgt.length>0&&!($tgt.hasClass('sectionedit'+nr)||$tgt.find('.sectionedit'+nr).length)){$tgt=$tgt.prev();$highlight=$highlight.add($tgt);}$highlight.wrapAll($highlightWrap);}).on('mouseover',function(){jQuery(this).parents('.section_highlight_wrapper').addClass('section_highlight');}).on('mouseout',function(){jQuery(this).parents('.section_highlight_wrapper').removeClass('section_highlight');});},currentIDHighlight:function(){jQuery('a.wikilink1, a.wikilink2').filter('[data-wiki-id="'+JSINFO.id+'"]').wrap('<span class="curid"></span>');},insituPopup:function(target,popup_id){var $fndiv=jQuery('#'+popup_id);if($fndiv.length===0){$fndiv=jQuery(document.createElement('div')).attr('id',popup_id).addClass('insitu-footnote JSpopup').attr('aria-hidden','true').on('mouseleave',function(){jQuery(this).hide().attr('aria-hidden','true');}).attr('role','tooltip');jQuery('.dokuwiki:first').append($fndiv);}$fndiv.show().position({my:'left top',at:'left center',of:target}).hide();return $fndiv;},footnoteDisplay:function(){var $content=jQuery(jQuery(this).attr('href')).parent().siblings('.content').clone();if(!$content.length){return;}jQuery('[id]',$content).each(function(){var id=jQuery(this).attr('id');jQuery(this).attr('id','insitu__'+id);});var content=$content.html().trim();dw_page.insituPopup(this,'insitu__fn').html(content).show().attr('aria-hidden','false');},makeToggle:function(handle,content,state){var $handle,$content,$clicky,$child,setClicky;$handle=jQuery(handle);if(!$handle.length)return;$content=jQuery(content);if(!$content.length)return;$child=$content.children();setClicky=function(hiding){if(hiding){$clicky.html('<span>+</span>');$handle.addClass('closed');$handle.removeClass('open');}else{$clicky.html('<span>−</span>');$handle.addClass('open');$handle.removeClass('closed');}};$handle[0].setState=function(state){var hidden;if(!state)state=1;$content.css('min-height',$content.height()).show();$child.stop(true,true);if(state===-1){hidden=false;}else if(state===1){hidden=true;}else{hidden=$child.is(':hidden');}setClicky(!hidden);$child.dw_toggle(hidden,function(){$content.toggle(hidden);$content.attr('aria-expanded',hidden);$content.css('min-height','');},true);};$clicky=jQuery(document.createElement('strong'));$handle.css('cursor','pointer').on('click',$handle[0].setState).prepend($clicky);$handle[0].setState(state);}};jQuery(dw_page.init);
/*!
 * Bootstrap v3.4.1 (https://getbootstrap.com/)
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||3<e[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(n){"use strict";n.fn.emulateTransitionEnd=function(t){var e=!1,i=this;n(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||n(i).trigger(n.support.transition.end)},t),this},n(function(){n.support.transition=function o(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(t.style[i]!==undefined)return{end:e[i]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(s){"use strict";var e='[data-dismiss="alert"]',a=function(t){s(t).on("click",e,this.close)};a.VERSION="3.4.1",a.TRANSITION_DURATION=150,a.prototype.close=function(t){var e=s(this),i=e.attr("data-target");i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),i="#"===i?[]:i;var o=s(document).find(i);function n(){o.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),o.length||(o=e.closest(".alert")),o.trigger(t=s.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),s.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(a.TRANSITION_DURATION):n())};var t=s.fn.alert;s.fn.alert=function o(i){return this.each(function(){var t=s(this),e=t.data("bs.alert");e||t.data("bs.alert",e=new a(this)),"string"==typeof i&&e[i].call(t)})},s.fn.alert.Constructor=a,s.fn.alert.noConflict=function(){return s.fn.alert=t,this},s(document).on("click.bs.alert.data-api",e,a.prototype.close)}(jQuery),function(s){"use strict";var n=function(t,e){this.$element=s(t),this.options=s.extend({},n.DEFAULTS,e),this.isLoading=!1};function i(o){return this.each(function(){var t=s(this),e=t.data("bs.button"),i="object"==typeof o&&o;e||t.data("bs.button",e=new n(this,i)),"toggle"==o?e.toggle():o&&e.setState(o)})}n.VERSION="3.4.1",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var e="disabled",i=this.$element,o=i.is("input")?"val":"html",n=i.data();t+="Text",null==n.resetText&&i.data("resetText",i[o]()),setTimeout(s.proxy(function(){i[o](null==n[t]?this.options[t]:n[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(e).attr(e,e).prop(e,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(e).removeAttr(e).prop(e,!1))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var t=s.fn.button;s.fn.button=i,s.fn.button.Constructor=n,s.fn.button.noConflict=function(){return s.fn.button=t,this},s(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var e=s(t.target).closest(".btn");i.call(e,"toggle"),s(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),e.is("input,button")?e.trigger("focus"):e.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){s(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(p){"use strict";var c=function(t,e){this.$element=p(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",p.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",p.proxy(this.pause,this)).on("mouseleave.bs.carousel",p.proxy(this.cycle,this))};function r(n){return this.each(function(){var t=p(this),e=t.data("bs.carousel"),i=p.extend({},c.DEFAULTS,t.data(),"object"==typeof n&&n),o="string"==typeof n?n:i.slide;e||t.data("bs.carousel",e=new c(this,i)),"number"==typeof n?e.to(n):o?e[o]():i.interval&&e.pause().cycle()})}c.VERSION="3.4.1",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},c.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(p.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},c.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var o=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(o)},c.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",this.$items.eq(t))},c.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&p.support.transition&&(this.$element.trigger(p.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),o=e||this.getItemForDirection(t,i),n=this.interval,s="next"==t?"left":"right",a=this;if(o.hasClass("active"))return this.sliding=!1;var r=o[0],l=p.Event("slide.bs.carousel",{relatedTarget:r,direction:s});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,n&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=p(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var d=p.Event("slid.bs.carousel",{relatedTarget:r,direction:s});return p.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),"object"==typeof o&&o.length&&o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(d)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),n&&this.cycle(),this}};var t=p.fn.carousel;p.fn.carousel=r,p.fn.carousel.Constructor=c,p.fn.carousel.noConflict=function(){return p.fn.carousel=t,this};var e=function(t){var e=p(this),i=e.attr("href");i&&(i=i.replace(/.*(?=#[^\s]+$)/,""));var o=e.attr("data-target")||i,n=p(document).find(o);if(n.hasClass("carousel")){var s=p.extend({},n.data(),e.data()),a=e.attr("data-slide-to");a&&(s.interval=!1),r.call(n,s),a&&n.data("bs.carousel").to(a),t.preventDefault()}};p(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),p(window).on("load",function(){p('[data-ride="carousel"]').each(function(){var t=p(this);r.call(t,t.data())})})}(jQuery),function(a){"use strict";var r=function(t,e){this.$element=a(t),this.options=a.extend({},r.DEFAULTS,e),this.$trigger=a('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(t){var e,i=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return a(document).find(i)}function l(o){return this.each(function(){var t=a(this),e=t.data("bs.collapse"),i=a.extend({},r.DEFAULTS,t.data(),"object"==typeof o&&o);!e&&i.toggle&&/show|hide/.test(o)&&(i.toggle=!1),e||t.data("bs.collapse",e=new r(this,i)),"string"==typeof o&&e[o]()})}r.VERSION="3.4.1",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(t=e.data("bs.collapse"))&&t.transitioning)){var i=a.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){e&&e.length&&(l.call(e,"hide"),t||e.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var n=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return n.call(this);var s=a.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",a.proxy(n,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][s])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=a.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!a.support.transition)return i.call(this);this.$element[e](0).one("bsTransitionEnd",a.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return a(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(t,e){var i=a(e);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var t=a.fn.collapse;a.fn.collapse=l,a.fn.collapse.Constructor=r,a.fn.collapse.noConflict=function(){return a.fn.collapse=t,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=a(this);e.attr("data-target")||t.preventDefault();var i=n(e),o=i.data("bs.collapse")?"toggle":e.data();l.call(i,o)})}(jQuery),function(a){"use strict";var r='[data-toggle="dropdown"]',o=function(t){a(t).on("click.bs.dropdown",this.toggle)};function l(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var i="#"!==e?a(document).find(e):null;return i&&i.length?i:t.parent()}function s(o){o&&3===o.which||(a(".dropdown-backdrop").remove(),a(r).each(function(){var t=a(this),e=l(t),i={relatedTarget:this};e.hasClass("open")&&(o&&"click"==o.type&&/input|textarea/i.test(o.target.tagName)&&a.contains(e[0],o.target)||(e.trigger(o=a.Event("hide.bs.dropdown",i)),o.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",i)))))}))}o.VERSION="3.4.1",o.prototype.toggle=function(t){var e=a(this);if(!e.is(".disabled, :disabled")){var i=l(e),o=i.hasClass("open");if(s(),!o){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",s);var n={relatedTarget:this};if(i.trigger(t=a.Event("show.bs.dropdown",n)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(a.Event("shown.bs.dropdown",n))}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=a(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var i=l(e),o=i.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&i.find(r).trigger("focus"),e.trigger("click");var n=i.find(".dropdown-menu li:not(.disabled):visible a");if(n.length){var s=n.index(t.target);38==t.which&&0<s&&s--,40==t.which&&s<n.length-1&&s++,~s||(s=0),n.eq(s).trigger("focus")}}}};var t=a.fn.dropdown;a.fn.dropdown=function e(i){return this.each(function(){var t=a(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new o(this)),"string"==typeof i&&e[i].call(t)})},a.fn.dropdown.Constructor=o,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=t,this},a(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),function(a){"use strict";var s=function(t,e){this.options=e,this.$body=a(document.body),this.$element=a(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function r(o,n){return this.each(function(){var t=a(this),e=t.data("bs.modal"),i=a.extend({},s.DEFAULTS,t.data(),"object"==typeof o&&o);e||t.data("bs.modal",e=new s(this,i)),"string"==typeof o?e[o](n):i.show&&e.show(n)})}s.VERSION="3.4.1",s.TRANSITION_DURATION=300,s.BACKDROP_TRANSITION_DURATION=150,s.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},s.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},s.prototype.show=function(i){var o=this,t=a.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(t){a(t.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var t=a.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),t&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:i});t?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(s.TRANSITION_DURATION):o.$element.trigger("focus").trigger(e)}))},s.prototype.hide=function(t){t&&t.preventDefault(),t=a.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(s.TRANSITION_DURATION):this.hideModal())},s.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},s.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},s.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},s.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},s.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},s.prototype.backdrop=function(t){var e=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=a.support.transition&&i;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var n=function(){e.removeBackdrop(),t&&t()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):n()}else t&&t()},s.prototype.handleUpdate=function(){this.adjustDialog()},s.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},s.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},s.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},s.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var n=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",t+n),a(this.fixedContent).each(function(t,e){var i=e.style.paddingRight,o=a(e).css("padding-right");a(e).data("padding-right",i).css("padding-right",parseFloat(o)+n+"px")}))},s.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),a(this.fixedContent).each(function(t,e){var i=a(e).data("padding-right");a(e).removeData("padding-right"),e.style.paddingRight=i||""})},s.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=a.fn.modal;a.fn.modal=r,a.fn.modal.Constructor=s,a.fn.modal.noConflict=function(){return a.fn.modal=t,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=a(this),i=e.attr("href"),o=e.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""),n=a(document).find(o),s=n.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(i)&&i},n.data(),e.data());e.is("a")&&t.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),r.call(n,s,this)})}(jQuery),function(g){"use strict";var o=["sanitize","whiteList","sanitizeFn"],a=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],t={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,l=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function u(t,e){var i=t.nodeName.toLowerCase();if(-1!==g.inArray(i,e))return-1===g.inArray(i,a)||Boolean(t.nodeValue.match(r)||t.nodeValue.match(l));for(var o=g(e).filter(function(t,e){return e instanceof RegExp}),n=0,s=o.length;n<s;n++)if(i.match(o[n]))return!0;return!1}function n(t,e,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);if(!document.implementation||!document.implementation.createHTMLDocument)return t;var o=document.implementation.createHTMLDocument("sanitization");o.body.innerHTML=t;for(var n=g.map(e,function(t,e){return e}),s=g(o.body).find("*"),a=0,r=s.length;a<r;a++){var l=s[a],h=l.nodeName.toLowerCase();if(-1!==g.inArray(h,n))for(var d=g.map(l.attributes,function(t){return t}),p=[].concat(e["*"]||[],e[h]||[]),c=0,f=d.length;c<f;c++)u(d[c],p)||l.removeAttribute(d[c].nodeName);else l.parentNode.removeChild(l)}return o.body.innerHTML}var m=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};m.VERSION="3.4.1",m.TRANSITION_DURATION=150,m.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:t},m.prototype.init=function(t,e,i){if(this.enabled=!0,this.type=t,this.$element=g(e),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&g(document).find(g.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),n=o.length;n--;){var s=o[n];if("click"==s)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",r="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},m.prototype.getDefaults=function(){return m.DEFAULTS},m.prototype.getOptions=function(t){var e=this.$element.data();for(var i in e)e.hasOwnProperty(i)&&-1!==g.inArray(i,o)&&delete e[i];return(t=g.extend({},this.getDefaults(),e,t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t.sanitize&&(t.template=n(t.template,t.whiteList,t.sanitizeFn)),t},m.prototype.getDelegateOptions=function(){var i={},o=this.getDefaults();return this._options&&g.each(this._options,function(t,e){o[t]!=e&&(i[t]=e)}),i},m.prototype.enter=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},m.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},m.prototype.leave=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}},m.prototype.show=function(){var t=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var i=this,o=this.tip(),n=this.getUID(this.type);this.setContent(),o.attr("id",n),this.$element.attr("aria-describedby",n),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,r=a.test(s);r&&(s=s.replace(a,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(g(document).find(this.options.container)):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),h=o[0].offsetWidth,d=o[0].offsetHeight;if(r){var p=s,c=this.getPosition(this.$viewport);s="bottom"==s&&l.bottom+d>c.bottom?"top":"top"==s&&l.top-d<c.top?"bottom":"right"==s&&l.right+h>c.width?"left":"left"==s&&l.left-h<c.left?"right":s,o.removeClass(p).addClass(s)}var f=this.getCalculatedOffset(s,l,h,d);this.applyPlacement(f,s);var u=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};g.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",u).emulateTransitionEnd(m.TRANSITION_DURATION):u()}},m.prototype.applyPlacement=function(t,e){var i=this.tip(),o=i[0].offsetWidth,n=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,g.offset.setOffset(i[0],g.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),i.addClass("in");var r=i[0].offsetWidth,l=i[0].offsetHeight;"top"==e&&l!=n&&(t.top=t.top+n-l);var h=this.getViewportAdjustedDelta(e,t,r,l);h.left?t.left+=h.left:t.top+=h.top;var d=/top|bottom/.test(e),p=d?2*h.left-o+r:2*h.top-n+l,c=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][c],d)},m.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},m.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=n(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},m.prototype.hide=function(t){var e=this,i=g(this.$tip),o=g.Event("hide.bs."+this.type);function n(){"in"!=e.hoverState&&i.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(o),!o.isDefaultPrevented())return i.removeClass("in"),g.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",n).emulateTransitionEnd(m.TRANSITION_DURATION):n(),this.hoverState=null,this},m.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},m.prototype.hasContent=function(){return this.getTitle()},m.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],i="BODY"==e.tagName,o=e.getBoundingClientRect();null==o.width&&(o=g.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var n=window.SVGElement&&e instanceof window.SVGElement,s=i?{top:0,left:0}:n?null:t.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},r=i?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},o,a,r,s)},m.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},m.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.right&&(n.left=a.left+a.width-d)}return n},m.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},m.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},m.prototype.tip=function(){if(!this.$tip&&(this.$tip=g(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},m.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},m.prototype.enable=function(){this.enabled=!0},m.prototype.disable=function(){this.enabled=!1},m.prototype.toggleEnabled=function(){this.enabled=!this.enabled},m.prototype.toggle=function(t){var e=this;t&&((e=g(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},m.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})},m.prototype.sanitizeHtml=function(t){return n(t,this.options.whiteList,this.options.sanitizeFn)};var e=g.fn.tooltip;g.fn.tooltip=function i(o){return this.each(function(){var t=g(this),e=t.data("bs.tooltip"),i="object"==typeof o&&o;!e&&/destroy|hide/.test(o)||(e||t.data("bs.tooltip",e=new m(this,i)),"string"==typeof o&&e[o]())})},g.fn.tooltip.Constructor=m,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=e,this}}(jQuery),function(n){"use strict";var s=function(t,e){this.init("popover",t,e)};if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");s.VERSION="3.4.1",s.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((s.prototype=n.extend({},n.fn.tooltip.Constructor.prototype)).constructor=s).prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();if(this.options.html){var o=typeof i;this.options.sanitize&&(e=this.sanitizeHtml(e),"string"===o&&(i=this.sanitizeHtml(i))),t.find(".popover-title").html(e),t.find(".popover-content").children().detach().end()["string"===o?"html":"append"](i)}else t.find(".popover-title").text(e),t.find(".popover-content").children().detach().end().text(i);t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},s.prototype.hasContent=function(){return this.getTitle()||this.getContent()},s.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var t=n.fn.popover;n.fn.popover=function e(o){return this.each(function(){var t=n(this),e=t.data("bs.popover"),i="object"==typeof o&&o;!e&&/destroy|hide/.test(o)||(e||t.data("bs.popover",e=new s(this,i)),"string"==typeof o&&e[o]())})},n.fn.popover.Constructor=s,n.fn.popover.noConflict=function(){return n.fn.popover=t,this}}(jQuery),function(s){"use strict";function n(t,e){this.$body=s(document.body),this.$scrollElement=s(t).is(document.body)?s(window):s(t),this.options=s.extend({},n.DEFAULTS,e),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s.proxy(this.process,this)),this.refresh(),this.process()}function e(o){return this.each(function(){var t=s(this),e=t.data("bs.scrollspy"),i="object"==typeof o&&o;e||t.data("bs.scrollspy",e=new n(this,i)),"string"==typeof o&&e[o]()})}n.VERSION="3.4.1",n.DEFAULTS={offset:10},n.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},n.prototype.refresh=function(){var t=this,o="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),s.isWindow(this.$scrollElement[0])||(o="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=s(this),e=t.data("target")||t.attr("href"),i=/^#./.test(e)&&s(e);return i&&i.length&&i.is(":visible")&&[[i[o]().top+n,e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},n.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),o<=e)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<n[0])return this.activeTarget=null,this.clear();for(t=n.length;t--;)a!=s[t]&&e>=n[t]&&(n[t+1]===undefined||e<n[t+1])&&this.activate(s[t])},n.prototype.activate=function(t){this.activeTarget=t,this.clear();var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=s(e).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},n.prototype.clear=function(){s(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var t=s.fn.scrollspy;s.fn.scrollspy=e,s.fn.scrollspy.Constructor=n,s.fn.scrollspy.noConflict=function(){return s.fn.scrollspy=t,this},s(window).on("load.bs.scrollspy.data-api",function(){s('[data-spy="scroll"]').each(function(){var t=s(this);e.call(t,t.data())})})}(jQuery),function(r){"use strict";var a=function(t){this.element=r(t)};function e(i){return this.each(function(){var t=r(this),e=t.data("bs.tab");e||t.data("bs.tab",e=new a(this)),"string"==typeof i&&e[i]()})}a.VERSION="3.4.1",a.TRANSITION_DURATION=150,a.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=e.find(".active:last a"),n=r.Event("hide.bs.tab",{relatedTarget:t[0]}),s=r.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(n),t.trigger(s),!s.isDefaultPrevented()&&!n.isDefaultPrevented()){var a=r(document).find(i);this.activate(t.closest("li"),e),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},a.prototype.activate=function(t,e,i){var o=e.find("> .active"),n=i&&r.support.transition&&(o.length&&o.hasClass("fade")||!!e.find("> .fade").length);function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),n?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}o.length&&n?o.one("bsTransitionEnd",s).emulateTransitionEnd(a.TRANSITION_DURATION):s(),o.removeClass("in")};var t=r.fn.tab;r.fn.tab=e,r.fn.tab.Constructor=a,r.fn.tab.noConflict=function(){return r.fn.tab=t,this};var i=function(t){t.preventDefault(),e.call(r(this),"show")};r(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(l){"use strict";var h=function(t,e){this.options=l.extend({},h.DEFAULTS,e);var i=this.options.target===h.DEFAULTS.target?l(this.options.target):l(document).find(this.options.target);this.$target=i.on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function i(o){return this.each(function(){var t=l(this),e=t.data("bs.affix"),i="object"==typeof o&&o;e||t.data("bs.affix",e=new h(this,i)),"string"==typeof o&&e[o]()})}h.VERSION="3.4.1",h.RESET="affix affix-top affix-bottom",h.DEFAULTS={offset:0,target:window},h.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return n<i&&"top";if("bottom"==this.affixed)return null!=i?!(n+this.unpin<=s.top)&&"bottom":!(n+a<=t-o)&&"bottom";var r=null==this.affixed,l=r?n:s.top;return null!=i&&n<=i?"top":null!=o&&t-o<=l+(r?a:e)&&"bottom"},h.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(h.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},h.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},h.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,i=e.top,o=e.bottom,n=Math.max(l(document).height(),l(document.body).height());"object"!=typeof e&&(o=i=e),"function"==typeof i&&(i=e.top(this.$element)),"function"==typeof o&&(o=e.bottom(this.$element));var s=this.getState(n,t,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var a="affix"+(s?"-"+s:""),r=l.Event(a+".bs.affix");if(this.$element.trigger(r),r.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(h.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:n-t-o})}};var t=l.fn.affix;l.fn.affix=i,l.fn.affix.Constructor=h,l.fn.affix.noConflict=function(){return l.fn.affix=t,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var t=l(this),e=t.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),i.call(t,e)})})}(jQuery);

/**
 * AnchorJS - v3.2.0 - 2016-06-10
 * https://github.com/bryanbraun/anchorjs
 * Copyright (c) 2016 Bryan Braun; Licensed MIT
 */
"use strict";!function(A,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():(A.AnchorJS=e(),A.anchors=new A.AnchorJS)}(this,function(){function A(A){function e(A){A.icon=A.hasOwnProperty("icon")?A.icon:"",A.visible=A.hasOwnProperty("visible")?A.visible:"hover",A.placement=A.hasOwnProperty("placement")?A.placement:"right",A.class=A.hasOwnProperty("class")?A.class:"",A.truncate=A.hasOwnProperty("truncate")?Math.floor(A.truncate):64}function t(A){var e;if("string"==typeof A||A instanceof String)e=[].slice.call(document.querySelectorAll(A));else{if(!(Array.isArray(A)||A instanceof NodeList))throw new Error("The selector provided to AnchorJS was invalid.");e=[].slice.call(A)}return e}function n(){if(null===document.head.querySelector("style.anchorjs")){var A,e=document.createElement("style"),t=" .anchorjs-link {   opacity: 0;   text-decoration: none;   -webkit-font-smoothing: antialiased;   -moz-osx-font-smoothing: grayscale; }",n=" *:hover > .anchorjs-link, .anchorjs-link:focus  {   opacity: 1; }",o=' @font-face {   font-family: "anchorjs-icons";   font-style: normal;   font-weight: normal;   src: url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBTUAAAC8AAAAYGNtYXAWi9QdAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5Zgq29TcAAAF4AAABNGhlYWQEZM3pAAACrAAAADZoaGVhBhUDxgAAAuQAAAAkaG10eASAADEAAAMIAAAAFGxvY2EAKACuAAADHAAAAAxtYXhwAAgAVwAAAygAAAAgbmFtZQ5yJ3cAAANIAAAB2nBvc3QAAwAAAAAFJAAAACAAAwJAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpywPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6cv//f//AAAAAAAg6cv//f//AAH/4xY5AAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAACADEARAJTAsAAKwBUAAABIiYnJjQ/AT4BMzIWFxYUDwEGIicmND8BNjQnLgEjIgYPAQYUFxYUBw4BIwciJicmND8BNjIXFhQPAQYUFx4BMzI2PwE2NCcmNDc2MhcWFA8BDgEjARQGDAUtLXoWOR8fORYtLTgKGwoKCjgaGg0gEhIgDXoaGgkJBQwHdR85Fi0tOAobCgoKOBoaDSASEiANehoaCQkKGwotLXoWOR8BMwUFLYEuehYXFxYugC44CQkKGwo4GkoaDQ0NDXoaShoKGwoFBe8XFi6ALjgJCQobCjgaShoNDQ0NehpKGgobCgoKLYEuehYXAAEAAAABAACiToc1Xw889QALBAAAAAAA0XnFFgAAAADRecUWAAAAAAJTAsAAAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAAAlMAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAACAAAAAoAAMQAAAAAACgAUAB4AmgABAAAABQBVAAIAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEADgAAAAEAAAAAAAIABwCfAAEAAAAAAAMADgBLAAEAAAAAAAQADgC0AAEAAAAAAAUACwAqAAEAAAAAAAYADgB1AAEAAAAAAAoAGgDeAAMAAQQJAAEAHAAOAAMAAQQJAAIADgCmAAMAAQQJAAMAHABZAAMAAQQJAAQAHADCAAMAAQQJAAUAFgA1AAMAAQQJAAYAHACDAAMAAQQJAAoANAD4YW5jaG9yanMtaWNvbnMAYQBuAGMAaABvAHIAagBzAC0AaQBjAG8AbgBzVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwYW5jaG9yanMtaWNvbnMAYQBuAGMAaABvAHIAagBzAC0AaQBjAG8AbgBzYW5jaG9yanMtaWNvbnMAYQBuAGMAaABvAHIAagBzAC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQByYW5jaG9yanMtaWNvbnMAYQBuAGMAaABvAHIAagBzAC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format("truetype"); }',i=" [data-anchorjs-icon]::after {   content: attr(data-anchorjs-icon); }";e.className="anchorjs",e.appendChild(document.createTextNode("")),A=document.head.querySelector('[rel="stylesheet"], style'),void 0===A?document.head.appendChild(e):document.head.insertBefore(e,A),e.sheet.insertRule(t,e.sheet.cssRules.length),e.sheet.insertRule(n,e.sheet.cssRules.length),e.sheet.insertRule(i,e.sheet.cssRules.length),e.sheet.insertRule(o,e.sheet.cssRules.length)}}this.options=A||{},this.elements=[],e(this.options),this.isTouchDevice=function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},this.add=function(A){var o,i,s,a,r,c,l,h,u,g,B,f,d=[];if(e(this.options),f=this.options.visible,"touch"===f&&(f=this.isTouchDevice()?"always":"hover"),A||(A="h1, h2, h3, h4, h5, h6"),o=t(A),0===o.length)return!1;for(n(),i=document.querySelectorAll("[id]"),s=[].map.call(i,function(A){return A.id}),r=0;r<o.length;r++)if(this.hasAnchorJSLink(o[r]))d.push(r);else{if(o[r].hasAttribute("id"))a=o[r].getAttribute("id");else{h=this.urlify(o[r].textContent),u=h,l=0;do void 0!==c&&(u=h+"-"+l),c=s.indexOf(u),l+=1;while(-1!==c);c=void 0,s.push(u),o[r].setAttribute("id",u),a=u}g=a.replace(/-/g," "),B=document.createElement("a"),B.className="anchorjs-link "+this.options.class,B.href="#"+a,B.setAttribute("aria-label","Anchor link for: "+g),B.setAttribute("data-anchorjs-icon",this.options.icon),"always"===f&&(B.style.opacity="1"),""===this.options.icon&&(B.style.fontFamily="anchorjs-icons",B.style.fontStyle="normal",B.style.fontVariant="normal",B.style.fontWeight="normal",B.style.lineHeight=1,"left"===this.options.placement&&(B.style.lineHeight="inherit")),"left"===this.options.placement?(B.style.position="absolute",B.style.marginLeft="-1em",B.style.paddingRight="0.5em",o[r].insertBefore(B,o[r].firstChild)):(B.style.paddingLeft="0.375em",o[r].appendChild(B))}for(r=0;r<d.length;r++)o.splice(d[r]-r,1);return this.elements=this.elements.concat(o),this},this.remove=function(A){for(var e,n,o=t(A),i=0;i<o.length;i++)n=o[i].querySelector(".anchorjs-link"),n&&(e=this.elements.indexOf(o[i]),-1!==e&&this.elements.splice(e,1),o[i].removeChild(n));return this},this.removeAll=function(){this.remove(this.elements)},this.urlify=function(A){var t,n=/[& +$,:;=?@"#{}|^~[`%!'\]\.\/\(\)\*\\]/g;return this.options.truncate||e(this.options),t=A.trim().replace(/\'/gi,"").replace(n,"-").replace(/-{2,}/g,"-").substring(0,this.options.truncate).replace(/^-+|-+$/gm,"").toLowerCase()},this.hasAnchorJSLink=function(A){var e=A.firstChild&&(" "+A.firstChild.className+" ").indexOf(" anchorjs-link ")>-1,t=A.lastChild&&(" "+A.lastChild.className+" ").indexOf(" anchorjs-link ")>-1;return e||t||!1}}return A});

(function(a,b){if(typeof module!=="undefined"&&module.exports){module.exports=b(require("jquery"))}else{if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return b(c)})}else{b(a.jQuery)}}}(this,function(b){var c=function(e,d){this.$element=b(e);this.options=b.extend({},c.defaults,d);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.select=this.options.select||this.select;this.autoSelect=typeof this.options.autoSelect=="boolean"?this.options.autoSelect:true;this.highlighter=this.options.highlighter||this.highlighter;this.render=this.options.render||this.render;this.updater=this.options.updater||this.updater;this.displayText=this.options.displayText||this.displayText;this.itemLink=this.options.itemLink||this.itemLink;this.itemTitle=this.options.itemTitle||this.itemTitle;this.followLinkOnSelect=this.options.followLinkOnSelect||this.followLinkOnSelect;this.source=this.options.source;this.delay=this.options.delay;this.theme=this.options.theme&&this.options.themes&&this.options.themes[this.options.theme]||c.defaults.themes[c.defaults.theme];this.$menu=b(this.options.menu||this.theme.menu);this.$appendTo=this.options.appendTo?b(this.options.appendTo):null;this.fitToElement=typeof this.options.fitToElement=="boolean"?this.options.fitToElement:false;this.shown=false;this.listen();this.showHintOnFocus=typeof this.options.showHintOnFocus=="boolean"||this.options.showHintOnFocus==="all"?this.options.showHintOnFocus:false;this.afterSelect=this.options.afterSelect;this.afterEmptySelect=this.options.afterEmptySelect;this.addItem=false;this.value=this.$element.val()||this.$element.text();this.keyPressed=false;this.focused=this.$element.is(":focus");this.changeInputOnSelect=this.options.changeInputOnSelect||this.changeInputOnSelect;this.changeInputOnMove=this.options.changeInputOnMove||this.changeInputOnMove;this.openLinkInNewTab=this.options.openLinkInNewTab||this.openLinkInNewTab;this.selectOnBlur=this.options.selectOnBlur||this.selectOnBlur;this.showCategoryHeader=this.options.showCategoryHeader||this.showCategoryHeader};c.prototype={constructor:c,setDefault:function(e){this.$element.data("active",e);if(this.autoSelect||e){var d=this.updater(e);if(!d){d=""}this.$element.val(this.displayText(d)||d).text(this.displayText(d)||d).change();this.afterSelect(d)}return this.hide()},select:function(){var e=this.$menu.find(".active").data("value");this.$element.data("active",e);if(this.autoSelect||e){var d=this.updater(e);if(!d){d=""}if(this.changeInputOnSelect){this.$element.val(this.displayText(d)||d).text(this.displayText(d)||d).change()}if(this.followLinkOnSelect&&this.itemLink(e)){if(this.openLinkInNewTab){window.open(this.itemLink(e),"_blank")}else{document.location=this.itemLink(e)}this.afterSelect(d)}else{if(this.followLinkOnSelect&&!this.itemLink(e)){this.afterEmptySelect(d)}else{this.afterSelect(d)}}}else{this.afterEmptySelect()}return this.hide()},updater:function(d){return d},setSource:function(d){this.source=d},show:function(){var k=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});var h=typeof this.options.scrollHeight=="function"?this.options.scrollHeight.call():this.options.scrollHeight;var g;if(this.shown){g=this.$menu}else{if(this.$appendTo){g=this.$menu.appendTo(this.$appendTo);this.hasSameParent=this.$appendTo.is(this.$element.parent())}else{g=this.$menu.insertAfter(this.$element);this.hasSameParent=true}}if(!this.hasSameParent){g.css("position","fixed");var j=this.$element.offset();k.top=j.top;k.left=j.left}var e=b(g).parent().hasClass("dropup");var d=e?"auto":(k.top+k.height+h);var f=b(g).hasClass("dropdown-menu-right");var i=f?"auto":k.left;g.css({top:d,left:i}).show();if(this.options.fitToElement===true){g.css("width",this.$element.outerWidth()+"px")}this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(d){if(typeof(d)!="undefined"&&d!==null){this.query=d}else{this.query=this.$element.val()}if(this.query.length<this.options.minLength&&!this.options.showHintOnFocus){return this.shown?this.hide():this}var e=b.proxy(function(){if(b.isFunction(this.source)&&this.source.length===3){this.source(this.query,b.proxy(this.process,this),b.proxy(this.process,this))}else{if(b.isFunction(this.source)){this.source(this.query,b.proxy(this.process,this))}else{if(this.source){this.process(this.source)}}}},this);clearTimeout(this.lookupWorker);this.lookupWorker=setTimeout(e,this.delay)},process:function(d){var e=this;d=b.grep(d,function(f){return e.matcher(f)});d=this.sorter(d);if(!d.length&&!this.options.addItem){return this.shown?this.hide():this}if(d.length>0){this.$element.data("active",d[0])}else{this.$element.data("active",null)}if(this.options.items!="all"){d=d.slice(0,this.options.items)}if(this.options.addItem){d.push(this.options.addItem)}return this.render(d).show()},matcher:function(e){var d=this.displayText(e);return ~d.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(f){var g=[];var e=[];var d=[];var i;while((i=f.shift())){var h=this.displayText(i);if(!h.toLowerCase().indexOf(this.query.toLowerCase())){g.push(i)}else{if(~h.indexOf(this.query)){e.push(i)}else{d.push(i)}}}return g.concat(e,d)},highlighter:function(h){var l=this.query;if(l===""){return h}var j=h.match(/(>)([^<]*)(<)/g);var k=[];var e=[];var f;if(j&&j.length){for(f=0;f<j.length;++f){if(j[f].length>2){k.push(j[f])}}}else{k=[];k.push(h)}l=l.replace((/[\(\)\/\.\*\+\?\[\]]/g),function(i){return"\\"+i});var g=new RegExp(l,"g");var d;for(f=0;f<k.length;++f){d=k[f].match(g);if(d&&d.length>0){e.push(k[f])}}for(f=0;f<e.length;++f){h=h.replace(e[f],e[f].replace(g,"<strong>$&</strong>"))}return h},render:function(e){var g=this;var d=this;var f=false;var i=[];var h=g.options.separator;b.each(e,function(j,k){if(j>0&&k[h]!==e[j-1][h]){i.push({__type:"divider"})}if(g.options.showCategoryHeader){if(k[h]&&(j===0||k[h]!==e[j-1][h])){i.push({__type:"category",name:k[h]})}}i.push(k)});e=b(i).map(function(j,k){if((k.__type||false)=="category"){return b(g.options.headerHtml||g.theme.headerHtml).text(k.name)[0]}if((k.__type||false)=="divider"){return b(g.options.headerDivider||g.theme.headerDivider)[0]}var l=d.displayText(k);j=b(g.options.item||g.theme.item).data("value",k);j.find(g.options.itemContentSelector||g.theme.itemContentSelector).addBack(g.options.itemContentSelector||g.theme.itemContentSelector).html(g.highlighter(l,k));if(g.options.followLinkOnSelect){j.find("a").attr("href",d.itemLink(k))}j.find("a").attr("title",d.itemTitle(k));if(l==d.$element.val()){j.addClass("active");d.$element.data("active",k);f=true}return j[0]});if(this.autoSelect&&!f){e.filter(":not(.dropdown-header)").first().addClass("active");this.$element.data("active",e.first().data("value"))}this.$menu.html(e);return this},displayText:function(d){return typeof d!=="undefined"&&typeof d.name!="undefined"?d.name:d},itemLink:function(d){return null},itemTitle:function(d){return null},next:function(f){var g=this.$menu.find(".active").removeClass("active");var e=g.next();if(!e.length){e=b(this.$menu.find(b(this.options.item||this.theme.item).prop("tagName"))[0])}while(e.hasClass("divider")||e.hasClass("dropdown-header")){e=e.next()}e.addClass("active");var d=this.updater(e.data("value"));if(this.changeInputOnMove){this.$element.val(this.displayText(d)||d)}},prev:function(f){var g=this.$menu.find(".active").removeClass("active");var e=g.prev();if(!e.length){e=this.$menu.find(b(this.options.item||this.theme.item).prop("tagName")).last()}while(e.hasClass("divider")||e.hasClass("dropdown-header")){e=e.prev()}e.addClass("active");var d=this.updater(e.data("value"));if(this.changeInputOnMove){this.$element.val(this.displayText(d)||d)}},listen:function(){this.$element.on("focus.bootstrap3Typeahead",b.proxy(this.focus,this)).on("blur.bootstrap3Typeahead",b.proxy(this.blur,this)).on("keypress.bootstrap3Typeahead",b.proxy(this.keypress,this)).on("propertychange.bootstrap3Typeahead input.bootstrap3Typeahead",b.proxy(this.input,this)).on("keyup.bootstrap3Typeahead",b.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown.bootstrap3Typeahead",b.proxy(this.keydown,this))}var d=b(this.options.item||this.theme.item).prop("tagName");if("ontouchstart" in document.documentElement&&"onmousemove" in document.documentElement){this.$menu.on("touchstart",d,b.proxy(this.touchstart,this)).on("touchend",d,b.proxy(this.click,this)).on("click",b.proxy(this.click,this)).on("mouseenter",d,b.proxy(this.mouseenter,this)).on("mouseleave",d,b.proxy(this.mouseleave,this)).on("mousedown",b.proxy(this.mousedown,this))}else{if("ontouchstart" in document.documentElement){this.$menu.on("touchstart",d,b.proxy(this.touchstart,this)).on("touchend",d,b.proxy(this.click,this))}else{this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter",d,b.proxy(this.mouseenter,this)).on("mouseleave",d,b.proxy(this.mouseleave,this)).on("mousedown",b.proxy(this.mousedown,this))}}},destroy:function(){this.$element.data("typeahead",null);this.$element.data("active",null);this.$element.unbind("focus.bootstrap3Typeahead").unbind("blur.bootstrap3Typeahead").unbind("keypress.bootstrap3Typeahead").unbind("propertychange.bootstrap3Typeahead input.bootstrap3Typeahead").unbind("keyup.bootstrap3Typeahead");if(this.eventSupported("keydown")){this.$element.unbind("keydown.bootstrap3-typeahead")}this.$menu.remove();this.destroyed=true},eventSupported:function(d){var e=d in this.$element;if(!e){this.$element.setAttribute(d,"return;");e=typeof this.$element[d]==="function"}return e},move:function(d){if(!this.shown){return}switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:if(d.shiftKey){return}d.preventDefault();this.prev();break;case 40:if(d.shiftKey){return}d.preventDefault();this.next();break}},keydown:function(d){if(d.keyCode===17){return}this.keyPressed=true;this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]);if(!this.shown&&d.keyCode==40){this.lookup()}else{this.move(d)}},keypress:function(d){if(this.suppressKeyPressRepeat){return}this.move(d)},input:function(f){var d=this.$element.val()||this.$element.text();if(this.value!==d){this.value=d;this.lookup()}},keyup:function(d){if(this.destroyed){return}switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:if(!this.shown||(this.showHintOnFocus&&!this.keyPressed)){return}this.select();break;case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break}},focus:function(d){if(!this.focused){this.focused=true;this.keyPressed=false;if(this.options.showHintOnFocus&&this.skipShowHintOnFocus!==true){if(this.options.showHintOnFocus==="all"){this.lookup("")}else{this.lookup()}}}if(this.skipShowHintOnFocus){this.skipShowHintOnFocus=false}},blur:function(d){if(!this.mousedover&&!this.mouseddown&&this.shown){if(this.selectOnBlur){this.select()}this.hide();this.focused=false;this.keyPressed=false}else{if(this.mouseddown){this.skipShowHintOnFocus=true;this.$element.focus();this.mouseddown=false}}},click:function(d){d.preventDefault();this.skipShowHintOnFocus=true;this.select();this.$element.focus();this.hide()},mouseenter:function(d){this.mousedover=true;this.$menu.find(".active").removeClass("active");b(d.currentTarget).addClass("active")},mouseleave:function(d){this.mousedover=false;if(!this.focused&&this.shown){this.hide()}},mousedown:function(d){this.mouseddown=true;this.$menu.one("mouseup",function(f){this.mouseddown=false}.bind(this))},touchstart:function(d){d.preventDefault();this.$menu.find(".active").removeClass("active");b(d.currentTarget).addClass("active")},touchend:function(d){d.preventDefault();this.select();this.$element.focus()}};var a=b.fn.typeahead;b.fn.typeahead=function(e){var d=arguments;if(typeof e=="string"&&e=="getActive"){return this.data("active")}return this.each(function(){var h=b(this);var g=h.data("typeahead");var f=typeof e=="object"&&e;if(!g){h.data("typeahead",(g=new c(this,f)))}if(typeof e=="string"&&g[e]){if(d.length>1){g[e].apply(g,Array.prototype.slice.call(d,1))}else{g[e]()}}})};c.defaults={source:[],items:8,minLength:1,scrollHeight:0,autoSelect:true,afterSelect:b.noop,afterEmptySelect:b.noop,addItem:false,followLinkOnSelect:false,delay:0,separator:"category",changeInputOnSelect:true,changeInputOnMove:true,openLinkInNewTab:false,selectOnBlur:true,showCategoryHeader:true,theme:"bootstrap3",themes:{bootstrap3:{menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',itemContentSelector:"a",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},bootstrap4:{menu:'<div class="typeahead dropdown-menu" role="listbox"></div>',item:'<button class="dropdown-item" role="option"></button>',itemContentSelector:".dropdown-item",headerHtml:'<h6 class="dropdown-header"></h6>',headerDivider:'<div class="dropdown-divider"></div>'}}};b.fn.typeahead.Constructor=c;b.fn.typeahead.noConflict=function(){b.fn.typeahead=a;return this};b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(f){var d=b(this);if(d.data("typeahead")){return}d.typeahead(d.data())})}));

/**
 * (c) Vjacheslav Trushkin <cyberalien@gmail.com>
 *
 * For the full copyright and license information, please view the license.txt or license.gpl.txt
 * files at https://github.com/iconify/iconify
 *
 * Licensed under Apache 2.0 or GPL 2.0 at your option.
 * If derivative product is not compatible with one of licenses, you can pick one of licenses.
 *
 * @license Apache 2.0
 * @license GPL 2.0
 */
"use strict";if(void 0===self.Iconify&&(self.Iconify={isReady:!1},self.SimpleSVG=self.Iconify,function(e,t){var i,n,o,r,s,a,c,l,u,d,f,h,p,v,g,b,m,y,w,_,x,O,A,j,I,E,k,C,M,L,S,N,P,T,F,R,D,H,V,G,Q,z,B,q,Y,J,U,W,$,K,X,Z,ee,te,ie,ne,oe,re={config:{},version:"1.0.6"};function se(e,t){var i;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(i=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}function ae(){document.removeEventListener("DOMContentLoaded",ae),window.removeEventListener("load",ae),o.DOMReadyCallback()}function ce(t,i,e){var n=t;if("_"!==t.slice(0,1)){if(void 0===u[t]){if(!e||void 0===u["_"+t])return;n="_"+t}switch(n){case"API":case"SVGAttributes":Object.keys(i).forEach(function(e){null===i[t]?delete u[n][e]:u[n][e]=i[e]});break;default:u[n]=i}}}function le(e,t){return function(e,t){switch(e){case"rotate":return t=parseInt(t),isNaN(t)?null:t;case"width":case"height":case"inlineHeight":case"inlineTop":case"verticalAlign":return t=parseFloat(t),isNaN(t)?null:t;case"vFlip":case"hFlip":return!!t;case"body":case"parent":return"string"==typeof t?t:null}return t}("rotate",e+t)}function ue(e,t){return!!e!=!!t}function de(e){var i=Object.create(null);return(void 0===e._defaults?[e,v]:[e,e._defaults,v]).forEach(function(t){Object.keys(t).forEach(function(e){"object"!=typeof t[e]&&void 0===i[e]&&(i[e]=t[e])})}),void 0===i.inlineTop&&(i.inlineTop=i.top),void 0===i.inlineHeight&&(i.inlineHeight=i.height),void 0===i.verticalAlign&&(i.height%7==0&&i.height%8!=0?i.verticalAlign=-.143:i.verticalAlign=-.125),i}function fe(){return this._icons=Object.create(null),this._aliases=Object.create(null),this._resolved=Object.create(null),this._add=function(e,t,i){var n=e?"_aliases":"_icons";void 0===this._resolved[t.prefix]?(this._resolved[t.prefix]=Object.create(null),this._icons[t.prefix]=Object.create(null),this._aliases[t.prefix]=Object.create(null)):(delete this._icons[t.prefix][t.icon],delete this._aliases[t.prefix][t.icon]),this._resolved[t.prefix][t.icon]=!1,this[n][t.prefix][t.icon]=i},this._resolveIcon=function(e){var t,i,n,o,r,s;if(void 0===this._resolved[e.prefix]||void 0===this._resolved[e.prefix][e.icon])return null;if(!1!==this._resolved[e.prefix][e.icon])return this._resolved[e.prefix][e.icon];if(void 0!==this._icons[e.prefix][e.icon])return this._resolved[e.prefix][e.icon]=de(this._icons[e.prefix][e.icon]);for(i=0,t=this._aliases[e.prefix][e.icon],n=Object.create(null),Object.keys(t).forEach(function(e){"parent"!==e&&(n[e]=t[e])}),o=t.parent;;){if(5<++i||void 0===this._resolved[e.prefix][o])return this._resolved[e.prefix][e.icon]=null;if(r=void 0===this._icons[e.prefix][o],s=this[r?"_aliases":"_icons"][e.prefix][o],Object.keys(s).forEach(function(e){if(void 0!==n[e])switch(e){case"rotate":n[e]=le(n[e],s[e]);break;case"hFlip":case"vFlip":n[e]=ue(n[e],s[e])}else"parent"!==e&&(n[e]=s[e])}),!r)break;o=s.parent}return this._resolved[e.prefix][e.icon]=de(n)},this.addCollection=function(n){var o=this,r=Object.create(null);g.forEach(function(e){void 0!==n[e]?r[e]=n[e]:void 0!==v[e]&&(r[e]=v[e])}),void 0!==n.icons&&Object.keys(n.icons).forEach(function(e){var t=p(e,n.prefix),i=n.icons[e];void 0!==i.body&&(i._defaults=r,o._add(!1,t,i))}),void 0!==n.aliases&&Object.keys(n.aliases).forEach(function(e){var t=p(e,n.prefix),i=n.aliases[e];if(void 0!==i.parent){if(void 0===n.prefix){if(i.parent.slice(0,t.prefix.length)!==t.prefix)return;i.parent=i.parent.slice(t.prefix.length+1)}o._add(!0,t,i)}})},this.addIcon=function(e,t,i){var n=void 0!==t.parent,o=p(e,i);if(n&&void 0===i){if(t.parent.slice(0,o.prefix.length)!==o.prefix)return;t.parent=t.parent.slice(o.prefix.length+1)}this._add(n,o,t)},this.exists=function(e,t){var i=p(e,t);return void 0!==this._resolved[i.prefix]&&void 0!==this._resolved[i.prefix][i.icon]},this.getIcon=function(e,t){var i=p(e,t);return this._resolveIcon(i)},this.copyIcon=function(e,t){var i,n=this.getIcon(e,t);return null===n?null:(i=Object.create(null),Object.keys(n).forEach(function(e){i[e]=n[e]}),i)},this.list=function(e){var i,n;return void 0!==e?void 0===this._resolved[e]?[]:Object.keys(this._resolved[e]):(i=[],n=this._resolved,Object.keys(n).forEach(function(t){i=i.concat(Object.keys(n[t]).map(function(e){return""===t&&-1===e.indexOf("-")?e:t+":"+e}))}),i)},this}function he(){w&&(w=!1,m.scanDOM())}function pe(e,t,i){var n,o,r,s,a;if(1===t)return e;if(i=void 0===i?100:i,"number"==typeof e)return Math.ceil(e*t*i)/i;if("string"!=typeof e)return e;if(null===(n=e.split(A))||!n.length)return e;for(o=[],r=n.shift(),s=j.test(r);;){if(s?(a=parseFloat(r),isNaN(a)?o.push(r):o.push(Math.ceil(a*t*i)/i)):o.push(r),void 0===(r=n.shift()))return o.join("");s=!s}}function ve(e,t,i){var n,o,r;for(n=0;n<t.length;n++)if(void 0!==e[o=t[n]])switch(typeof(r=e[o])){case"boolean":return r;case"number":return!!r;case"string":switch(r.toLowerCase()){case"1":case"true":case o:return!0;case"0":case"false":case"":return!1}}return i}function ge(e,t,i){var n,o;for(n=0;n<t.length;n++)if(void 0!==e[o=t[n]])return e[o];return i}function be(){var s=N.loaderMaxURLSize,o=Object.create(null);function a(e,t){var i,n=o[e];"function"!=typeof n?(n=n.replace("{icons}",t.join(",")),(i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",n),i.setAttribute("async",!0),document.head.appendChild(i)):n.call(L,e,t)}function c(e){var t=void 0===N.API[e]?N.defaultAPI:N.API[e];return"function"==typeof t?(o[e]=t,!1):-1===t.indexOf("{icons}")?(o[e]=t,null):(t=t.replace("{prefix}",e).replace("{callback}","Iconify._loaderCallback"),(o[e]=t).replace("{icons}","").length)}Object.keys(T).forEach(function(i){var n=c(i),o=!1===n,r=[];if(null===n)return a(i,[]),void(F[i]=!0);T[i].forEach(function(e,t){o||(n+=e.length+1,s<=n&&(a(i,r),r=[],n=c(i)+e.length+1)),r.push(e)}),r.length&&a(i,r),F[i]=void 0===F[i]?T[i]:F[i].concat(T[i]),delete T[i]}),D=!1}function me(e,t,i){return i||S.domready||N.loadBeforeDOMReady?(void 0===T[e]||-1===T[e].indexOf(t))&&(void 0===F[e]||!0!==F[e]&&-1===F[e].indexOf(t))&&(void 0===T[e]&&(T[e]=[]),T[e].push(t),D||(D=!0,window.setTimeout(be,0)),1):(o=t,void 0===R[n=e]&&(R[n]=Object.create(null)),R[n][o]=!0,void 0===S._loaderDOMReady&&(S._loaderDOMReady=S.DOMReadyCallback,S.DOMReadyCallback=function(){S._loaderDOMReady(),Object.keys(R).forEach(function(t){Object.keys(R[t]).forEach(function(e){L.iconExists(e,t)||me(t,e,!0)})})}),1);var n,o}function ye(){var e;!1!==U&&U.length?(e=U,U=!1,Q.scanDOM(e)):U=!1}function we(e){e.forEach(function(e){var t;if(!1===U&&(U=[],window.setTimeout(ye,0)),e.addedNodes)for(t=0;t<e.addedNodes.length;t++)U.push(e.addedNodes[t])})}function _e(){q.observe(void 0===z._root?document.querySelector("body"):z._root,W)}function xe(e,t){var i;return"<?"===e.slice(0,2)&&(i=e.indexOf(">"),e=e.slice(i+1)),e=-1!==(i=(e=e.replace("viewbox=","viewBox=").replace("preserveaspectratio=","preserveAspectRatio=")).indexOf("</"))?e.replace("</",t+"</"):e.replace("/>",">"+t+"</svg>")}i=re,"function"!=typeof window.CustomEvent&&(se.prototype=window.Event.prototype,window.CustomEvent=se),i.event=function(e,t){document.dispatchEvent(new CustomEvent(e,t))},n=e,r=(o=re).config,s=null,o.DOMReadyCallback=function(){o.domready=!0,o.nextInitItem()},o.initTimeout=function(e){function t(){if(null!==s){if(!1!==s.callback())return s.stop(),void o.nextInitItem();s.counter++,10!==s.counter&&25!==s.counter||(window.clearInterval(s.id),s.id=window.setInterval(t,10===s.counter?250:1e3))}}null!==s&&s.stop(),s={id:window.setInterval(t,100),counter:0,callback:e,stop:function(){window.clearInterval(s.id),s=null},nextTick:t}},o.domready=!1,o.ready=!1,o.initQueue=[],o.readyQueue=[],o.nextInitItem=function(){var e;if(!o.ready){if(o.initQueue.length)e=o.initQueue.shift();else{if(!o.domready)return void o.initTimeout(function(){return!o.domready&&document.body&&o.scanDOM(),o.domready});if(!o.readyQueue.length)return o.ready=n.isReady=!0,o.event(r._readyEvent),void o.scanDOM();e=o.readyQueue.shift()}!1!==e()&&o.nextInitItem()}},o.addStylesheet=function(e){var t;if(!document.head||!document.body)return!!o.domready||(e||o.initTimeout(o.addStylesheet.bind(null,!0)),!1);try{(t=document.createElement("style")).type="text/css",t.innerHTML="span.iconify, i.iconify, iconify-icon { display: inline-block; width: 1em; }",null!==document.head.firstChild?document.head.insertBefore(t,document.head.firstChild):document.head.appendChild(t)}catch(e){}return!0},o.initQueue.push(o.addStylesheet.bind(null,!1)),n.ready=function(e){n.isReady?window.setTimeout(e):document.addEventListener(r._readyEvent,e)},window.setTimeout(function(){"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?o.domready=!0:(document.addEventListener("DOMContentLoaded",ae),window.addEventListener("load",ae)),o.nextInitItem()}),(a=re.config).SVGAttributes=Object.create(null),a._imageClass="iconify",a._loadingClass="svg-loading",a._iconAttribute="data-icon",a._rotateAttribute="data-rotate",a._flipAttribute="data-flip",a._inlineModeAttribute="data-inline",a._alignAttribute="data-align",a._appendAttribute="data-icon-append",a._appendedClass="svg-appended",a._readyEvent="IconifyReady",a._webComponentsPolyfill="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/0.7.24/webcomponents-lite.min.js",a._classListPolyfill="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20150312/classList.min.js",function(t){t.defaultAPI="https://api.iconify.design/{prefix}.js?icons={icons}",t.API=Object.create(null),t.loaderMaxURLSize=500,t.loadBeforeDOMReady=!(document&&document.body),t._loaderEvent="IconifyAddedIcons",t.sessionStorage=!0;try{t.localStorage=!!(window&&window.localStorage&&window.localStorage.length)}catch(e){t.localStorage=!1}}(re.config),c=e,l=t,u=re.config,c.setConfig=function(e,t){ce(e,t,!1)},c.setCustomAPI=function(e,t){switch(typeof e){case"string":0;break;case"object":if(e instanceof Array){0;break}default:return}e.forEach(function(e){null===t?delete u.API[e]:u.API[e]=t})},c.getConfig=function(e){return void 0===u[e]?void 0===u["_"+e]?null:u["_"+e]:u[e]},["SimpleSVG","Iconify"].forEach(function(e){var t;void 0!==l[e+"Config"]&&"object"==typeof l[e+"Config"]&&(t=l[e+"Config"],Object.keys(t).forEach(function(e){ce(e,t[e],!0)}))}),f=(d=re).config,h=t,d.initQueue.push(function(){var e={observer:!1,classList:!1},t={observer:!1,classList:!1};function i(e){var t;return!e.length||(document.head?((t=document.createElement("script")).setAttribute("src",e),t.setAttribute("type","text/javascript"),document.head.appendChild(t),!0):d.domready)}function n(){if("classList"in document.createElement("div"))return 1;t.classList||(t.classList=i(f._classListPolyfill))}function o(){return h.MutationObserver&&h.WeakMap||t.observer||(t.observer=i(f._webComponentsPolyfill)),1}return e.classList=!n(),e.observer=!o(),!e.classList&&!e.observer||(d.initTimeout(function(){return!(e.observer&&!o()||e.classList&&!n())}),!1)}),re.getPrefix=function(e,t){var i;return"string"==typeof t&&""!==t?{prefix:t,icon:e}:2===(i=e.split(":")).length?{prefix:i[0],icon:i[1]}:1<(i=e.split("-")).length?{prefix:t=i.shift(),icon:i.join("-")}:{prefix:"",icon:e}},p=re.getPrefix,v={left:0,top:0,width:16,height:16,rotate:0,vFlip:!1,hFlip:!1},g=["left","top","width","height","body","rotate","vFlip","hFlip","inlineTop","inlineHeight","verticalAlign"],fe.mergeFlip=ue,fe.mergeRotation=le,fe.blankIcon=function(){return de({body:"",width:16,height:16})},re.Storage=fe,b=e,y=t,w=!1,_=new(m=re).Storage,b.addCollection=function(e,t){_.addCollection(e),w||!0===t||(w=!0,window.setTimeout(he,0))},b.addIcon=function(e,t,i){_.addIcon(e,t),w||!0===i||(w=!0,window.setTimeout(he,0))},b.iconExists=_.exists.bind(_),b.getIcon=_.copyIcon.bind(_),b.listIcons=_.list.bind(_),["SimpleSVG","Iconify"].forEach(function(e){void 0!==y[e+"Preload"]&&y[e+"Preload"]instanceof Array&&y[e+"Preload"].forEach(function(e){"object"==typeof e&&void 0!==e.icons&&b.addCollection(e)})}),x=re.Storage,O=re.config,A=/(-?[0-9.]*[0-9]+[0-9.]*)/g,j=/^-?[0-9.]*[0-9]+[0-9.]*$/g,I=["width","height","inline"],E=["title"],k=0,re.SVG=function(_){return _=_||x.blankIcon(),this.item=_,this.height=function(e,t,i){return void 0===e?t?this.item.inlineHeight:this.item.height:pe(e,(t?this.item.inlineHeight:this.item.height)/this.item.width,i)},this.width=function(e,t,i){return void 0===e?this.item.width:pe(e,this.item.width/(t?this.item.inlineHeight:this.item.height),i)},this.defaultAttributes=function(){return{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",focusable:"false"}},this.preserveAspectRatio=function(e,t,i){var n="";switch(e){case"left":n+="xMin";break;case"right":n+="xMax";break;default:n+="xMid"}switch(t){case"top":n+="YMin";break;case"bottom":n+="YMax";break;default:n+="YMid"}return n+=!0===i?" slice":" meet"},this.htmlspecialchars=function(e){switch(typeof e){case"boolean":case"number":return e+"";case"string":return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}return""},this.attributes=function(t){var e,i,n,o,r,s,a,c,l,u,d,f,h,p,v=this,g={horizontal:"center",vertical:"middle",crop:!1},b={rotate:_.rotate,hFlip:_.hFlip,vFlip:_.vFlip},m="",y=this.defaultAttributes(),w=[];if(s=ve(t="object"==typeof t?t:Object.create(null),[O._inlineModeAttribute,"inline"],!0),u=ve(t,[O._appendAttribute],!1),e={left:_.left,top:s?_.inlineTop:_.top,width:_.width,height:s?_.inlineHeight:_.height},"string"==typeof t[O._flipAttribute]&&t[O._flipAttribute].split(/[\s,]+/).forEach(function(e){switch(e=e.toLowerCase()){case"horizontal":b.hFlip=!b.hFlip;break;case"vertical":b.vFlip=!b.vFlip}}),void 0!==t[O._rotateAttribute])if("number"==typeof(c=t[O._rotateAttribute]))b.rotate+=c;else if("string"==typeof c)if(""===(d=c.replace(/^-?[0-9.]*/,"")))c=parseInt(c),isNaN(c)||(b.rotate+=c);else if(d!==c){switch(l=!1,d){case"%":l=25;break;case"deg":l=90}l&&(c=parseInt(c.slice(0,c.length-d.length)),isNaN(c)||(b.rotate+=Math.round(c/l)))}switch(b.hFlip?b.vFlip?b.rotate+=2:(w.push("translate("+(e.width+e.left)+" "+(0-e.top)+")"),w.push("scale(-1 1)"),e.top=e.left=0):b.vFlip&&(w.push("translate("+(0-e.left)+" "+(e.height+e.top)+")"),w.push("scale(1 -1)"),e.top=e.left=0),b.rotate%4){case 1:p=e.height/2+e.top,w.unshift("rotate(90 "+p+" "+p+")"),0===e.left&&0===e.top||(p=e.left,e.left=e.top,e.top=p),e.width!==e.height&&(p=e.width,e.width=e.height,e.height=p);break;case 2:w.unshift("rotate(180 "+(e.width/2+e.left)+" "+(e.height/2+e.top)+")");break;case 3:p=e.width/2+e.left,w.unshift("rotate(-90 "+p+" "+p+")"),0===e.left&&0===e.top||(p=e.left,e.left=e.top,e.top=p),e.width!==e.height&&(p=e.width,e.width=e.height,e.height=p)}return i=ge(t,["data-width","width"],null),n=ge(t,["data-height","height"],null),null===i&&null===n&&(n="1em"),null!==i&&null!==n?(o=i,r=n):null!==i?r=pe(o=i,e.height/e.width):o=pe(r=n,e.width/e.height),!1!==o&&(y.width="auto"===o?e.width:o),!1!==r&&(y.height="auto"===r?e.height:r),s&&0!==_.verticalAlign?m+="vertical-align: "+(h=_.verticalAlign+"em")+";":h="","string"==typeof t[O._alignAttribute]&&t[O._alignAttribute].toLowerCase().split(/[\s,]+/).forEach(function(e){switch(e){case"left":case"right":case"center":g.horizontal=e;break;case"top":case"bottom":case"middle":g.vertical=e;break;case"crop":g.crop=!0;break;case"meet":g.crop=!1}}),m+="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);",y.style=m+(void 0===t.style?"":t.style),y.preserveAspectRatio=this.preserveAspectRatio(g.horizontal,g.vertical,g.crop),y.viewBox=e.left+" "+e.top+" "+e.width+" "+e.height,a=function(i){var e,n,t=/\sid="(\S+)"/g,o=[];function r(e,t,i){for(var n=0;-1!==(n=i.indexOf(e,n));)i=i.slice(0,n)+t+i.slice(n+e.length),n+=t.length;return i}for(;e=t.exec(i);)o.push(e[1]);return o.length&&(n="IconifyId-"+Date.now().toString(16)+"-"+(16777216*Math.random()|0).toString(16)+"-",o.forEach(function(e){var t=n+k;k++,i=r('="'+e+'"','="'+t+'"',i),i=r('="#'+e+'"','="#'+t+'"',i),i=r("(#"+e+")","(#"+t+")",i)})),i}(this.item.body),w.length&&(a='<g transform="'+w.join(" ")+'">'+a+"</g>"),f=Object.create(null),Object.keys(t).forEach(function(e){void 0===y[e]&&(-1!==E.indexOf(e)?a="<"+e+">"+v.htmlspecialchars(t[e])+"</"+e+">"+a:-1===I.indexOf(e)&&(f[e]=t[e]))}),{attributes:y,elementAttributes:f,body:a,append:u,verticalAlign:h}},this},M=(C=re).config._loadingClass,C.newImage=function(e,t,i){return{element:e,icon:t,parser:i,loading:e.classList.contains(M)}},C.parsedImage=function(e,t){return{element:e,icon:t}},C.getImageAttributes=function(t){var e,i,n=Object.create(null);if(!t.element.hasAttributes())return n;for(e=0;e<t.element.attributes.length;e++)i=t.element.attributes[e],n[i.name]=i.value;return t.parser&&void 0!==t.parser.filterAttributes&&(n=t.parser.filterAttributes(t,n)),void 0!==n.class&&(n.class=n.class.split(" ").filter(function(e){return e!==M}),t.parser&&void 0!==t.parser.filterClasses&&(n.class=t.parser.filterClasses(t,n.class)),n.class=n.class.join(" ")),void 0!==t.attributes&&Object.keys(t.attributes).forEach(function(e){n[e]=t.attributes[e]}),n},function(n,f,e){var s=e._imageClass,t=e._loadingClass,i=e._appendedClass,a=e._iconAttribute,o=e._inlineModeAttribute,r=":not(svg):not(."+i+")",c=":not(."+t+")",l="."+t,h={iconify:{selector:"."+s,selectorAll:"."+s+r,selectorNew:"."+s+r+c,selectorLoading:"."+s+r+l,icon:function(e){var t,i=e.getAttribute(a);if("string"==typeof i)return i;for(var n=0;n<e.classList.length;n++)if(5<(t=e.classList[n]).length&&"icon:"===t.slice(0,5))return t.slice(5);return""},filterClasses:function(e,t){var i,n,o;for(n=0;n<t.length;n++)"icon-"===(i=t[n]).slice(0,5)&&2===(i=i.slice(5).split(":")).length&&(o="data-"+i[0],void 0===e.attributes&&(e.attributes=Object.create(null)),e.attributes[o]=i[1]);return t}}},p=Object.keys(h);n.addFinder=function(e,t){void 0===t.selectorAll&&(t.selectorAll=t.selector+r),void 0===t.selectorNew&&(t.selectorNew=t.selector+r+c),void 0===t.selectorLoading&&(t.selectorLoading=t.selector+r+l),h[e]=t,p=Object.keys(h),n.isReady&&n.scanDOM()},n.addTag=function(e,i,t){n.addFinder("tag-"+e,{selector:e,icon:null==t?h.iconify.icon:t,filterAttributes:function(e,t){return void 0===t[o]&&(t[o]=i),t},filterClasses:h.iconify.filterClasses})};try{"object"==typeof Reflect&&"object"==typeof customElements&&Object.setPrototypeOf&&(Object.setPrototypeOf(u.prototype,HTMLElement.prototype),Object.setPrototypeOf(u,HTMLElement),customElements.define("iconify-icon",u))}catch(e){}function u(){return Reflect.construct(HTMLElement,[],u)}n.addTag("iconify-icon",!1),f.findNewImages=function(c,l){var u=[],d=[];return(c=void 0===c?void 0===e._root?document.body:e._root:c)&&p.forEach(function(e){var t,i,n,o,r=h[e],s=!0===l?r.selectorLoading:!1===l?r.selectorNew:r.selectorAll,a=c.querySelectorAll(s);for(t=0;t<a.length;t++)i=a[t],(n=r.icon(i))&&-1===d.indexOf(i)&&(d.push(i),o=f.newImage(i,n,r),u.push(o))}),u},f.findParsedImages=function(e){var t,i,n,o=[],r=e.querySelectorAll("svg."+s);for(t=0;t<r.length;t++)(n=(i=r[t]).getAttribute(a))&&o.push(f.parsedImage(i,n));return o}}(e,re,re.config),L=e,N=(S=re).config,P=t,T=Object.create(null),F=Object.create(null),R=Object.create(null),H={session:!(D=!1),local:!0},V={session:0,local:0},L._loaderCallback=function(i){var n=!1;"object"==typeof i&&(["local","session"].forEach(function(t){var e;if(!n&&H[t]&&N[t+"Storage"]){e=P[t+"Storage"];try{V[t]||e.setItem("iconify-version",S.version),e.setItem("iconify"+V[t],JSON.stringify(i)),n=!0,V[t]++,e.setItem("iconify-count",V[t])}catch(e){H[t]=!1}}}),L.addCollection(i),S.event(N._loaderEvent))},S.loadImage=function(e,t){var i=S.getPrefix(e.icon);return!!L.iconExists(i.icon,i.prefix)||(!1!==t&&me(i.prefix,i.icon,!1)&&e.element.classList.add(N._loadingClass),!1)},L.preloadImages=function(e){var t,i=!1;return e.forEach(function(e){t=S.getPrefix(e),L.iconExists(t.icon,t.prefix)||(me(t.prefix,t.icon,!0),i=!0)}),i},["local","session"].forEach(function(t){var e,i,n;try{if("object"!=typeof(e=P[t+"Storage"]))return void(H[t]=!1);if(e.getItem("iconify-version")!==S.version)return;if("number"!=typeof(n=parseInt(e.getItem("iconify-count")))||isNaN(n))return;for(;;){if(V[t]>=n)return;if("string"!=typeof(i=e.getItem("iconify"+V[t])))return;"object"==typeof(i=JSON.parse(i))&&L.addCollection(i),V[t]++}}catch(e){H[t]=!1}}),G=e,z=(Q=re).config,B=t,Y=0,W={childList:!(U=!1),subtree:!(J=q=null)},G.pauseObserving=function(){null!==q&&(Y||(J=q.takeRecords(),q.disconnect())),Y++},G.resumeObserving=function(){null!==q?Y&&(--Y||(_e(),null!==J&&J.length&&we(J))):Y--},G.isObserverPaused=function(){return null===q||!!Y},Q.readyQueue.push(function(){return q=new B.MutationObserver(we),Y||_e(),!0}),$=e,X=(K=re).config,Z=X._iconAttribute,ee=X._loadingClass,te=X._imageClass,ie=X._appendedClass,K.renderSVG=function(t){var e,i,n,o,r,s,a,c,l,u,d,f=K.getImageAttributes(t),h=$.getIcon(t.icon);for(f[Z]=t.icon,e=new K.SVG(h),n=document.createElement("svg"),r=e.attributes(f),Object.keys(r.attributes).forEach(function(e){if(d=r.attributes[e],"style"!==e||"string"==typeof(d=t.element.getAttribute("style"))&&d.length)try{n.setAttribute(e,d)}catch(e){}}),Object.keys(r.elementAttributes).forEach(function(e){try{(r.append?t.element:n).setAttribute(e,r.elementAttributes[e])}catch(e){}}),t.loading&&(n.classList.remove(ee),r.append&&t.element.classList.remove(ee)),n.classList.add(te),s=xe(n.outerHTML,r.body),(o=document.createElement("span")).innerHTML=s,i=o.childNodes[0],r.append?(t.element.classList.add(ie),t.element.appendChild(i)):(t.element.parentNode.replaceChild(i,t.element),t.element=i),a=i.style,c=t.element.style,r.verticalAlign&&(a.verticalAlign=r.verticalAlign),a.transform="rotate(360deg)",l=0;l<c.length;l++)a[u=c[l]]=c[u];delete t.parser,delete t.loading},$.getSVGObject=function(e,t){return!!$.iconExists(e)&&new K.SVG($.getIcon(e)).attributes(t,!1)},$.getSVG=function(e,t){var i,n;return!1!==(n=$.getSVGObject(e,t))&&(i=document.createElement("svg"),Object.keys(n.attributes).forEach(function(e){try{i.setAttribute(e,n.attributes[e])}catch(e){}}),xe(i.outerHTML,n.body))},ne=e,(oe=re).scanDOM=function(){var t=!1;function e(){oe.findNewImages().forEach(function(e){oe.loadImage(e)&&(t||(t=!0,ne.pauseObserving()),oe.renderSVG(e))})}if(oe.ready)e();else try{e()}catch(e){}t&&ne.resumeObserving()},ne.scanDOM=oe.scanDOM,ne.getVersion=function(){return oe.version}}(self.Iconify,self)),"object"==typeof exports)try{exports.__esModule=!0,exports.default=self.Iconify}catch(e){}
(function(Iconify){"use strict";var faReserved=['fa-lg','fa-fw','fa-ul','fa-li','fa-border','fa-pull-left','fa-pull-right','fa-spin','fa-pulse','fa-rotate-90','fa-rotate-180','fa-rotate-270','fa-flip-horizontal','fa-flip-vertical','fa-stack','fa-stack-1x','fa-stack-2x','fa-inverse'],rotateAttribute=Iconify.getConfig('_rotateAttribute'),flipAttribute=Iconify.getConfig('_flipAttribute'),inlineAttribute=Iconify.getConfig('_inlineModeAttribute'),i;var stylesheetCDN=DOKU_TPL+'/assets/iconify/plugins/fa.css';var styleAdded=false;function insertStylesheet(){var element=document.createElement('link');styleAdded=true;element.setAttribute('rel','stylesheet');element.setAttribute('type','text/css');element.setAttribute('href',stylesheetCDN);document.head.appendChild(element);}function finder(selector,prefix){return{selector:selector,icon:function(element){var item;for(var i=0;i<element.classList.length;i++){item=element.classList[i];if(item.slice(0,3)==='fa-'&&faReserved.indexOf(item)===-1){return prefix+':'+item.slice(3);}}return'';},filterClasses:function(image,list){var results=[],transform={rotate:0,hFlip:false,vFlip:false};if(image.attributes===void 0){image.attributes=Object.create(null);}for(var i=0;i<list.length;i++){switch(list[i]){case'fa-rotate-90':transform.rotate=1;break;case'fa-rotate-180':transform.rotate=2;break;case'fa-rotate-270':transform.rotate=3;break;case'fa-flip-horizontal':transform.hFlip=true;break;case'fa-flip-vertical':transform.vFlip=true;break;default:results.push(list[i]);}}if(image.attributes[inlineAttribute]===void 0){image.attributes[inlineAttribute]=true;}if(transform.rotate){image.attributes[rotateAttribute]=transform.rotate;}if(transform.hFlip||transform.vFlip){image.attributes[flipAttribute]=(transform.hFlip&&transform.vFlip)?'horizontal vertical':(transform.hFlip?'horizontal':'vertical');}if(!styleAdded){insertStylesheet();}return results;}};}for(i=2;i<11;i++){faReserved.push('fa-'+i+'x');}Iconify.addFinder('fa',finder('.fa','fa'));Iconify.addFinder('fas',finder('.fas','fa-solid'));Iconify.addFinder('far',finder('.far','fa-regular'));Iconify.addFinder('fal',finder('.fal','fa-light'));Iconify.addFinder('fab',finder('.fab','fa-brands'));})(Iconify);if(!Iconify.getConfig('defaultAPI').match('lib/plugins/icons')){Iconify.setConfig('defaultAPI',DOKU_TPL+'iconify.php?prefix={prefix}&icons={icons}');}if(typeof JSINFO.bootstrap3==='undefined'){JSINFO.bootstrap3={config:{}};}if(typeof JSINFO.plugin==='undefined'){JSINFO.plugin={};}function dw_mode(id){return((JSINFO.bootstrap3.mode===id)?true:false);}function dw_admin(page){return((JSINFO.bootstrap3.admin===page)?true:false);}function mediaSize(media){return jQuery(['#screen__mode .visible-',media,'-block'].join('')).is(':visible');}var dw_template={init:function(){dw_template.common();dw_template.mobileLayout();dw_template.toc();dw_template.tabs();dw_template.tocMenu();dw_template.nav();dw_template.backToTop();dw_template.anchorJS();dw_template.pageTools();dw_template.pageIcons();dw_template.dropdownPage();dw_template.footnotes();dw_template.mediaManager();dw_template.collapseSections();dw_template.pageRestoreConfirm();dw_template.alerts();dw_template.detail();dw_template.menuitem();dw_template.cookieLaw();dw_template.plugins();if(!JSINFO.bootstrap3.config.disableSearchSuggest){dw_template.typeahead();}Iconify.preloadImages(['mdi:folder-open','mdi:folder','mdi:file-document-outline','mdi:chevron-up','mdi:chevron-down']);jQuery(window).resize(function(){dw_template.mobileLayout();dw_template.collapseSections();dw_template.tocResize();});if(dw_mode('media')||jQuery('#media__manager').length){jQuery(document).ajaxSuccess(function(){dw_template.common();dw_template.buttons();dw_template.tabs();dw_template.mediaManager();dw_template.alerts();});}if(dw_mode('index')){jQuery(document).ajaxSuccess(function(){dw_template.modeIndex();});jQuery('#index__tree').click(function(e){dw_template.modeIndex();});}if(JSINFO.bootstrap3.config.fixedTopNavbar){var scrollOnHashChange=function(){scrollBy(0,-(parseInt(jQuery('body').css('marginTop'))||0));};if(location.hash){setTimeout(function(){scrollOnHashChange();},1);}jQuery(window).on('hashchange',function(){scrollOnHashChange();});}},common:function(){var $dw_content=jQuery('#dokuwiki__content, #media__manager');jQuery('abbr').tooltip();jQuery('.search_hit').removeClass('search_hit').addClass('mark');if(jQuery('#dw__pagetools').length){jQuery('ul.dropdown-menu li a[accesskey]').closest('.top, .revs, .show, .edit').removeAttr('accesskey');}$dw_content.find(':submit, :button, :reset').addClass('btn btn-default');jQuery('input, select, textarea').not('[type=submit], [type=reset], [type=button], [type=hidden], [type=image], [type=checkbox], [type=radio], [type=color]').addClass('form-control');jQuery('input[type=checkbox]').addClass('checkbox-inline');jQuery('input[type=radio]').addClass('radio-inline');jQuery('label').addClass('control-label');jQuery('main form:not(.form-horizontal)').addClass('form-inline');jQuery('#tool__bar').addClass('btn-group');jQuery('[data-dw-icon]').each(function(){var $self=jQuery(this);var $icon=jQuery('<span class="iconify mr-1">').attr('data-icon',$self.attr('data-dw-icon'));if($self.attr('data-dw-icon-target')){$self.find($self.attr('data-dw-icon-target')).prepend($icon);}else{$self.prepend($icon);}});jQuery('footer a').addClass('navbar-link');if(NS=='user'&&dw_mode('show')&&!jQuery('.notFound').length){jQuery('.mode_show #dokuwiki__content h1').prepend('<span class="iconify mr-2" data-icon="mdi:account"/> ');}jQuery('#dw__toc a, #dw__toc_menu a, a.fn_top, a.fn_bot').on('click',function(e){var $link=jQuery(this);if($link.attr('href').match(/^#/)&&$link.attr('href').length>1){e.preventDefault();if(mediaSize('xs')&&$link.hasClass('fn_top')){return false;}if(JSINFO.bootstrap3.config.tocCollapseOnScroll&&JSINFO.bootstrap3.config.tocAffix){dw_template.tocClose();}var $target=jQuery('body '+$link.attr('href'));if($target.length){var body_offset=(parseInt(jQuery('body').css('marginTop'))||0),target_position=Math.round($target.offset().top-body_offset);jQuery('html, body').animate({scrollTop:target_position},600);document.location.hash=$link.attr('href');}return false;}});},jQueryUI:function(){if(typeof jQuery.ui==='undefined')return false;jQuery.ui.accordion.prototype.options.classes["ui-accordion"]="panel panel-default";jQuery.ui.accordion.prototype.options.classes["ui-accordion-content"]="panel-collapse collapse";jQuery.ui.accordion.prototype.options.classes["ui-accordion-content-active"]="in";jQuery.ui.accordion.prototype.options.classes["ui-accordion-header"]="panel-heading";jQuery.ui.button.prototype.options.classes["ui-button"]="btn btn-default";jQuery.ui.button.prototype.options.classes["ui-button-icon"]="glyphicon";jQuery.ui.dialog.prototype.options.classes["ui-dialog"]="modal-content";jQuery.ui.dialog.prototype.options.classes["ui-dialog-titlebar"]="modal-header";jQuery.ui.dialog.prototype.options.classes["ui-dialog-title"]="modal-title";jQuery.ui.dialog.prototype.options.classes["ui-dialog-titlebar-close"]="btn btn-default";jQuery.ui.dialog.prototype.options.classes["ui-dialog-content"]="modal-body";jQuery.ui.dialog.prototype.options.classes["ui-dialog-buttonpane"]="modal-footer";jQuery.ui.menu.prototype.options.classes["ui-menu"]="list-group";jQuery.ui.menu.prototype.options.classes["ui-menu-icons"]="";jQuery.ui.menu.prototype.options.classes["ui-menu-icon"]="glyphicon glyphicon-chevron-right";jQuery.ui.menu.prototype.options.classes["ui-menu-item"]="list-group-item";jQuery.ui.menu.prototype.options.classes["ui-menu-divider"]="";jQuery.ui.menu.prototype.options.classes["ui-menu-item-wrapper"]="";jQuery.ui.progressbar.prototype.options.classes["ui-progressbar"]="progress";jQuery.ui.progressbar.prototype.options.classes["ui-progressbar-value"]="progress-bar";jQuery.ui.selectmenu.prototype.options.classes["ui-selectmenu-button"]="btn btn-default dropdown-toggle";jQuery.ui.selectmenu.prototype.options.classes["ui-selectmenu-open"]="open";jQuery.ui.selectmenu.prototype.options.icons.button="caret";jQuery.ui.selectmenu.prototype.options.width="auto";jQuery.ui.tabs.prototype.options.classes["ui-tabs-nav"]="nav nav-tabs";jQuery.ui.tabs.prototype.options.classes["ui-tabs-panel"]="tab-pane";jQuery.ui.tabs.prototype.options.classes["ui-tabs-active"]="active";jQuery.ui.tooltip.prototype.options.classes["ui-tooltip"]="tooltip top fade in";jQuery.ui.tooltip.prototype.options.classes["ui-tooltip-content"]="tooltip-inner";},nav:function(){jQuery('.nav div.li').contents().unwrap();jQuery('.nav li .dw-icons + a').each(function(){var $link=jQuery(this),$icon=$link.prev();$icon.prependTo($link);$icon.after(' ');});},tabs:function(){jQuery('ul.tabs').addClass('nav nav-tabs');jQuery('.nav-tabs strong').replaceWith(function(){jQuery(this).parent().addClass('active');return jQuery('<a href="#"/>').html(jQuery(this).contents());});},buttons:function(){jQuery('.button').removeClass('button');jQuery('.alert button').removeClass('btn btn-default');jQuery('#dw__login, #dw__register, #subscribe__form, #media__manager').find(':submit').addClass('btn-success');jQuery('#dw__profiledelete').find(':submit').addClass('btn-danger');jQuery('#edbtn__save').addClass('btn-success');jQuery('.btn_secedit .btn').addClass('btn-xs');},backToTop:function(){jQuery('.back-to-top').click(function(e){e.preventDefault();jQuery('html, body').animate({scrollTop:0},600);});jQuery(window).scroll(function(){if(jQuery(this).scrollTop()){jQuery('.back-to-top').fadeIn();}else{jQuery('.back-to-top').fadeOut();}});},footnotes:function(){var orig_insituPopup=dw_page.insituPopup;dw_page.insituPopup=function(target,popup_id){var $fndiv=orig_insituPopup(target,popup_id);$fndiv.addClass('panel panel-body panel-default');return $fndiv;}},alerts:function(){jQuery('div.info').removeClass('info').addClass('alert alert-info').prepend('<span class="iconify mr-2" data-height="18" data-icon="mdi:information"/>');jQuery('div.error').removeClass('error').addClass('alert alert-danger').prepend('<span class="iconify mr-2" data-height="18" data-icon="mdi:alert-octagon"/>');jQuery('div.success').removeClass('success').addClass('alert alert-success').prepend('<span class="iconify mr-2" data-height="18" data-icon="mdi:check-circle"/>');jQuery('div.notify').removeClass('notify').addClass('alert alert-warning').prepend('<span class="iconify mr-2" data-height="18" data-icon="mdi:alert"/>');},cookieLaw:function(){jQuery('#cookieDismiss').on('click',function(){jQuery('#cookieNotice').hide();DokuCookie.setValue('cookieNoticeAccepted',1);});},anchorJS:function(){if(!JSINFO.bootstrap3.config.useAnchorJS)return false;anchors.add('.mode_show article .dw-content h1, .mode_show article '+'.dw-content h2, .mode_show article .dw-content h3, '+'.mode_show article .dw-content h4, .mode_show article '+'.dw-content h5');},dropdownPage:function(){jQuery('.dw__dropdown_page .dropdown').hover(function(){if(!jQuery('#screen_mode').find('.visible-xs').is(':visible')){jQuery(this).addClass('open');}},function(){if(!jQuery('#screen_mode').find('.visible-xs').is(':visible')){jQuery(this).removeClass('open');}});},pageIcons:function(){var $dw_page_icons=jQuery('.dw-page-icons');if(!$dw_page_icons.length)return false;var title=encodeURIComponent(document.title),url=encodeURIComponent(location),window_options='width=800,height=600,menubar=no,location=no,status=no';var share_to={'twitter':(function(){return['https://twitter.com/intent/tweet?text=',title,'&url=',url].join('');})(),'linkedin':(function(){return['https://www.linkedin.com/shareArticle?mini=true&url=',url,'&title=',title].join('');})(),'facebook':(function(){return['https://www.facebook.com/sharer/sharer.php?u=',url,'&t=',title].join('');})(),'pinterest':(function(){return['https://pinterest.com/pin/create/button/?url=',url,'&description=',title].join('');})(),'telegram':(function(){return['https://telegram.me/share/url?url=',url].join('');})(),'whatsapp':(function(){return['https://wa.me/?text=',title,': ',url].join('');})(),'yammer':(function(){return['https://www.yammer.com/messages/new?login=true&trk_event=yammer_share&status=',url,'#/Messages/bookmarklet'].join('');})(),'sendmail':(function(){return['mailto:?subject=',document.title,'&body=',document.URL].join('');})(),'reddit':(function(){return['https://www.reddit.com/submit?url=',url,'&title=',title].join('');})(),'msteams':(function(){return['https://teams.microsoft.com/share?href=',url,'&referrer=',location.host].join('');})(),};$dw_page_icons.find('.share-twitter').on('click',function(){window.open(share_to.twitter,'Share to Twitter',window_options);});$dw_page_icons.find('.share-linkedin').on('click',function(){window.open(share_to.linkedin,'Share to Linkedin',window_options);});$dw_page_icons.find('.share-facebook').on('click',function(){window.open(share_to.facebook,'Share to Facebook',window_options);});$dw_page_icons.find('.share-pinterest').on('click',function(){window.open(share_to.pinterest,'Share to Pinterest',window_options);});$dw_page_icons.find('.share-telegram').on('click',function(){window.open(share_to.telegram,'Share to Telegram',window_options);});$dw_page_icons.find('.share-yammer').on('click',function(){window.open(share_to.yammer,'Share to Yammer',window_options);});$dw_page_icons.find('.share-reddit').on('click',function(){window.open(share_to.reddit,'Share to Reddit',window_options);});$dw_page_icons.find('.sendmail').on('click',function(e){e.preventDefault();window.location=share_to['sendmail'];});$dw_page_icons.find('.share-whatsapp').on('click',function(){window.open(share_to.whatsapp,'Share to WhatsApp',window_options);});$dw_page_icons.find('.share-microsoft-teams').on('click',function(){window.open(share_to.msteams,'Share to Microsoft Teams',window_options);});},pageTools:function(){if(!jQuery('#dw__pagetools').length)return false;jQuery('#dw__pagetools .tools').affix({offset:{top:(jQuery('main').position().top),bottom:(jQuery(document).height()-jQuery('#dokuwiki__content').height()-jQuery('#dokuwiki__pageheader').height()-jQuery('#dokuwiki__header').height())}});var $pagetools=jQuery('#dw__pagetools');$pagetools.find('svg').hover(function(){var $node=jQuery(this);$node.closest('li.active').removeClass('active');$node.closest('li').addClass('active');},function(){var $node=jQuery(this);$node.closest('li.active').removeClass('active');});},collapseSections:function(){if(!JSINFO.bootstrap3.config.collapsibleSections)return false;var $sections=jQuery('article div.level2'),$headings=$sections.prev();if(mediaSize('xs')){$sections.addClass('hide');if(!$headings.find('svg').length){$headings .css('cursor','pointer').prepend(Iconify.getSVG('mdi:chevron-down'));$headings.on('click',function(){var $heading=jQuery(this),$icon=$heading.find('svg'),$section=$heading.nextUntil('h2');$section.toggleClass('hide');$heading.css('cursor','pointer');$section.hasClass('hide')?$icon.replaceWith(Iconify.getSVG('mdi:chevron-down')):$icon.replaceWith(Iconify.getSVG('mdi:chevron-up'));});if(mediaSize('xs')){$headings.trigger('click');}}}else{if($sections.hasClass('hide')){$sections.removeClass('hide');}}},mobileLayout:function(){var $dw_aside=jQuery('.dw__sidebar');if(!$dw_aside.length)return false;if(mediaSize('xs')){if(JSINFO.bootstrap3.config.sidebarOnNavbar){if(!jQuery('header aside').length){jQuery('<aside/>').prependTo('header nav div .navbar-collapse');$dw_aside.find('.dw-sidebar-content').clone().appendTo('header aside');jQuery('header aside .dw-sidebar-title').addClass('navbar-text');}jQuery('header aside').show();$dw_aside.hide();}else{if(!$dw_aside.find('.dw-sidebar-content').hasClass('panel')){$dw_aside.find('.dw-sidebar-content').addClass('panel panel-default');$dw_aside.find('.dw-sidebar-title').addClass('panel-heading');$dw_aside.find('.dw-sidebar-body').addClass('panel-body').removeClass('in');}}}else{jQuery('header aside').hide();$dw_aside.find('.dw-sidebar-content').removeClass('panel panel-default');$dw_aside.find('.dw-sidebar-title').removeClass('panel-heading');$dw_aside.find('.dw-sidebar-body').removeClass('panel-body').addClass('in');$dw_aside.show();}},modeIndex:function(){if(!dw_mode('index'))return false;var $directories=jQuery('ul.idx a.idx_dir'),$pages=jQuery('ul.idx a.wikilink1');jQuery.each($directories,function(){var $directory=jQuery(this),$closed=$directory.parents('.closed'),$open=$directory.parents('.open');if(!$directory.find('svg').length){$directory.prepend(Iconify.getSVG('mdi:folder'));}if($open.length){$directory.find('svg').replaceWith(Iconify.getSVG('mdi:folder-open'));}if($closed.length){$directory.find('svg').replaceWith(Iconify.getSVG('mdi:folder'));}$directory.find('svg').addClass('iconify text-primary mr-2');});jQuery.each($pages,function(){var $page=jQuery(this);if(!$page.find('svg').length){$page.prepend(Iconify.getSVG('mdi:file-document-outline'));}$page.find('svg').addClass('text-muted mr-2');});},mediaManager:function(){var $media_popup=jQuery('#media__content'),$media_manager=jQuery('#mediamanager__page');if($media_popup.length||$media_manager.length){jQuery('.qq-upload-button').addClass('btn btn-default');jQuery('.qq-upload-action').addClass('btn btn-success');var $btn_delete=jQuery('#mediamanager__btn_delete [type=submit]');var $btn_update=jQuery('#mediamanager__btn_update [type=submit]');if(!$btn_delete.find('span').length){$btn_delete.addClass('btn btn-danger');$btn_delete.prepend(jQuery('<span class="iconify mr-2" data-icon="mdi:delete"/>'));$btn_update.prepend(jQuery('<span class="iconify mr-2" data-icon="mdi:image-plus"/>'));}jQuery('#page__revisions .sizechange').addClass('label label-primary');jQuery('#page__revisions .sizechange.positive').addClass('label-success');jQuery('#page__revisions .sizechange.negative').addClass('label-danger');}if($media_manager.length){var $sort_buttons=jQuery('.ui-buttonset');$media_manager.find('.file dd').addClass('pl-4');$media_manager.find('.panel').removeClass('panel').addClass('pull-left');$sort_buttons.addClass('btn-group');$sort_buttons.find('label').addClass('btn btn-xs btn-default');$sort_buttons.find('input').hide();function buttonHandler(){var $button=jQuery(this),option_for=$button.attr('for'),option_set=option_for.replace('sortBy__','').replace('listType__','');$sort_buttons.find('.active').removeClass('active');$button.addClass('active');$sort_buttons.find('#'+option_for).prop('checked',true);switch(option_set){case'thumbs':case'rows':dw_mediamanager.set_fileview_list(option_set);$sort_buttons.find('[name=list_dwmedia]').val(option_set);break;case'name':case'date':dw_mediamanager.set_fileview_sort(option_set);$sort_buttons.find('[name=sort_dwmedia]').val(option_set);dw_mediamanager.list.call(jQuery('#dw__mediasearch')[0]||this,event);break;}}$sort_buttons.find('label').on('click',buttonHandler);}},detail:function(){var $detail_page=jQuery('#dokuwiki__detail');if(!$detail_page.length)return false;$detail_page.find('img.img_detail').addClass('img-responsive');$detail_page.find('dl').addClass('dl-horizontal');},tocResize:function(){var $dw_toc=jQuery('#dw__toc');if(!$dw_toc.length)return false;if(JSINFO.bootstrap3.config.tocAffix){$dw_toc.affix('checkPosition');}jQuery('#dw__toc .toc-body > ul').css({'max-height':(jQuery(window).height()-50-jQuery('#dokuwiki__content').position().top)+'px','overflow-y':'scroll'});jQuery('.toc-body').width(jQuery('.dw-toc').width());},tocClose:function(){var $dw_toc=jQuery('#dw__toc');if(!$dw_toc.length)return false;if(!$dw_toc.hasClass('affix-bottom')){jQuery('.dw-content-page').addClass('dw-toc-closed');$dw_toc.find('.toc-body').collapse('hide');}},tocOpen:function(){var $dw_toc=jQuery('#dw__toc');if(!$dw_toc.length)return false;jQuery('.dw-content-page').removeClass('dw-toc-closed');$dw_toc.find('.toc-body').collapse('show');},tocMenu:function(){if(!jQuery("#dw__toc_menu").length)return false;if(jQuery(JSINFO.bootstrap3.toc).length){jQuery("#dw__toc_menu").removeClass("hide");}jQuery.each(JSINFO.bootstrap3.toc,function(idx,item){var indent="";if(item.level>1){for(var i=0;i<=item.level;i++){indent+="&nbsp;&nbsp;"}}jQuery("#dw__toc_menu ul").append(['<li><a class="small" href="',item.link,'">',indent,item.title,'</a></li>'].join(''));});},toc:function(){var $dw_toc=jQuery('#dw__toc');if(!$dw_toc.length)return false;if(JSINFO.bootstrap3.config.tocAffix){$dw_toc.affix({offset:{top:(jQuery("#dokuwiki__content").position().top),bottom:(jQuery(document).height()-jQuery("#dokuwiki__content").height()),}});}var scrollspy_target='#dw__toc';if(JSINFO.bootstrap3.config.tocLayout=='navbar'){scrollspy_target='#dw__navbar_items';}jQuery('body').scrollspy({target:scrollspy_target,offset:((parseInt(jQuery('body').css('marginTop'))||0)+10),});dw_template.tocResize();if(mediaSize('xs')){dw_template.tocClose();}$dw_toc.css('backgroundColor',jQuery('article > .panel').css('backgroundColor'));$dw_toc.find('a').css('color',jQuery('body').css('color'));if(JSINFO.bootstrap3.config.tocCollapseOnScroll&&JSINFO.bootstrap3.config.tocAffix){$dw_toc.on('affix.bs.affix',function(){dw_template.tocClose();});if(!JSINFO.bootstrap3.config.tocCollapsed){$dw_toc.on('affix-top.bs.affix',function(){dw_template.tocOpen();});}}$dw_toc.find('.toc-title').on('click',function(){jQuery('.dw-content-page').toggleClass('dw-toc-closed');if(jQuery('.dw-toc').hasClass('dw-toc-bootstrap')){if(jQuery('.dw-content-page').hasClass('dw-toc-closed')){jQuery('.dw-toc').removeClass('col-md-3');jQuery('.dw-content-page').removeClass('col-md-9').addClass('col-md-12');}else{jQuery('.dw-toc').addClass('col-md-3');jQuery('.dw-content-page').removeClass('col-md-12').addClass('col-md-9');dw_template.tocResize();}}if(!jQuery('.dw-toc-closed').length){dw_template.tocResize();}});if((jQuery(window).height()<$dw_toc.height())){dw_template.tocResize();}},typeahead:function(){jQuery("#qsearch").typeahead({source:function(query,process){return jQuery.post(DOKU_BASE+'lib/exe/ajax.php',{call:'qsearch',q:encodeURI(query)},function(data){var results=[];jQuery(data).find('a').each(function(){var page=jQuery(this);results.push({name:page.text(),href:page.attr('href'),title:page.attr('title'),category:page.attr('title').replace(/:/g,' » '),});});return process(results);});},itemLink:function(item){return item.href;},itemTitle:function(item){return item.title;},followLinkOnSelect:true,autoSelect:false,items:50,fitToElement:true,delay:500,});},toolbarIcons:function(){if(typeof window.toolbar==='undefined')return false;if(!JSINFO.bootstrap3.config.useAlternativeToolbarIcons)return false;var icons={'bold.png':'format-bold.svg','chars.png':'omega.svg','h.png':'format-header-pound.svg','h1.png':'format-header-1.svg','hequal.png':'format-header-equal.svg','hminus.png':'format-header-decrease.svg','hplus.png':'format-header-increase.svg','hr.png':'minus.svg','image.png':'image.svg','italic.png':'format-italic.svg','link.png':'link.svg','linkextern.png':'link-variant.svg','mono.png':'format-title.svg','ol.png':'format-list-numbered.svg','sig.png':'signature.svg','smiley.png':'emoticon-outline.svg','strike.png':'format-strikethrough.svg','ul.png':'format-list-bulleted.svg','underline.png':'format-underline.svg',};for(var i in window.toolbar){if(window.toolbar[i].icon=='h.png'){for(var x in window.toolbar[i].list){var hn=parseInt(x)+1;window.toolbar[i].list[x].icon='../../tpl/bootstrap3/iconify.php?icon=mdi-format-header-'+hn+'.svg';}}for(var icon in icons){if(window.toolbar[i].icon==icon){window.toolbar[i].icon='../../tpl/bootstrap3/iconify.php?icon=mdi-'+icons[icon];}}}},pageRestoreConfirm:function(){jQuery('li.action a.revert').on('click',function(){return confirm(LANG.restore_confirm);});},menuitem:function(){jQuery('.menuitem.help').on('click',function(){var $self=jQuery(this);jQuery('.modal.help .modal-title').html($self.attr('title'));jQuery('.modal.help .modal-body').load($self.data('link'));});jQuery('.menuitem.printpage').on('click',function(){window.print();});},plugins:function(){var $csv=jQuery('table tbody tr.row0 th.col0');if($csv.length){$csv.each(function(){var $table=jQuery(this).parents('table');if($table.find('tr.row1 th').length==0){$table.prepend('<thead/>');var $header=$table.find('tr.row0');$table.find('thead').append($header);}});}var $dataplugin_entry=jQuery('.dataplugin_entry'),$dataplugin_table=jQuery('.dataplugin_table');if($dataplugin_entry.length){$dataplugin_entry.find('dl').addClass('panel panel-default');}if($dataplugin_table.length){$dataplugin_table.find('input').addClass('input-sm');var $header=$dataplugin_table.find('th[style]'),$inputs=$dataplugin_table.find('th input'),header_width=[],i=0;$header.each(function(){header_width.push(this.style.width);});$inputs.each(function(){this.style.width=header_width[i];i++;});}var $database2=jQuery('table.database2, table.database2-single-editor');if($database2.length){$database2.find('.label').removeClass('label').addClass('database2-label');$database2.find('input[type="submit"]:first').addClass('btn-success');}var $datatables=jQuery('.dt-wrapper');if($datatables.length){$datatables.find('.table-responsive').removeClass('table-responsive');}var $davcal=jQuery('#fullCalendar');if($davcal.length){$davcal.find('.fc-button-group').addClass('btn-group');}var $davcard_table=jQuery('.davcardAddressbookTable');if($davcard_table.length){$davcard_table.addClass('table');}var $davcard_add_btn=jQuery('a.davcardAddressbookAddNew');if($davcard_add_btn.length){$davcard_add_btn.prepend(jQuery('<span class="iconify mr-2" data-icon="mdi:account-plus"/>'));$davcard_add_btn.addClass('btn btn-xs btn-primary');}var $discussion=jQuery('.comment_wrapper');if($discussion.length){$discussion.find('h2').addClass('page-header');$discussion.find('.comment_buttons').addClass('text-right');$discussion.find('#discussion__section').prepend('<span class="iconify mr-2" data-icon="mdi:comment-text-multiple"/>');$discussion.find('.hentry').addClass('panel panel-default');$discussion.find('.hentry .comment_head').addClass('panel-heading');$discussion.find('.hentry .comment_body').addClass('panel-body');$discussion.find('.toolbar').addClass('btn-group');$discussion.find('.comment_buttons [type=submit]').addClass('btn-xs');$discussion.find('.comment_buttons .discussion__delete .btn').addClass('btn-danger');$discussion.find('.comment_buttons .discussion__reply .btn').addClass('btn-success');$discussion.find('#discussion__btn_submit').addClass('btn-success');jQuery(document).bind('DOMNodeInserted',function(){$discussion.find('.toolbutton').addClass('btn btn-xs');});}var $explain=jQuery('.explain');if($explain.length){$explain.each(function(){var $self=jQuery(this),$tooltip=$self.find('.tooltip');$self.attr({'data-toggle':'tooltip','data-placement':'bottom','title':$tooltip.html(),}).addClass('wikilink1').removeClass('explain');$tooltip.remove();});jQuery('[data-toggle="tooltip"]').tooltip();}var $folded=jQuery('.fold_unfold_all_new');if($folded.length){$folded.addClass('menuitem');}if(dw_mode('media')){jQuery(document).ajaxSuccess(function(){jQuery('.mode_media .meta .row').removeClass('row');});}var $include_readmore=jQuery('.include_readmore');if($include_readmore.length){$include_readmore.find('a').addClass('btn btn-default btn-xs');}var $toc=jQuery('#dw__toc, #dokuwiki__toc'),$toc2=jQuery('div.inlinetoc2');if($toc2.length&&$toc.length){$toc.css('display','none');$toc2.addClass('panel panel-default');}var $monthcal=jQuery('table.monthcal');if($monthcal.length){$monthcal.addClass('table');}jQuery(document).on('bootstrap3:plugin-move',function(event){if(!jQuery('#plugin_move__tree').length)return false;setTimeout(function(){var $directories=jQuery('li.type-d a.idx_dir'),$pages=jQuery('li.type-f a.wikilink1');jQuery.each($directories,function(){var $directory=jQuery(this),$closed=$directory.parents('.closed'),$open=$directory.parents('.open');if(!$directory.find('svg').length){$directory.prepend(Iconify.getSVG('mdi:folder'));}if($open.length){$directory.find('svg').replaceWith(Iconify.getSVG('mdi:folder-open'));}if($closed.length){$directory.find('svg').replaceWith(Iconify.getSVG('mdi:folder'));}$directory.find('svg').addClass('iconify text-primary mr-2');});jQuery.each($pages,function(){var $page=jQuery(this);if(!$page.find('svg').length){$page.prepend(Iconify.getSVG('mdi:file-document-outline'));}$page.find('svg').addClass('text-muted mr-2');});},0);});jQuery('#plugin_move__tree a').click(function(e){dw_template.modeIndex();});jQuery(document).trigger('bootstrap3:plugin-move');jQuery(document).ajaxSuccess(function(e){jQuery(document).trigger('bootstrap3:plugin-move');});var $overlay=jQuery('#overlay');if($overlay.length){$overlay.addClass('panel panel-default small');$overlay.css('border',jQuery('.panel').css('border'));$overlay.css('background',jQuery('.panel').css('background'));var $title=$overlay.find('.close'),$btn=$title.find('a');$btn.wrapAll('<ul class="text-right list-inline dw-action-icon" />');$btn.wrap('<li/>');$btn.addClass('text-muted');$title.nextAll().wrapAll('<div class="panel-body" />');$title.removeClass('close').addClass('panel-heading');}var $plant_uml=jQuery('div[id^="plant-uml-diagram"] svg');if($plant_uml.length){$plant_uml.addClass('img-responsive');}var $publish=jQuery('.approval');if($publish.length){$publish.prependTo('.page');$publish.removeClass('approval').addClass('alert');jQuery('.apr_table').removeClass('table-striped');if($publish.hasClass('approved_no')){$publish.removeClass('approved_no').addClass('alert-warning').prepend('<span class="iconify mr-2" data-icon="mdi:information"/>');}if($publish.hasClass('approved_yes')){$publish.removeClass('approved_yes').addClass('alert-success').prepend('<span class="iconify mr-2" data-icon="mdi:check-circle"/>');}}var $wikilinks=jQuery('article .wikilink1');if(typeof JSINFO.plugin==='undefined'){JSINFO.plugin={};}if(typeof JSINFO.plugin.semantic==='undefined'){JSINFO.plugin.semantic={};}if($wikilinks.length&&JSINFO.plugin.semantic.exposeWebService&&JSINFO.bootstrap3.config.showSemanticPopup){$wikilinks.hover(function(){$wikilinks.popover('destroy');var $wikilink=jQuery(this),page_id=$wikilink.attr('title');if($wikilink.parents('.bs-wrap-nav').length){return false;}if(!page_id)return false;if(page_id==JSINFO.id)return false;jQuery.get(DOKU_BASE+'doku.php',{id:page_id,do:'export_xhtmlsummary'},function(data){var content='<div class="popover-xhtmlsummary">'+'  <div class="popover-body">'+data+'</div>'+'  <div class="popover-footer text-right">'+'    <a class="btn btn-xs btn-primary" href="'+$wikilink.attr('href')+'">'+page_id+'</a>'+'  </div>'+'</div>';$wikilink.popover({trigger:'manual',html:true,title:page_id,content:content,placement:'auto left',}).popover('show');$wikilink.attr('title',page_id);});},function(){var self=this;setTimeout(function(){if(jQuery(self).next('.popover').length&&!jQuery(self).next('.popover:hover').length){jQuery(self).popover('destroy');}},300);});}var $simplenavi=jQuery('.plugin__simplenavi');if($simplenavi.length){$simplenavi.find('li').addClass('mt-1');$simplenavi.find('a.wikilink2').removeClass('wikilink2');$simplenavi.find('li.open strong').contents().unwrap();$simplenavi.find('li.closed a').prepend('<span class="iconify mr-2" data-icon="mdi:folder"/>');$simplenavi.find('li.open > a').prepend('<span class="iconify mr-2" data-icon="mdi:folder-open"/>');$simplenavi.find('li').not('.closed').not('.open').find('a').prepend('<span class="iconify mr-2" data-icon="mdi:file-document-outline"/>');}if(dw_admin('struct_schemas')||dw_admin('struct_assignments')){jQuery('.toc-body .toc').addClass('show');}setTimeout(function(){jQuery('.plugin_tabbox').each(function(){var $self=jQuery(this);$self.find('> ul.tabs').addClass('nav nav-tabs').css('max-height','40px');});},500);jQuery('.tagerror, .taginfo, .tagsuccess, .tagnotify').each(function(){var $node=jQuery(this);if($node.prop('nodeName').toLowerCase()=='div'){$node.removeClass('label label-default').addClass('alert');$node.prependTo('#dw__msgarea');if($node.hasClass('tagerror'))$node.removeClass('tagerror').addClass('alert-danger');if($node.hasClass('taginfo'))$node.removeClass('taginfo').addClass('alert-info');if($node.hasClass('tagsuccess'))$node.removeClass('tagsuccess').addClass('alert-success');if($node.hasClass('tagnotify'))$node.removeClass('tagnotify').addClass('alert-warning');}else{if($node.hasClass('tagerror'))$node.removeClass('tagerror').addClass('label-danger');if($node.hasClass('taginfo'))$node.removeClass('taginfo').addClass('label-info');if($node.hasClass('tagsuccess'))$node.removeClass('tagsuccess').addClass('label-success');if($node.hasClass('tagnotify'))$node.removeClass('tagnotify').addClass('label-warning');}});var $tagging_edit=jQuery('.plugin_tagging_edit');if($tagging_edit.length){$tagging_edit.find(':submit').addClass('btn btn-default btn-xs');$tagging_edit.find('[type=text]').addClass('input-sm');$tagging_edit.find('#tagging__edit_save').addClass('btn-success');}var $translation=jQuery('#dw__translation');if($translation.length){var $current=$translation.find('.cur'),$lang=$current.text(),$iso=$lang.match(/\(([a-z]*)\)/),$flag=$current.find('img');$current.parent().addClass('active');$translation.find('.wikilink2').removeClass('wikilink2').css('opacity','0.5');if($flag.length){$translation.find('.dropdown-toggle .iconify').hide();$translation.find('.dropdown-toggle').prepend(jQuery('<img/>').attr({'src':$flag.attr('src'),'title':$flag.attr('title')}));}}var $wrap=jQuery('.plugin_wrap');if($wrap.length){if($wrap.hasClass('tabs')){var $tabs=jQuery('.plugin_wrap.tabs');$tabs.find('div.li').contents().unwrap();$tabs.find('.curid').parent().addClass('active');$tabs.find('ul').addClass('nav nav-tabs');}}jQuery('#plugin__watchcycle_admin table').addClass('table table-striped');},};dw_template.toolbarIcons();dw_template.jQueryUI();jQuery(dw_template.init);var dw_acl={init:function(){var $tree;if(jQuery('#acl_manager').length===0){return;}jQuery('#acl__user select').on('change',dw_acl.userselhandler);jQuery('#acl__user button').on('click',dw_acl.loadinfo);$tree=jQuery('#acl__tree');$tree.dw_tree({toggle_selector:'img',load_data:function(show_sublist,$clicky){var $frm=jQuery('#acl__detail form');jQuery.post(DOKU_BASE+'lib/exe/ajax.php',jQuery.extend(dw_acl.parseatt($clicky.parent().find('a')[0].search),{call:'plugin_acl',ajax:'tree',current_ns:$frm.find('input[name=ns]').val(),current_id:$frm.find('input[name=id]').val()}),show_sublist,'html');},toggle_display:function($clicky,opening){$clicky.attr('src',DOKU_BASE+'lib/images/'+(opening?'minus':'plus')+'.gif');}});$tree.delegate('a','click',dw_acl.treehandler);},userselhandler:function(){jQuery('#acl__user input').toggle(this.value==='__g__'||this.value==='__u__');dw_acl.loadinfo();},loadinfo:function(){jQuery('#acl__info').attr('role','alert').html('<img src="'+DOKU_BASE+'lib/images/throbber.gif" alt="..." />').load(DOKU_BASE+'lib/exe/ajax.php',jQuery('#acl__detail form').serialize()+'&call=plugin_acl&ajax=info');return false;},parseatt:function(str){if(str[0]==='?'){str=str.substr(1);}var attributes={};var all=str.split('&');for(var i=0;i<all.length;i++){var att=all[i].split('=');attributes[att[0]]=decodeURIComponent(att[1]);}return attributes;},treehandler:function(){var $link,$frm;$link=jQuery(this);jQuery('#acl__tree a.cur').removeClass('cur');$link.addClass('cur');$frm=jQuery('#acl__detail form');if($link.hasClass('wikilink1')){$frm.find('input[name=ns]').val('');$frm.find('input[name=id]').val(dw_acl.parseatt($link[0].search).id);}else if($link.hasClass('idx_dir')){$frm.find('input[name=ns]').val(dw_acl.parseatt($link[0].search).ns);$frm.find('input[name=id]').val('');}dw_acl.loadinfo();return false;}};jQuery(dw_acl.init);jQuery(document).ready(function(){jQuery('.bs-wrap .fix-media-list-overlap').removeClass('fix-media-list-overlap');jQuery('.bs-wrap-jumbotron .page-header').removeClass('page-header');jQuery('.bs-wrap-tooltip').tooltip();jQuery('.bs-wrap-popover').popover();jQuery('.bs-wrap-image').each(function(){var $img_wrap=jQuery(this),img_data=$img_wrap.data();$img_wrap.find('img').addClass(['img-',img_data.imgShape].join(''));});jQuery('.bs-wrap-nav').each(function(){var $nav_wrap=jQuery(this),nav_data=$nav_wrap.data(),nav_class=['nav'];for(var key in nav_data){var value=nav_data[key];switch(key){case'navType':nav_class.push(['nav-',value].join(''));break;case'navStacked':if(value)nav_class.push('nav-stacked');break;case'navJustified':if(value)nav_class.push('nav-justified');break;}}$nav_wrap.find('ul:first').addClass(nav_class.join(' '));var $nav=$nav_wrap.find('.nav');$nav.find('div.li > *').unwrap();$nav.find('li').attr('role','presentation');$nav.find('.curid').parent('li').addClass('active');$nav.find('.curid').contents().unwrap();$nav.find('li ul').addClass('dropdown-menu').parent('li').addClass('dropdown');$nav.find('.dropdown div.li').replaceWith(function(){return jQuery('<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" />').html(jQuery(this).contents())});$nav.find('li.dropdown').contents().filter(function(){return this.nodeType===3&&this.data.trim().length>0}).wrap('<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" />');$nav.find('.dropdown-toggle').append(' <span class="caret"/>');if($nav_wrap.find('.tab-pane').length){if(!$nav_wrap.find('.tab-content').length){$nav_wrap.find('.tab-pane').wrapAll(jQuery('<div class="tab-content"/>'));}$nav.find('a').attr('data-toggle','tab').attr('role','tab');if(nav_data.navFade){$nav_wrap.find('.tab-content .tab-pane').addClass('fade');}$nav.find('a:first').tab('show');}var $icon_links=$nav.find('li .dw-icons + a');if($icon_links.length){jQuery.each($icon_links,function(){var $link=jQuery(this),$icon=$link.prev();$icon.prependTo($link);$icon.after(' ');});}jQuery(window).on('hashchange',function(){jQuery('.bs-wrap-nav .nav a[href="'+location.hash+'"]').tab('show');});});jQuery('.bs-wrap-button').each(function(){var $btn_wrap=jQuery(this),btn_data=$btn_wrap.data(),$btn_link=$btn_wrap.find('a'),btn_class=['btn'];if(!$btn_link.length){var btn_label=$btn_wrap.html();$btn_wrap.html('');$btn_link=jQuery('<a href="javascript:void(0)"/>').html(btn_label);jQuery(this).append($btn_link);}for(key in btn_data){var value=btn_data[key];switch(key){case'btnType':case'btnSize':btn_class.push(['btn-',value].join(''));break;case'btnBlock':btn_class.push('btn-block');break;case'btnDisabled':btn_class.push('disabled');break;case'btnCollapse':$btn_link.attr('data-toggle','collapse');$btn_link.attr('data-target','#'+value);$btn_link.on('click',function(e){e.preventDefault();});break;case'btnModal':$btn_link.attr('data-toggle','modal');$btn_link.attr('data-target','#'+value);$btn_link.on('click',function(e){e.preventDefault();});break;case'btnIcon':var icon=['<i class="',value,'"/> '].join('');$btn_link.prepend(icon);break;}}$btn_link.addClass(btn_class.join(' '));$btn_link.attr('role','button');if($btn_link.hasClass('curid')){$btn_link.addClass('active');}if($btn_link.hasClass('urlextern')){$btn_link.removeClass('urlextern').addClass('wikilink1');}});jQuery('.bs-wrap-list-group').each(function(){var $list_wrap=jQuery(this);var $icon_links=$list_wrap.find('li .dw-icons + a');if($icon_links.length){jQuery.each($icon_links,function(){var $link=jQuery(this),$icon=$link.prev();$icon.prependTo($link);$icon.after(' ');});}$list_wrap.find('div.li').contents().unwrap();$list_wrap.find('ul').addClass('list-group');$list_wrap.find('ul > li').addClass('list-group-item');if($list_wrap.find('a').length){$list_wrap.find('a').parent().each(function(){var $list=jQuery(this);if($list.children().length>1){$list.wrapInner('<p class="list-group-item-text"/>');var $link=$list.find('a');$link.wrapInner('<h4 class="list-group-item-heading"/>');$link.prependTo($list);$list.find('p').appendTo($link);}});$list_wrap.find('a').parent().contents().unwrap();$list_wrap.find('ul a').parent().contents().unwrap();$list_wrap.addClass('list-group');$list_wrap.find('a').addClass('list-group-item');$list_wrap.find('a.curid').removeClass('curid').addClass('active');}$list_wrap.removeClass('hide');});jQuery('.bs-wrap-accordion').each(function(){var $accordion=jQuery(this),accordion_id=Math.random().toString(36).substr(2,9),is_collapsed=$accordion.hasClass('bs-wrap-accordion-collapsed');$accordion.find('.panel').each(function(){var $panel=jQuery(this),panel_id=accordion_id+'_'+Math.random().toString(36).substr(2,9);$panel.find('.panel-heading').wrapInner('<a role="button" data-toggle="collapse" data-parent="#'+accordion_id+'" href="#'+panel_id+'">');$panel.find('.panel-body').wrap('<div id="'+panel_id+'" class="panel-collapse collapse" role="tabpanel">');});$accordion.attr('id',accordion_id);if($accordion.find('.panel-collapse').length>1&&!is_collapsed){$accordion.find('.panel-collapse').first().addClass('in');}});jQuery('.bs-wrap-carousel').each(function(){var $carousel=jQuery(this),carousel_id=Math.random().toString(36).substr(2,9),$images=$carousel.find('img'),$slides=$carousel.find('.bs-wrap-slide'),$caption=$carousel.find('.bs-wrap-caption'),$indicators=$carousel.find('ol');$carousel.attr('id',carousel_id);$images.removeClass('media').removeClass('medialeft').removeClass('mediaright').removeClass('mediacenter');$images.addClass('center-block');if(!$slides.length){$images.wrap('<div class="item"/>');}if($caption.length){$caption.removeClass('caption').addClass('carousel-caption');}$carousel.find('.carousel-control').attr('href','#'+carousel_id);for(var i=0;i<$images.length;i++){$indicators.append('<li data-target="#'+carousel_id+'" data-slide-to="'+i+'"></li>');}$carousel.find('.item').first().addClass('active');$indicators.find('li').first().addClass('active');});jQuery('.bs-wrap-panel').each(function(){var $panel=jQuery(this),$panel_body=$panel.find('.panel-body'),$panel_heading=$panel.find('.panel-heading'),$first_title=$panel_body.find('> h4:first');if($first_title.length&&!$panel_heading.length){var $panel_heading=jQuery('<div class="panel-heading"></div>');$first_title.addClass('panel-title');$panel_heading.append($first_title);$panel.prepend($panel_heading);}});jQuery('.bs-wrap-modal').each(function(){if(jQuery(this).attr('data-show')==true){jQuery(this).modal('show');}else{jQuery(this).modal('hide');}});});jQuery(function(){const $extmgr=jQuery('#extension__manager');$extmgr.on('click','button.uninstall',function(e){if(!window.confirm(LANG.plugins.extension.reallydel)){e.preventDefault();return false;}return true;});$extmgr.on('click','a.extension_screenshot',function(e){e.preventDefault();const image_href=jQuery(this).attr("href");let $lightbox=jQuery('#plugin__extensionlightbox');if(!$lightbox.length){$lightbox=jQuery('<div id="plugin__extensionlightbox"><p>'+LANG.plugins.extension.close+'</p><div></div></div>').appendTo(jQuery('body')).hide().on('click',function(){$lightbox.hide();});}$lightbox .show().find('div').html('<img src="'+image_href+'" />');return false;});$extmgr.on('click','button.disable, button.enable',function(e){e.preventDefault();const $btn=jQuery(this);const $section=$btn.parents('section');$btn.attr('disabled','disabled');$btn.css('cursor','wait');jQuery.get(DOKU_BASE+'lib/exe/ajax.php',{call:'plugin_extension',ext:$section.data('ext'),act:'toggle',sectok:$btn.parents('form').find('input[name=sectok]').val()},function(html){$section.replaceWith(html);}).fail(function(data){$btn.css('cursor','').removeAttr('disabled');window.alert(data.responseText);});});if($extmgr.find('.plugins, .templates').hasClass('active')){const $extlist=jQuery('#extension__list');const $displayOpts=jQuery('<p>').appendTo($extmgr.find('.panelHeader'));const $label=jQuery('<label />').appendTo($displayOpts);const $checkbox=jQuery('<input />',{type:'checkbox'}).appendTo($label);$label.append(' '+LANG.plugins.extension.filter);let filter=!!window.localStorage.getItem('ext_filter');$checkbox.prop('checked',filter);$extlist.toggleClass('filter',filter);$checkbox.on('change',function(){filter=this.checked;window.localStorage.setItem('ext_filter',filter?'1':'');$extlist.toggleClass('filter',filter);});}});(function($){"use strict";var Filelisting=function(element,options){this.$capiton=$(element).find('.plugin__filelisting_capiton');this.$collapsible=$(element).find('.plugin__filelisting_collapsible');this.$content=$(element).find('.plugin__filelisting_content');this.$headertable=$(element).find('.plugin__filelisting_headertable');this.$bodytable=$(element).find('.plugin__filelisting_bodytable');this.$footer=$(element).find('.plugin__filelisting_footer');this.options=$.extend({},$.fn.dokuwiki_plugin_filelisting.defaults,options);this.storageKey='plugin_filelisting';if(this.options.remember_state_per_page){this.storageKey+='/'+this.options.pageId;}this.initToggleButton();this.initAjaxDirectoryExpand();this.initFilter();this.initSorting();this.initDelete();};Filelisting.prototype.getToggleStatus=function(){if(!localStorage.getItem(this.storageKey)){return this.options.defaultToggle;}return localStorage.getItem(this.storageKey);};Filelisting.prototype.setToggleStatus=function(status){if(status!=='visible'&&status!=='hidden'){throw'status must be "visible" or "hidden"';}localStorage.setItem(this.storageKey,status);};Filelisting.prototype.initToggleButton=function(){var $toggleButton=$('<div>').text(this.options.toggleVisible).css({float:'right',cursor:'pointer'}).addClass('plugin__filelisting_toggle').appendTo(this.$capiton);if(this.getToggleStatus()==='hidden'){this.$collapsible.hide();$toggleButton.text(this.options.toggleHidden);}$toggleButton.click($.proxy(function(){if(this.$collapsible.is(':hidden')){this.$collapsible.slideDown();$toggleButton.text(this.options.toggleVisible);this.setToggleStatus('visible');}else{this.$collapsible.slideUp();$toggleButton.text(this.options.toggleHidden);this.setToggleStatus('hidden');}},this));};Filelisting.prototype.initAjaxDirectoryExpand=function(){this.$content.find('tbody').on('click','tr[data-namespace] a',$.proxy(function(event){event.preventDefault();var $row=$(event.target).closest('tr'),namespace=$row.data('namespace');var $children=$row.nextAll('[data-childOf="'+namespace+'"]'),$descendants=$row.nextAll('[data-childOf^="'+namespace+'"]');if($row.data('isExpanded')){$row.children('.plugin__filelisting_cell_icon').html(this.options.dirClosedIcon);$descendants.each(function(){if($(this).is(':visible')){$(this).data('reopenAs','visible');}else{$(this).data('reopenAs','hidden');}}).hide();$row.data('isExpanded',false);}else if($row.data('isLoaded')){$row.children('.plugin__filelisting_cell_icon').html(this.options.dirOpenedIcon);$children.show();$descendants.each(function(){if($(this).data('reopenAs')==='visible'){$(this).show();}});$row.data('isExpanded',true);this.$content.trigger('expand',namespace);}else{$row.children('.plugin__filelisting_cell_icon').html(this.options.loadingIcon);var data={};data['call']='plugin_filelisting';data['namespace']=namespace;data['baseNamespace']=this.options.baseNamespace;$.post(DOKU_BASE+'lib/exe/ajax.php',data,$.proxy(function(html){$row.children('.plugin__filelisting_cell_icon').html(this.options.dirOpenedIcon);$row.after(html);$row.data('isLoaded',true);this.$content.trigger('nsload',namespace);$row.data('isExpanded',true);this.$content.trigger('expand',namespace);},this),'html').fail($.proxy(function(){$row.children('.plugin__filelisting_cell_icon').html(this.options.dirClosedIcon);},this));}},this));this.$content.on('namespaceFilesChanged',$.proxy(function(event,namespace){var $row=$('tr[data-namespace="'+namespace+'"]');if($row.length&&!$row.data('isLoaded')){return;}var data={};data['call']='plugin_filelisting';data['namespace']=namespace;data['baseNamespace']=this.options.baseNamespace;data['filesOnly']=true;$.post(DOKU_BASE+'lib/exe/ajax.php',data,$.proxy(function(html){var fileRows=$(html);if($row.length&&!$row.data('isExpanded')){fileRows.hide();}var $filesInNamespace=$('tr[data-childOf="'+namespace+'"]').not('[data-namespace]');if($filesInNamespace.length){$filesInNamespace.first().replaceWith(fileRows);$filesInNamespace.remove();}else if($('tr[data-childOf="'+namespace+'"]').length){$('tr[data-childOf="'+namespace+'"]').last().after(fileRows);}else{this.$content.find('tbody').append(fileRows);}this.$content.trigger('nsload',namespace);},this),'html');},this))};Filelisting.prototype.initFilter=function(){this.$filter=$('<label>'+this.options.filterLabel+': <input></label>').appendTo(this.$footer);var $input=this.$filter.find('input');$input.on('keyup',$.proxy(this.applyFilter,this));$input.on('keydown',function(event){if(event.keyCode===13){event.preventDefault();return false;}});this.$content.on('expand',$.proxy(this.applyFilter,this));};Filelisting.prototype.applyFilter=function(){var filter=this.$filter.find('input').val(),escaped=filter.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'),globbing=escaped.replace(/\\\*/g,'.*').replace(/\\\?/g,'.'),regex=new RegExp(globbing),$rows=this.$content.find('tbody tr'),$files=$rows.not('[data-namespace]'),$dirs=$rows.not($files),filterCallback=function(){var $row=$(this),text=$row.find('td.plugin__filelisting_cell_name a').text();if(text.match(regex)){$row.show();}else{$row.hide();}};$files.filter('[data-childOf="'+this.options.baseNamespace+'"]').each(filterCallback);$dirs.filter(function(){return $(this).data('isExpanded');}).each(function(){var namespace=$(this).data('namespace');$files.filter('[data-childOf="'+namespace+'"]').each(filterCallback);});};Filelisting.prototype.initSorting=function(){this.$sortHeader=[];this.$content.find('thead th').wrapInner('<a href="#">');this.$content.find('thead th a').prepend('<span>');this.$content.find('thead th a').on('click',$.proxy(function(event){event.preventDefault();this.$sortHeader=$(event.target).closest('th');var $order=this.$sortHeader.find('span');this.$content.find('thead th').not(this.$sortHeader).find('span').text('');if($order.text()===''||$order.text()===this.options.sortDesc){$order.text(this.options.sortAsc);}else{$order.text(this.options.sortDesc);}this.sortBy();},this));this.$content.on('nsload',$.proxy(function(event,namespace){this.sortBy(namespace);},this));};Filelisting.prototype.sortBy=function(namespace){if(this.$sortHeader.length===0)return;if(namespace===undefined){namespace=this.options.baseNamespace;}var $root=this.$content.find('tbody tr[data-namespace="'+namespace+'"]'),$rows=this.$content.find('tbody tr[data-childOf="'+namespace+'"]'),$files=$rows.not('[data-namespace]'),$dirs=$rows.not($files),sortCallback=$.proxy(function(a,b){var colspan=this.$headertable.find('th').first().attr('colspan'),index=this.$sortHeader.index()+(colspan-1),order=1;if(this.$sortHeader.find('span').text()===this.options.sortDesc){order=-1;}var dataA=$(a).find('td').eq(index).data('sort'),dataB=$(b).find('td').eq(index).data('sort');if(dataA<dataB){return-order;}else if(dataA>dataB){return order;}return 0;},this);$dirs.sort(sortCallback);$files.sort(sortCallback);if($root.length===0){this.$content.find('tbody').append($dirs,$files);}else{$root.after($dirs,$files);}$dirs.each($.proxy(function(index,element){var namespace=$(element).data('namespace'),$descendants=$(element).siblings('[data-childOf^="'+namespace+'"]');$descendants.insertAfter(element);this.sortBy(namespace);},this));};Filelisting.prototype.initDelete=function(){var $deleteButton=this.$collapsible.find('button[name="do[plugin_filelisting_delete]"]');$deleteButton.on('click',$.proxy(function(event){var deleteFiles=window.confirm(this.options.deleteConfirm);if(!deleteFiles){event.preventDefault();}},this));this.toggleDeleteButton();this.$content.on('change','input[type=checkbox]',$.proxy(this.toggleDeleteButton,this));};Filelisting.prototype.toggleDeleteButton=function(){var $deleteButton=this.$collapsible.find('button[name="do[plugin_filelisting_delete]"]');if(this.$content.find('input[type=checkbox]:checked').length===0){$deleteButton.hide();}else{$deleteButton.show();}};$.fn.dokuwiki_plugin_filelisting=function(options){return this.each(function(){new Filelisting(this,options);});};$.fn.dokuwiki_plugin_filelisting.defaults={toggleVisible:'▼',toggleHidden:'▲',pageId:'',defaultToggle:'visible',dirOpenedIcon:'',dirClosedIcon:'',loadingIcon:'',baseNamespace:'',filterLabel:'Filter',sortAsc:'↓',sortDesc:'↑',deleteConfirm:LANG.plugins.filelisting.delete_confirm};}(window.jQuery));jQuery(function(){if(JSINFO===undefined||LANG===undefined){console.log('filelisting: JSINFO or LANG undefined');return;}var options={};options.pageId=JSINFO.id;var defaulttoggle=JSINFO.plugin.filelisting.defaulttoggle;if(defaulttoggle==='1'){options.defaultToggle='visible';}else{options.defaultToggle='hidden';}options.remember_state_per_page=JSINFO.plugin.filelisting.remember_state_per_page;options.dirOpenedIcon=JSINFO.plugin.filelisting.dirOpenedIcon;options.dirClosedIcon=JSINFO.plugin.filelisting.dirClosedIcon;options.loadingIcon=JSINFO.plugin.filelisting.loadingIcon;var $plugin__filelisting=jQuery('.plugin__filelisting');var ns=$plugin__filelisting.data("namespace");if(ns!==undefined){options.baseNamespace=ns;}else{options.baseNamespace=JSINFO.namespace;}options.filterLabel=LANG.plugins.filelisting.filter_label;options.deleteConfirm=LANG.plugins.filelisting.delete_confirm;$plugin__filelisting.dokuwiki_plugin_filelisting(options);$plugin__filelisting.each(function adjustTableWidthForScrollbar(index,container){var $bodyTable=jQuery(container).find('.plugin__filelisting_bodytable table');var $headerWrapper=jQuery(container).find('.plugin__filelisting_headertable');var tablediff=$bodyTable.width()-$headerWrapper.find('table').width();var originalPaddingRight=parseInt($headerWrapper.css('padding-right'),10);var newPaddingRight=originalPaddingRight-tablediff;$headerWrapper.css('padding-right',newPaddingRight+'px');});});(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){(function(global){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var SimpleLightbox=function(){function SimpleLightbox(elements,options){var _this=this;_classCallCheck(this,SimpleLightbox);_defineProperty(this,"defaultOptions",{sourceAttr:'href',overlay:true,overlayOpacity:0.7,spinner:true,nav:true,navText:['&lsaquo;','&rsaquo;'],captions:true,captionDelay:0,captionSelector:'img',captionType:'attr',captionsData:'title',captionPosition:'bottom',captionClass:'',captionHTML:true,close:true,closeText:'&times;',swipeClose:true,showCounter:true,fileExt:'png|jpg|jpeg|gif|webp',animationSlide:true,animationSpeed:250,preloading:true,enableKeyboard:true,loop:true,rel:false,docClose:true,swipeTolerance:50,className:'simple-lightbox',widthRatio:0.8,heightRatio:0.9,scaleImageToRatio:false,disableRightClick:false,disableScroll:true,alertError:true,alertErrorMessage:'Image not found, next image will be loaded',additionalHtml:false,history:true,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:'has-lightbox',rtl:false,fixedClass:'sl-fixed',fadeSpeed:300,uniqueImages:true,focus:true,scrollZoom:true,scrollZoomFactor:0.5,download:false});_defineProperty(this,"transitionPrefix",void 0);_defineProperty(this,"isPassiveEventsSupported",void 0);_defineProperty(this,"transitionCapable",false);_defineProperty(this,"isTouchDevice",'ontouchstart'in window);_defineProperty(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform));_defineProperty(this,"initialLocationHash",void 0);_defineProperty(this,"pushStateSupport",'pushState'in history);_defineProperty(this,"isOpen",false);_defineProperty(this,"isAnimating",false);_defineProperty(this,"isClosing",false);_defineProperty(this,"isFadeIn",false);_defineProperty(this,"urlChangedOnce",false);_defineProperty(this,"hashReseted",false);_defineProperty(this,"historyHasChanges",false);_defineProperty(this,"historyUpdateTimeout",null);_defineProperty(this,"currentImage",void 0);_defineProperty(this,"eventNamespace",'simplelightbox');_defineProperty(this,"domNodes",{});_defineProperty(this,"loadedImages",[]);_defineProperty(this,"initialImageIndex",0);_defineProperty(this,"currentImageIndex",0);_defineProperty(this,"initialSelector",null);_defineProperty(this,"globalScrollbarWidth",0);_defineProperty(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:false,imageLeft:0,zoomed:false,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:false,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:false,touchmoveCount:0});this.options=Object.assign(this.defaultOptions,options);this.isPassiveEventsSupported=this.checkPassiveEventsSupport();if(typeof elements==='string'){this.initialSelector=elements;this.elements=Array.from(document.querySelectorAll(elements));}else{this.elements=typeof elements.length!=='undefined'&&elements.length>0?Array.from(elements):[elements];}this.relatedElements=[];this.transitionPrefix=this.calculateTransitionPrefix();this.transitionCapable=this.transitionPrefix!==false;this.initialLocationHash=this.hash;if(this.options.rel){this.elements=this.getRelated(this.options.rel);}if(this.options.uniqueImages){var imgArr=[];this.elements=Array.from(this.elements).filter(function(element){var src=element.getAttribute(_this.options.sourceAttr);if(imgArr.indexOf(src)===-1){imgArr.push(src);return true;}return false;});}this.createDomNodes();if(this.options.close){this.domNodes.wrapper.appendChild(this.domNodes.closeButton);}if(this.options.nav){this.domNodes.wrapper.appendChild(this.domNodes.navigation);}if(this.options.spinner){this.domNodes.wrapper.appendChild(this.domNodes.spinner);}this.addEventListener(this.elements,'click.'+this.eventNamespace,function(event){if(_this.isValidLink(event.currentTarget)){event.preventDefault();if(_this.isAnimating){return false;}_this.initialImageIndex=_this.elements.indexOf(event.currentTarget);_this.openImage(event.currentTarget);}});if(this.options.docClose){this.addEventListener(this.domNodes.wrapper,['click.'+this.eventNamespace,'touchstart.'+this.eventNamespace],function(event){if(_this.isOpen&&event.target===event.currentTarget){_this.close();}});}if(this.options.disableRightClick){this.addEventListener(document.body,'contextmenu.'+this.eventNamespace,function(event){if(event.target.parentElement.classList.contains("sl-image")){event.preventDefault();}});}if(this.options.enableKeyboard){this.addEventListener(document.body,'keyup.'+this.eventNamespace,this.throttle(function(event){_this.controlCoordinates.swipeDiff=0;if(_this.isAnimating&&event.key==='Escape'){_this.currentImage.setAttribute('src','');_this.isAnimating=false;_this.close();return;}if(_this.isOpen){event.preventDefault();if(event.key==='Escape'){_this.close();}if(!_this.isAnimating&&['ArrowLeft','ArrowRight'].indexOf(event.key)>-1){_this.loadImage(event.key==='ArrowRight'?1:-1);}}},this.options.throttleInterval));}this.addEvents();}_createClass(SimpleLightbox,[{key:"checkPassiveEventsSupport",value:function checkPassiveEventsSupport(){var supportsPassive=false;try{var opts=Object.defineProperty({},'passive',{get:function get(){supportsPassive=true;}});window.addEventListener("testPassive",null,opts);window.removeEventListener("testPassive",null,opts);}catch(e){}return supportsPassive;}},{key:"getCaptionElement",value:function getCaptionElement(elem){if(this.options.captionSelector.startsWith('+')){var selector=this.options.captionSelector.replace(/^\+/,'').trimStart();var sibling=elem.nextElementSibling;if(sibling&&sibling.matches(selector)){return sibling;}return false;}else if(this.options.captionSelector.startsWith('>')){var _selector=this.options.captionSelector.replace(/^>/,'').trimStart();return elem.querySelector(_selector);}else{return elem.querySelector(this.options.captionSelector);}}},{key:"generateQuerySelector",value:function generateQuerySelector(elem){var tagName=elem.tagName,id=elem.id,className=elem.className,parentNode=elem.parentNode;if(tagName==='HTML')return'HTML';var str=tagName;str+=id!==''?"#".concat(id):'';if(className){var classes=className.trim().split(/\s/);for(var i=0;i<classes.length;i++){str+=".".concat(classes[i]);}}var childIndex=1;for(var e=elem;e.previousElementSibling;e=e.previousElementSibling){childIndex+=1;}str+=":nth-child(".concat(childIndex,")");return"".concat(this.generateQuerySelector(parentNode)," > ").concat(str);}},{key:"createDomNodes",value:function createDomNodes(){this.domNodes.overlay=document.createElement('div');this.domNodes.overlay.classList.add('sl-overlay');this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity;this.domNodes.closeButton=document.createElement('button');this.domNodes.closeButton.classList.add('sl-close');this.domNodes.closeButton.innerHTML=this.options.closeText;this.domNodes.spinner=document.createElement('div');this.domNodes.spinner.classList.add('sl-spinner');this.domNodes.spinner.innerHTML='<div></div>';this.domNodes.navigation=document.createElement('div');this.domNodes.navigation.classList.add('sl-navigation');this.domNodes.navigation.innerHTML="<button class=\"sl-prev\">".concat(this.options.navText[0],"</button><button class=\"sl-next\">").concat(this.options.navText[1],"</button>");this.domNodes.counter=document.createElement('div');this.domNodes.counter.classList.add('sl-counter');this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>';this.domNodes.download=document.createElement('div');this.domNodes.download.classList.add('sl-download');this.domNodes.downloadLink=document.createElement('a');this.domNodes.downloadLink.setAttribute('download','');this.domNodes.downloadLink.textContent=this.options.download;this.domNodes.download.appendChild(this.domNodes.downloadLink);this.domNodes.caption=document.createElement('div');this.domNodes.caption.classList.add('sl-caption','pos-'+this.options.captionPosition);if(this.options.captionClass){var _this$domNodes$captio;var captionClasses=this.options.captionClass.split(/[\s,]+/);(_this$domNodes$captio=this.domNodes.caption.classList).add.apply(_this$domNodes$captio,_toConsumableArray(captionClasses));}this.domNodes.image=document.createElement('div');this.domNodes.image.classList.add('sl-image');this.domNodes.wrapper=document.createElement('div');this.domNodes.wrapper.classList.add('sl-wrapper');this.domNodes.wrapper.setAttribute('tabindex',-1);this.domNodes.wrapper.setAttribute('role','dialog');this.domNodes.wrapper.setAttribute('aria-hidden',false);if(this.options.className){this.domNodes.wrapper.classList.add(this.options.className);}if(this.options.rtl){this.domNodes.wrapper.classList.add('sl-dir-rtl');}}},{key:"throttle",value:function throttle(func,limit){var inThrottle;return function(){if(!inThrottle){func.apply(this,arguments);inThrottle=true;setTimeout(function(){return inThrottle=false;},limit);}};}},{key:"isValidLink",value:function isValidLink(element){return!this.options.fileExt||element.getAttribute(this.options.sourceAttr)&&new RegExp('('+this.options.fileExt+')($|\\?.*$)','i').test(element.getAttribute(this.options.sourceAttr));}},{key:"calculateTransitionPrefix",value:function calculateTransitionPrefix(){var s=(document.body||document.documentElement).style;return'transition'in s?'':'WebkitTransition'in s?'-webkit-':'MozTransition'in s?'-moz-':'OTransition'in s?'-o':false;}},{key:"getScrollbarWidth",value:function getScrollbarWidth(){var scrollbarWidth=0;var scrollDiv=document.createElement('div');scrollDiv.classList.add('sl-scrollbar-measure');document.body.appendChild(scrollDiv);scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;document.body.removeChild(scrollDiv);return scrollbarWidth;}},{key:"toggleScrollbar",value:function toggleScrollbar(type){var scrollbarWidth=0;var fixedElements=[].slice.call(document.querySelectorAll('.'+this.options.fixedClass));if(type==='hide'){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left);}if(document.body.clientWidth<fullWindowWidth||this.isAppleDevice){var paddingRight=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);scrollbarWidth=this.getScrollbarWidth();document.body.dataset.originalPaddingRight=paddingRight;if(scrollbarWidth>0||scrollbarWidth==0&&this.isAppleDevice){document.body.classList.add('hidden-scroll');document.body.style.paddingRight=paddingRight+scrollbarWidth+'px';fixedElements.forEach(function(element){var actualPadding=element.style.paddingRight;var calculatedPadding=window.getComputedStyle(element)['padding-right'];element.dataset.originalPaddingRight=actualPadding;element.style.paddingRight="".concat(parseFloat(calculatedPadding)+scrollbarWidth,"px");});}}}else{document.body.classList.remove('hidden-scroll');document.body.style.paddingRight=document.body.dataset.originalPaddingRight+'px';fixedElements.forEach(function(element){var padding=element.dataset.originalPaddingRight;if(typeof padding!=='undefined'){element.style.paddingRight=padding;}});}return scrollbarWidth;}},{key:"close",value:function close(){var _this2=this;if(!this.isOpen||this.isAnimating||this.isClosing){return false;}this.isClosing=true;var element=this.relatedElements[this.currentImageIndex];element.dispatchEvent(new Event('close.simplelightbox'));if(this.options.history){this.historyHasChanges=false;if(!this.hashReseted){this.resetHash();}}this.removeEventListener(document,'focusin.'+this.eventNamespace);this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed);this.fadeOut(document.querySelectorAll('.sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter'),this.options.fadeSpeed,function(){if(_this2.options.disableScroll){_this2.toggleScrollbar('show');}if(_this2.options.htmlClass&&_this2.options.htmlClass!==''){document.querySelector('html').classList.remove(_this2.options.htmlClass);}document.body.removeChild(_this2.domNodes.wrapper);if(_this2.options.overlay){document.body.removeChild(_this2.domNodes.overlay);}_this2.domNodes.additionalHtml=null;_this2.domNodes.download=null;element.dispatchEvent(new Event('closed.simplelightbox'));_this2.isClosing=false;});this.currentImage=null;this.isOpen=false;this.isAnimating=false;for(var key in this.controlCoordinates){this.controlCoordinates[key]=0;}this.controlCoordinates.mousedown=false;this.controlCoordinates.zoomed=false;this.controlCoordinates.capture=false;this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom);this.controlCoordinates.doubleTapped=false;}},{key:"hash",get:function get(){return window.location.hash.substring(1);}},{key:"preload",value:function preload(){var _this3=this;var index=this.currentImageIndex,length=this.relatedElements.length,next=index+1<0?length-1:index+1>=length-1?0:index+1,prev=index-1<0?length-1:index-1>=length-1?0:index-1,nextImage=new Image(),prevImage=new Image();nextImage.addEventListener('load',function(event){var src=event.target.getAttribute('src');if(_this3.loadedImages.indexOf(src)===-1){_this3.loadedImages.push(src);}_this3.relatedElements[index].dispatchEvent(new Event('nextImageLoaded.'+_this3.eventNamespace));});nextImage.setAttribute('src',this.relatedElements[next].getAttribute(this.options.sourceAttr));prevImage.addEventListener('load',function(event){var src=event.target.getAttribute('src');if(_this3.loadedImages.indexOf(src)===-1){_this3.loadedImages.push(src);}_this3.relatedElements[index].dispatchEvent(new Event('prevImageLoaded.'+_this3.eventNamespace));});prevImage.setAttribute('src',this.relatedElements[prev].getAttribute(this.options.sourceAttr));}},{key:"loadImage",value:function loadImage(direction){var _this4=this;var slideDirection=direction;if(this.options.rtl){direction=-direction;}this.relatedElements[this.currentImageIndex].dispatchEvent(new Event('change.'+this.eventNamespace));this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((direction===1?'next':'prev')+'.'+this.eventNamespace));var newIndex=this.currentImageIndex+direction;if(this.isAnimating||(newIndex<0||newIndex>=this.relatedElements.length)&&this.options.loop===false){return false;}this.currentImageIndex=newIndex<0?this.relatedElements.length-1:newIndex>this.relatedElements.length-1?0:newIndex;this.domNodes.counter.querySelector('.sl-current').innerHTML=this.currentImageIndex+1;if(this.options.animationSlide){this.slide(this.options.animationSpeed/1000,-100*slideDirection-this.controlCoordinates.swipeDiff+'px');}this.fadeOut(this.domNodes.image,this.options.fadeSpeed,function(){_this4.isAnimating=true;if(!_this4.isClosing){setTimeout(function(){var element=_this4.relatedElements[_this4.currentImageIndex];if(!_this4.currentImage)return;_this4.currentImage.setAttribute('src',element.getAttribute(_this4.options.sourceAttr));if(_this4.loadedImages.indexOf(element.getAttribute(_this4.options.sourceAttr))===-1){_this4.show(_this4.domNodes.spinner);}if(_this4.domNodes.image.contains(_this4.domNodes.caption)){_this4.domNodes.image.removeChild(_this4.domNodes.caption);}_this4.adjustImage(slideDirection);if(_this4.options.preloading)_this4.preload();},100);}else{_this4.isAnimating=false;}});}},{key:"adjustImage",value:function adjustImage(direction){var _this5=this;if(!this.currentImage){return false;}var tmpImage=new Image(),windowWidth=window.innerWidth*this.options.widthRatio,windowHeight=window.innerHeight*this.options.heightRatio;tmpImage.setAttribute('src',this.currentImage.getAttribute('src'));this.currentImage.dataset.scale=1;this.currentImage.dataset.translateX=0;this.currentImage.dataset.translateY=0;this.zoomPanElement(0,0,1);tmpImage.addEventListener('error',function(event){_this5.relatedElements[_this5.currentImageIndex].dispatchEvent(new Event('error.'+_this5.eventNamespace));_this5.isAnimating=false;_this5.isOpen=true;_this5.domNodes.spinner.style.display='none';var dirIsDefined=direction===1||direction===-1;if(_this5.initialImageIndex===_this5.currentImageIndex&&dirIsDefined){return _this5.close();}if(_this5.options.alertError){alert(_this5.options.alertErrorMessage);}_this5.loadImage(dirIsDefined?direction:1);});tmpImage.addEventListener('load',function(event){if(typeof direction!=='undefined'){_this5.relatedElements[_this5.currentImageIndex].dispatchEvent(new Event('changed.'+_this5.eventNamespace));_this5.relatedElements[_this5.currentImageIndex].dispatchEvent(new Event((direction===1?'nextDone':'prevDone')+'.'+_this5.eventNamespace));}if(_this5.options.history){_this5.updateURL();}if(_this5.loadedImages.indexOf(_this5.currentImage.getAttribute('src'))===-1){_this5.loadedImages.push(_this5.currentImage.getAttribute('src'));}var imageWidth=event.target.width,imageHeight=event.target.height;if(_this5.options.scaleImageToRatio||imageWidth>windowWidth||imageHeight>windowHeight){var ratio=imageWidth/imageHeight>windowWidth/windowHeight?imageWidth/windowWidth:imageHeight/windowHeight;imageWidth/=ratio;imageHeight/=ratio;}_this5.domNodes.image.style.top=(window.innerHeight-imageHeight)/2+'px';_this5.domNodes.image.style.left=(window.innerWidth-imageWidth-_this5.globalScrollbarWidth)/2+'px';_this5.domNodes.image.style.width=imageWidth+'px';_this5.domNodes.image.style.height=imageHeight+'px';_this5.domNodes.spinner.style.display='none';if(_this5.options.focus){_this5.forceFocus();}_this5.fadeIn(_this5.currentImage,_this5.options.fadeSpeed,function(){if(_this5.options.focus){_this5.domNodes.wrapper.focus();}});_this5.isOpen=true;var captionContainer,captionText;if(typeof _this5.options.captionSelector==='string'){captionContainer=_this5.options.captionSelector==='self'?_this5.relatedElements[_this5.currentImageIndex]:_this5.getCaptionElement(_this5.relatedElements[_this5.currentImageIndex]);}else if(typeof _this5.options.captionSelector==='function'){captionContainer=_this5.options.captionSelector(_this5.relatedElements[_this5.currentImageIndex]);}if(_this5.options.captions&&captionContainer){if(_this5.options.captionType==='data'){captionText=captionContainer.dataset[_this5.options.captionsData];}else if(_this5.options.captionType==='text'){captionText=captionContainer.innerHTML;}else{captionText=captionContainer.getAttribute(_this5.options.captionsData);}}if(!_this5.options.loop){if(_this5.currentImageIndex===0){_this5.hide(_this5.domNodes.navigation.querySelector('.sl-prev'));}if(_this5.currentImageIndex>=_this5.relatedElements.length-1){_this5.hide(_this5.domNodes.navigation.querySelector('.sl-next'));}if(_this5.currentImageIndex>0){_this5.show(_this5.domNodes.navigation.querySelector('.sl-prev'));}if(_this5.currentImageIndex<_this5.relatedElements.length-1){_this5.show(_this5.domNodes.navigation.querySelector('.sl-next'));}}else{if(_this5.relatedElements.length===1){_this5.hide(_this5.domNodes.navigation.querySelectorAll('.sl-prev, .sl-next'));}else{_this5.show(_this5.domNodes.navigation.querySelectorAll('.sl-prev, .sl-next'));}}if(direction===1||direction===-1){if(_this5.options.animationSlide){_this5.slide(0,100*direction+'px');setTimeout(function(){_this5.slide(_this5.options.animationSpeed/1000,0+'px');},50);}_this5.fadeIn(_this5.domNodes.image,_this5.options.fadeSpeed,function(){_this5.isAnimating=false;_this5.setCaption(captionText,imageWidth);});}else{_this5.isAnimating=false;_this5.setCaption(captionText,imageWidth);}if(_this5.options.additionalHtml&&!_this5.domNodes.additionalHtml){_this5.domNodes.additionalHtml=document.createElement('div');_this5.domNodes.additionalHtml.classList.add('sl-additional-html');_this5.domNodes.additionalHtml.innerHTML=_this5.options.additionalHtml;_this5.domNodes.image.appendChild(_this5.domNodes.additionalHtml);}if(_this5.options.download){_this5.domNodes.downloadLink.setAttribute('href',_this5.currentImage.getAttribute('src'));}});}},{key:"zoomPanElement",value:function zoomPanElement(targetOffsetX,targetOffsetY,targetScale){this.currentImage.style[this.transitionPrefix+'transform']='translate('+targetOffsetX+','+targetOffsetY+') scale('+targetScale+')';}},{key:"minMax",value:function minMax(value,min,max){return value<min?min:value>max?max:value;}},{key:"setZoomData",value:function setZoomData(initialScale,targetOffsetX,targetOffsetY){this.currentImage.dataset.scale=initialScale;this.currentImage.dataset.translateX=targetOffsetX;this.currentImage.dataset.translateY=targetOffsetY;}},{key:"hashchangeHandler",value:function hashchangeHandler(){if(this.isOpen&&this.hash===this.initialLocationHash){this.hashReseted=true;this.close();}}},{key:"addEvents",value:function addEvents(){var _this6=this;this.addEventListener(window,'resize.'+this.eventNamespace,function(event){if(_this6.isOpen){_this6.adjustImage();}});this.addEventListener(this.domNodes.closeButton,['click.'+this.eventNamespace,'touchstart.'+this.eventNamespace],this.close.bind(this));if(this.options.history){setTimeout(function(){_this6.addEventListener(window,'hashchange.'+_this6.eventNamespace,function(event){if(_this6.isOpen){_this6.hashchangeHandler();}});},40);}this.addEventListener(this.domNodes.navigation.getElementsByTagName('button'),'click.'+this.eventNamespace,function(event){if(!event.currentTarget.tagName.match(/button/i)){return true;}event.preventDefault();_this6.controlCoordinates.swipeDiff=0;_this6.loadImage(event.currentTarget.classList.contains('sl-next')?1:-1);});if(this.options.scrollZoom){var scale=1;this.addEventListener(this.domNodes.image,['mousewheel','DOMMouseScroll'],function(event){if(_this6.controlCoordinates.mousedown||_this6.isAnimating||_this6.isClosing||!_this6.isOpen){return true;}if(_this6.controlCoordinates.containerHeight==0){_this6.controlCoordinates.containerHeight=_this6.getDimensions(_this6.domNodes.image).height;_this6.controlCoordinates.containerWidth=_this6.getDimensions(_this6.domNodes.image).width;_this6.controlCoordinates.imgHeight=_this6.getDimensions(_this6.currentImage).height;_this6.controlCoordinates.imgWidth=_this6.getDimensions(_this6.currentImage).width;_this6.controlCoordinates.containerOffsetX=_this6.domNodes.image.offsetLeft;_this6.controlCoordinates.containerOffsetY=_this6.domNodes.image.offsetTop;_this6.controlCoordinates.initialOffsetX=parseFloat(_this6.currentImage.dataset.translateX);_this6.controlCoordinates.initialOffsetY=parseFloat(_this6.currentImage.dataset.translateY);}var delta=event.delta||event.wheelDelta;if(delta===undefined){delta=event.detail;}delta=Math.max(-1,Math.min(1,delta));scale+=delta*_this6.options.scrollZoomFactor*scale;scale=Math.max(1,Math.min(_this6.options.maxZoom,scale));_this6.controlCoordinates.targetScale=scale;var scrollTopPos=document.documentElement.scrollTop||document.body.scrollTop;_this6.controlCoordinates.pinchOffsetX=event.pageX;_this6.controlCoordinates.pinchOffsetY=event.pageY-scrollTopPos||0;_this6.controlCoordinates.limitOffsetX=(_this6.controlCoordinates.imgWidth*_this6.controlCoordinates.targetScale-_this6.controlCoordinates.containerWidth)/2;_this6.controlCoordinates.limitOffsetY=(_this6.controlCoordinates.imgHeight*_this6.controlCoordinates.targetScale-_this6.controlCoordinates.containerHeight)/2;_this6.controlCoordinates.scaleDifference=_this6.controlCoordinates.targetScale-_this6.controlCoordinates.initialScale;_this6.controlCoordinates.targetOffsetX=_this6.controlCoordinates.imgWidth*_this6.controlCoordinates.targetScale<=_this6.controlCoordinates.containerWidth?0:_this6.minMax(_this6.controlCoordinates.initialOffsetX-(_this6.controlCoordinates.pinchOffsetX-_this6.controlCoordinates.containerOffsetX-_this6.controlCoordinates.containerWidth/2-_this6.controlCoordinates.initialOffsetX)/(_this6.controlCoordinates.targetScale-_this6.controlCoordinates.scaleDifference)*_this6.controlCoordinates.scaleDifference,_this6.controlCoordinates.limitOffsetX*-1,_this6.controlCoordinates.limitOffsetX);_this6.controlCoordinates.targetOffsetY=_this6.controlCoordinates.imgHeight*_this6.controlCoordinates.targetScale<=_this6.controlCoordinates.containerHeight?0:_this6.minMax(_this6.controlCoordinates.initialOffsetY-(_this6.controlCoordinates.pinchOffsetY-_this6.controlCoordinates.containerOffsetY-_this6.controlCoordinates.containerHeight/2-_this6.controlCoordinates.initialOffsetY)/(_this6.controlCoordinates.targetScale-_this6.controlCoordinates.scaleDifference)*_this6.controlCoordinates.scaleDifference,_this6.controlCoordinates.limitOffsetY*-1,_this6.controlCoordinates.limitOffsetY);_this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX+"px",_this6.controlCoordinates.targetOffsetY+"px",_this6.controlCoordinates.targetScale);if(_this6.controlCoordinates.targetScale>1){_this6.controlCoordinates.zoomed=true;if((!_this6.domNodes.caption.style.opacity||_this6.domNodes.caption.style.opacity>0)&&_this6.domNodes.caption.style.display!=='none'){_this6.fadeOut(_this6.domNodes.caption,_this6.options.fadeSpeed);}}else{if(_this6.controlCoordinates.initialScale===1){_this6.controlCoordinates.zoomed=false;if(_this6.domNodes.caption.style.display==='none'){_this6.fadeIn(_this6.domNodes.caption,_this6.options.fadeSpeed);}}_this6.controlCoordinates.initialPinchDistance=null;_this6.controlCoordinates.capture=false;}_this6.controlCoordinates.initialPinchDistance=_this6.controlCoordinates.targetPinchDistance;_this6.controlCoordinates.initialScale=_this6.controlCoordinates.targetScale;_this6.controlCoordinates.initialOffsetX=_this6.controlCoordinates.targetOffsetX;_this6.controlCoordinates.initialOffsetY=_this6.controlCoordinates.targetOffsetY;_this6.setZoomData(_this6.controlCoordinates.targetScale,_this6.controlCoordinates.targetOffsetX,_this6.controlCoordinates.targetOffsetY);_this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX+"px",_this6.controlCoordinates.targetOffsetY+"px",_this6.controlCoordinates.targetScale);});}this.addEventListener(this.domNodes.image,['touchstart.'+this.eventNamespace,'mousedown.'+this.eventNamespace],function(event){if(event.target.tagName==='A'&&event.type==='touchstart'){return true;}if(event.type==='mousedown'){event.preventDefault();_this6.controlCoordinates.initialPointerOffsetX=event.clientX;_this6.controlCoordinates.initialPointerOffsetY=event.clientY;_this6.controlCoordinates.containerHeight=_this6.getDimensions(_this6.domNodes.image).height;_this6.controlCoordinates.containerWidth=_this6.getDimensions(_this6.domNodes.image).width;_this6.controlCoordinates.imgHeight=_this6.getDimensions(_this6.currentImage).height;_this6.controlCoordinates.imgWidth=_this6.getDimensions(_this6.currentImage).width;_this6.controlCoordinates.containerOffsetX=_this6.domNodes.image.offsetLeft;_this6.controlCoordinates.containerOffsetY=_this6.domNodes.image.offsetTop;_this6.controlCoordinates.initialOffsetX=parseFloat(_this6.currentImage.dataset.translateX);_this6.controlCoordinates.initialOffsetY=parseFloat(_this6.currentImage.dataset.translateY);_this6.controlCoordinates.capture=true;}else{_this6.controlCoordinates.touchCount=event.touches.length;_this6.controlCoordinates.initialPointerOffsetX=event.touches[0].clientX;_this6.controlCoordinates.initialPointerOffsetY=event.touches[0].clientY;_this6.controlCoordinates.containerHeight=_this6.getDimensions(_this6.domNodes.image).height;_this6.controlCoordinates.containerWidth=_this6.getDimensions(_this6.domNodes.image).width;_this6.controlCoordinates.imgHeight=_this6.getDimensions(_this6.currentImage).height;_this6.controlCoordinates.imgWidth=_this6.getDimensions(_this6.currentImage).width;_this6.controlCoordinates.containerOffsetX=_this6.domNodes.image.offsetLeft;_this6.controlCoordinates.containerOffsetY=_this6.domNodes.image.offsetTop;if(_this6.controlCoordinates.touchCount===1){if(!_this6.controlCoordinates.doubleTapped){_this6.controlCoordinates.doubleTapped=true;setTimeout(function(){_this6.controlCoordinates.doubleTapped=false;},300);}else{_this6.currentImage.classList.add('sl-transition');if(!_this6.controlCoordinates.zoomed){_this6.controlCoordinates.initialScale=_this6.options.doubleTapZoom;_this6.setZoomData(_this6.controlCoordinates.initialScale,0,0);_this6.zoomPanElement(0+"px",0+"px",_this6.controlCoordinates.initialScale);if((!_this6.domNodes.caption.style.opacity||_this6.domNodes.caption.style.opacity>0)&&_this6.domNodes.caption.style.display!=='none'){_this6.fadeOut(_this6.domNodes.caption,_this6.options.fadeSpeed);}_this6.controlCoordinates.zoomed=true;}else{_this6.controlCoordinates.initialScale=1;_this6.setZoomData(_this6.controlCoordinates.initialScale,0,0);_this6.zoomPanElement(0+"px",0+"px",_this6.controlCoordinates.initialScale);_this6.controlCoordinates.zoomed=false;}setTimeout(function(){if(_this6.currentImage){_this6.currentImage.classList.remove('sl-transition');}},200);return false;}_this6.controlCoordinates.initialOffsetX=parseFloat(_this6.currentImage.dataset.translateX);_this6.controlCoordinates.initialOffsetY=parseFloat(_this6.currentImage.dataset.translateY);}else if(_this6.controlCoordinates.touchCount===2){_this6.controlCoordinates.initialPointerOffsetX2=event.touches[1].clientX;_this6.controlCoordinates.initialPointerOffsetY2=event.touches[1].clientY;_this6.controlCoordinates.initialOffsetX=parseFloat(_this6.currentImage.dataset.translateX);_this6.controlCoordinates.initialOffsetY=parseFloat(_this6.currentImage.dataset.translateY);_this6.controlCoordinates.pinchOffsetX=(_this6.controlCoordinates.initialPointerOffsetX+_this6.controlCoordinates.initialPointerOffsetX2)/2;_this6.controlCoordinates.pinchOffsetY=(_this6.controlCoordinates.initialPointerOffsetY+_this6.controlCoordinates.initialPointerOffsetY2)/2;_this6.controlCoordinates.initialPinchDistance=Math.sqrt((_this6.controlCoordinates.initialPointerOffsetX-_this6.controlCoordinates.initialPointerOffsetX2)*(_this6.controlCoordinates.initialPointerOffsetX-_this6.controlCoordinates.initialPointerOffsetX2)+(_this6.controlCoordinates.initialPointerOffsetY-_this6.controlCoordinates.initialPointerOffsetY2)*(_this6.controlCoordinates.initialPointerOffsetY-_this6.controlCoordinates.initialPointerOffsetY2));}_this6.controlCoordinates.capture=true;}if(_this6.controlCoordinates.mousedown)return true;if(_this6.transitionCapable){_this6.controlCoordinates.imageLeft=parseInt(_this6.domNodes.image.style.left,10);}_this6.controlCoordinates.mousedown=true;_this6.controlCoordinates.swipeDiff=0;_this6.controlCoordinates.swipeYDiff=0;_this6.controlCoordinates.swipeStart=event.pageX||event.touches[0].pageX;_this6.controlCoordinates.swipeYStart=event.pageY||event.touches[0].pageY;return false;});this.addEventListener(this.domNodes.image,['touchmove.'+this.eventNamespace,'mousemove.'+this.eventNamespace,'MSPointerMove'],function(event){if(!_this6.controlCoordinates.mousedown){return true;}if(event.type==='touchmove'){if(_this6.controlCoordinates.capture===false){return false;}_this6.controlCoordinates.pointerOffsetX=event.touches[0].clientX;_this6.controlCoordinates.pointerOffsetY=event.touches[0].clientY;_this6.controlCoordinates.touchCount=event.touches.length;_this6.controlCoordinates.touchmoveCount++;if(_this6.controlCoordinates.touchCount>1){_this6.controlCoordinates.pointerOffsetX2=event.touches[1].clientX;_this6.controlCoordinates.pointerOffsetY2=event.touches[1].clientY;_this6.controlCoordinates.targetPinchDistance=Math.sqrt((_this6.controlCoordinates.pointerOffsetX-_this6.controlCoordinates.pointerOffsetX2)*(_this6.controlCoordinates.pointerOffsetX-_this6.controlCoordinates.pointerOffsetX2)+(_this6.controlCoordinates.pointerOffsetY-_this6.controlCoordinates.pointerOffsetY2)*(_this6.controlCoordinates.pointerOffsetY-_this6.controlCoordinates.pointerOffsetY2));if(_this6.controlCoordinates.initialPinchDistance===null){_this6.controlCoordinates.initialPinchDistance=_this6.controlCoordinates.targetPinchDistance;}if(Math.abs(_this6.controlCoordinates.initialPinchDistance-_this6.controlCoordinates.targetPinchDistance)>=1){_this6.controlCoordinates.targetScale=_this6.minMax(_this6.controlCoordinates.targetPinchDistance/_this6.controlCoordinates.initialPinchDistance*_this6.controlCoordinates.initialScale,1,_this6.options.maxZoom);_this6.controlCoordinates.limitOffsetX=(_this6.controlCoordinates.imgWidth*_this6.controlCoordinates.targetScale-_this6.controlCoordinates.containerWidth)/2;_this6.controlCoordinates.limitOffsetY=(_this6.controlCoordinates.imgHeight*_this6.controlCoordinates.targetScale-_this6.controlCoordinates.containerHeight)/2;_this6.controlCoordinates.scaleDifference=_this6.controlCoordinates.targetScale-_this6.controlCoordinates.initialScale;_this6.controlCoordinates.targetOffsetX=_this6.controlCoordinates.imgWidth*_this6.controlCoordinates.targetScale<=_this6.controlCoordinates.containerWidth?0:_this6.minMax(_this6.controlCoordinates.initialOffsetX-(_this6.controlCoordinates.pinchOffsetX-_this6.controlCoordinates.containerOffsetX-_this6.controlCoordinates.containerWidth/2-_this6.controlCoordinates.initialOffsetX)/(_this6.controlCoordinates.targetScale-_this6.controlCoordinates.scaleDifference)*_this6.controlCoordinates.scaleDifference,_this6.controlCoordinates.limitOffsetX*-1,_this6.controlCoordinates.limitOffsetX);_this6.controlCoordinates.targetOffsetY=_this6.controlCoordinates.imgHeight*_this6.controlCoordinates.targetScale<=_this6.controlCoordinates.containerHeight?0:_this6.minMax(_this6.controlCoordinates.initialOffsetY-(_this6.controlCoordinates.pinchOffsetY-_this6.controlCoordinates.containerOffsetY-_this6.controlCoordinates.containerHeight/2-_this6.controlCoordinates.initialOffsetY)/(_this6.controlCoordinates.targetScale-_this6.controlCoordinates.scaleDifference)*_this6.controlCoordinates.scaleDifference,_this6.controlCoordinates.limitOffsetY*-1,_this6.controlCoordinates.limitOffsetY);_this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX+"px",_this6.controlCoordinates.targetOffsetY+"px",_this6.controlCoordinates.targetScale);if(_this6.controlCoordinates.targetScale>1){_this6.controlCoordinates.zoomed=true;if((!_this6.domNodes.caption.style.opacity||_this6.domNodes.caption.style.opacity>0)&&_this6.domNodes.caption.style.display!=='none'){_this6.fadeOut(_this6.domNodes.caption,_this6.options.fadeSpeed);}}_this6.controlCoordinates.initialPinchDistance=_this6.controlCoordinates.targetPinchDistance;_this6.controlCoordinates.initialScale=_this6.controlCoordinates.targetScale;_this6.controlCoordinates.initialOffsetX=_this6.controlCoordinates.targetOffsetX;_this6.controlCoordinates.initialOffsetY=_this6.controlCoordinates.targetOffsetY;}}else{_this6.controlCoordinates.targetScale=_this6.controlCoordinates.initialScale;_this6.controlCoordinates.limitOffsetX=(_this6.controlCoordinates.imgWidth*_this6.controlCoordinates.targetScale-_this6.controlCoordinates.containerWidth)/2;_this6.controlCoordinates.limitOffsetY=(_this6.controlCoordinates.imgHeight*_this6.controlCoordinates.targetScale-_this6.controlCoordinates.containerHeight)/2;_this6.controlCoordinates.targetOffsetX=_this6.controlCoordinates.imgWidth*_this6.controlCoordinates.targetScale<=_this6.controlCoordinates.containerWidth?0:_this6.minMax(_this6.controlCoordinates.pointerOffsetX-(_this6.controlCoordinates.initialPointerOffsetX-_this6.controlCoordinates.initialOffsetX),_this6.controlCoordinates.limitOffsetX*-1,_this6.controlCoordinates.limitOffsetX);_this6.controlCoordinates.targetOffsetY=_this6.controlCoordinates.imgHeight*_this6.controlCoordinates.targetScale<=_this6.controlCoordinates.containerHeight?0:_this6.minMax(_this6.controlCoordinates.pointerOffsetY-(_this6.controlCoordinates.initialPointerOffsetY-_this6.controlCoordinates.initialOffsetY),_this6.controlCoordinates.limitOffsetY*-1,_this6.controlCoordinates.limitOffsetY);if(Math.abs(_this6.controlCoordinates.targetOffsetX)===Math.abs(_this6.controlCoordinates.limitOffsetX)){_this6.controlCoordinates.initialOffsetX=_this6.controlCoordinates.targetOffsetX;_this6.controlCoordinates.initialPointerOffsetX=_this6.controlCoordinates.pointerOffsetX;}if(Math.abs(_this6.controlCoordinates.targetOffsetY)===Math.abs(_this6.controlCoordinates.limitOffsetY)){_this6.controlCoordinates.initialOffsetY=_this6.controlCoordinates.targetOffsetY;_this6.controlCoordinates.initialPointerOffsetY=_this6.controlCoordinates.pointerOffsetY;}_this6.setZoomData(_this6.controlCoordinates.initialScale,_this6.controlCoordinates.targetOffsetX,_this6.controlCoordinates.targetOffsetY);_this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX+"px",_this6.controlCoordinates.targetOffsetY+"px",_this6.controlCoordinates.targetScale);}}if(event.type==='mousemove'&&_this6.controlCoordinates.mousedown){if(event.type=='touchmove')return true;event.preventDefault();if(_this6.controlCoordinates.capture===false)return false;_this6.controlCoordinates.pointerOffsetX=event.clientX;_this6.controlCoordinates.pointerOffsetY=event.clientY;_this6.controlCoordinates.targetScale=_this6.controlCoordinates.initialScale;_this6.controlCoordinates.limitOffsetX=(_this6.controlCoordinates.imgWidth*_this6.controlCoordinates.targetScale-_this6.controlCoordinates.containerWidth)/2;_this6.controlCoordinates.limitOffsetY=(_this6.controlCoordinates.imgHeight*_this6.controlCoordinates.targetScale-_this6.controlCoordinates.containerHeight)/2;_this6.controlCoordinates.targetOffsetX=_this6.controlCoordinates.imgWidth*_this6.controlCoordinates.targetScale<=_this6.controlCoordinates.containerWidth?0:_this6.minMax(_this6.controlCoordinates.pointerOffsetX-(_this6.controlCoordinates.initialPointerOffsetX-_this6.controlCoordinates.initialOffsetX),_this6.controlCoordinates.limitOffsetX*-1,_this6.controlCoordinates.limitOffsetX);_this6.controlCoordinates.targetOffsetY=_this6.controlCoordinates.imgHeight*_this6.controlCoordinates.targetScale<=_this6.controlCoordinates.containerHeight?0:_this6.minMax(_this6.controlCoordinates.pointerOffsetY-(_this6.controlCoordinates.initialPointerOffsetY-_this6.controlCoordinates.initialOffsetY),_this6.controlCoordinates.limitOffsetY*-1,_this6.controlCoordinates.limitOffsetY);if(Math.abs(_this6.controlCoordinates.targetOffsetX)===Math.abs(_this6.controlCoordinates.limitOffsetX)){_this6.controlCoordinates.initialOffsetX=_this6.controlCoordinates.targetOffsetX;_this6.controlCoordinates.initialPointerOffsetX=_this6.controlCoordinates.pointerOffsetX;}if(Math.abs(_this6.controlCoordinates.targetOffsetY)===Math.abs(_this6.controlCoordinates.limitOffsetY)){_this6.controlCoordinates.initialOffsetY=_this6.controlCoordinates.targetOffsetY;_this6.controlCoordinates.initialPointerOffsetY=_this6.controlCoordinates.pointerOffsetY;}_this6.setZoomData(_this6.controlCoordinates.initialScale,_this6.controlCoordinates.targetOffsetX,_this6.controlCoordinates.targetOffsetY);_this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX+"px",_this6.controlCoordinates.targetOffsetY+"px",_this6.controlCoordinates.targetScale);}if(!_this6.controlCoordinates.zoomed){_this6.controlCoordinates.swipeEnd=event.pageX||event.touches[0].pageX;_this6.controlCoordinates.swipeYEnd=event.pageY||event.touches[0].pageY;_this6.controlCoordinates.swipeDiff=_this6.controlCoordinates.swipeStart-_this6.controlCoordinates.swipeEnd;_this6.controlCoordinates.swipeYDiff=_this6.controlCoordinates.swipeYStart-_this6.controlCoordinates.swipeYEnd;if(_this6.options.animationSlide){_this6.slide(0,-_this6.controlCoordinates.swipeDiff+'px');}}});this.addEventListener(this.domNodes.image,['touchend.'+this.eventNamespace,'mouseup.'+this.eventNamespace,'touchcancel.'+this.eventNamespace,'mouseleave.'+this.eventNamespace,'pointerup','pointercancel','MSPointerUp','MSPointerCancel'],function(event){if(_this6.isTouchDevice&&event.type==='touchend'){_this6.controlCoordinates.touchCount=event.touches.length;if(_this6.controlCoordinates.touchCount===0){if(_this6.currentImage){_this6.setZoomData(_this6.controlCoordinates.initialScale,_this6.controlCoordinates.targetOffsetX,_this6.controlCoordinates.targetOffsetY);}if(_this6.controlCoordinates.initialScale===1){_this6.controlCoordinates.zoomed=false;if(_this6.domNodes.caption.style.display==='none'){_this6.fadeIn(_this6.domNodes.caption,_this6.options.fadeSpeed);}}_this6.controlCoordinates.initialPinchDistance=null;_this6.controlCoordinates.capture=false;}else if(_this6.controlCoordinates.touchCount===1){_this6.controlCoordinates.initialPointerOffsetX=event.touches[0].clientX;_this6.controlCoordinates.initialPointerOffsetY=event.touches[0].clientY;}else if(_this6.controlCoordinates.touchCount>1){_this6.controlCoordinates.initialPinchDistance=null;}}if(_this6.controlCoordinates.mousedown){_this6.controlCoordinates.mousedown=false;var possibleDir=true;if(!_this6.options.loop){if(_this6.currentImageIndex===0&&_this6.controlCoordinates.swipeDiff<0){possibleDir=false;}if(_this6.currentImageIndex>=_this6.relatedElements.length-1&&_this6.controlCoordinates.swipeDiff>0){possibleDir=false;}}if(Math.abs(_this6.controlCoordinates.swipeDiff)>_this6.options.swipeTolerance&&possibleDir){_this6.loadImage(_this6.controlCoordinates.swipeDiff>0?1:-1);}else if(_this6.options.animationSlide){_this6.slide(_this6.options.animationSpeed/1000,0+'px');}if(_this6.options.swipeClose&&Math.abs(_this6.controlCoordinates.swipeYDiff)>50&&Math.abs(_this6.controlCoordinates.swipeDiff)<_this6.options.swipeTolerance){_this6.close();}}});this.addEventListener(this.domNodes.image,['dblclick'],function(event){if(_this6.isTouchDevice)return;_this6.controlCoordinates.initialPointerOffsetX=event.clientX;_this6.controlCoordinates.initialPointerOffsetY=event.clientY;_this6.controlCoordinates.containerHeight=_this6.getDimensions(_this6.domNodes.image).height;_this6.controlCoordinates.containerWidth=_this6.getDimensions(_this6.domNodes.image).width;_this6.controlCoordinates.imgHeight=_this6.getDimensions(_this6.currentImage).height;_this6.controlCoordinates.imgWidth=_this6.getDimensions(_this6.currentImage).width;_this6.controlCoordinates.containerOffsetX=_this6.domNodes.image.offsetLeft;_this6.controlCoordinates.containerOffsetY=_this6.domNodes.image.offsetTop;_this6.currentImage.classList.add('sl-transition');if(!_this6.controlCoordinates.zoomed){_this6.controlCoordinates.initialScale=_this6.options.doubleTapZoom;_this6.setZoomData(_this6.controlCoordinates.initialScale,0,0);_this6.zoomPanElement(0+"px",0+"px",_this6.controlCoordinates.initialScale);if((!_this6.domNodes.caption.style.opacity||_this6.domNodes.caption.style.opacity>0)&&_this6.domNodes.caption.style.display!=='none'){_this6.fadeOut(_this6.domNodes.caption,_this6.options.fadeSpeed);}_this6.controlCoordinates.zoomed=true;}else{_this6.controlCoordinates.initialScale=1;_this6.setZoomData(_this6.controlCoordinates.initialScale,0,0);_this6.zoomPanElement(0+"px",0+"px",_this6.controlCoordinates.initialScale);_this6.controlCoordinates.zoomed=false;if(_this6.domNodes.caption.style.display==='none'){_this6.fadeIn(_this6.domNodes.caption,_this6.options.fadeSpeed);}}setTimeout(function(){if(_this6.currentImage){_this6.currentImage.classList.remove('sl-transition');_this6.currentImage.style[_this6.transitionPrefix+'transform-origin']=null;}},200);_this6.controlCoordinates.capture=true;return false;});}},{key:"getDimensions",value:function getDimensions(element){var styles=window.getComputedStyle(element),height=element.offsetHeight,width=element.offsetWidth,borderTopWidth=parseFloat(styles.borderTopWidth),borderBottomWidth=parseFloat(styles.borderBottomWidth),paddingTop=parseFloat(styles.paddingTop),paddingBottom=parseFloat(styles.paddingBottom),borderLeftWidth=parseFloat(styles.borderLeftWidth),borderRightWidth=parseFloat(styles.borderRightWidth),paddingLeft=parseFloat(styles.paddingLeft),paddingRight=parseFloat(styles.paddingRight);return{height:height-borderBottomWidth-borderTopWidth-paddingTop-paddingBottom,width:width-borderLeftWidth-borderRightWidth-paddingLeft-paddingRight};}},{key:"updateHash",value:function updateHash(){var newHash='pid='+(this.currentImageIndex+1),newURL=window.location.href.split('#')[0]+'#'+newHash;this.hashReseted=false;if(this.pushStateSupport){window.history[this.historyHasChanges?'replaceState':'pushState']('',document.title,newURL);}else{if(this.historyHasChanges){window.location.replace(newURL);}else{window.location.hash=newHash;}}if(!this.historyHasChanges){this.urlChangedOnce=true;}this.historyHasChanges=true;}},{key:"resetHash",value:function resetHash(){this.hashReseted=true;if(this.urlChangedOnce){history.back();}else{if(this.pushStateSupport){history.pushState('',document.title,window.location.pathname+window.location.search);}else{window.location.hash='';}}clearTimeout(this.historyUpdateTimeout);}},{key:"updateURL",value:function updateURL(){clearTimeout(this.historyUpdateTimeout);if(!this.historyHasChanges){this.updateHash();}else{this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800);}}},{key:"setCaption",value:function setCaption(captionText,imageWidth,allowHTML){var _this7=this;if(this.options.captions&&captionText&&captionText!==''&&typeof captionText!=="undefined"){var _ref;var property=((_ref=allowHTML!==null&&allowHTML!==void 0?allowHTML:this.options.captionHTML)!==null&&_ref!==void 0?_ref:true)?'innerHTML':'innerText';this.hide(this.domNodes.caption);this.domNodes.caption.style.width=imageWidth+'px';this.domNodes.caption[property]=captionText;this.domNodes.image.appendChild(this.domNodes.caption);setTimeout(function(){_this7.fadeIn(_this7.domNodes.caption,_this7.options.fadeSpeed);},this.options.captionDelay);}}},{key:"slide",value:function slide(speed,pos){if(!this.transitionCapable){return this.domNodes.image.style.left=pos;}this.domNodes.image.style[this.transitionPrefix+'transform']='translateX('+pos+')';this.domNodes.image.style[this.transitionPrefix+'transition']=this.transitionPrefix+'transform '+speed+'s linear';}},{key:"getRelated",value:function getRelated(rel){var elems;if(rel&&rel!==false&&rel!=='nofollow'){elems=Array.from(this.elements).filter(function(element){return element.getAttribute('rel')===rel;});}else{elems=this.elements;}return elems;}},{key:"openImage",value:function openImage(element){var _this8=this;element.dispatchEvent(new Event('show.'+this.eventNamespace));this.globalScrollbarWidth=this.getScrollbarWidth();if(this.options.disableScroll){this.toggleScrollbar('hide');this.globalScrollbarWidth=0;}if(this.options.htmlClass&&this.options.htmlClass!==''){document.querySelector('html').classList.add(this.options.htmlClass);}document.body.appendChild(this.domNodes.wrapper);this.domNodes.wrapper.appendChild(this.domNodes.image);if(this.options.overlay){document.body.appendChild(this.domNodes.overlay);}this.relatedElements=this.getRelated(element.rel);if(this.options.showCounter){if(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)){this.domNodes.wrapper.removeChild(this.domNodes.counter);}else if(this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)){this.domNodes.wrapper.appendChild(this.domNodes.counter);}}if(this.options.download&&this.domNodes.download){this.domNodes.wrapper.appendChild(this.domNodes.download);}this.isAnimating=true;this.currentImageIndex=this.relatedElements.indexOf(element);var targetURL=element.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement('img');this.currentImage.style.display='none';this.currentImage.setAttribute('src',targetURL);this.currentImage.dataset.scale=1;this.currentImage.dataset.translateX=0;this.currentImage.dataset.translateY=0;if(this.loadedImages.indexOf(targetURL)===-1){this.loadedImages.push(targetURL);}this.domNodes.image.innerHTML='';this.domNodes.image.setAttribute('style','');this.domNodes.image.appendChild(this.currentImage);this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed);this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed);this.show(this.domNodes.spinner);this.domNodes.counter.querySelector('.sl-current').innerHTML=this.currentImageIndex+1;this.domNodes.counter.querySelector('.sl-total').innerHTML=this.relatedElements.length;this.adjustImage();if(this.options.preloading){this.preload();}setTimeout(function(){element.dispatchEvent(new Event('shown.'+_this8.eventNamespace));},this.options.animationSpeed);}},{key:"forceFocus",value:function forceFocus(){var _this9=this;this.removeEventListener(document,'focusin.'+this.eventNamespace);this.addEventListener(document,'focusin.'+this.eventNamespace,function(event){if(document!==event.target&&_this9.domNodes.wrapper!==event.target&&!_this9.domNodes.wrapper.contains(event.target)){_this9.domNodes.wrapper.focus();}});}},{key:"addEventListener",value:function addEventListener(elements,events,callback,opts){elements=this.wrap(elements);events=this.wrap(events);var _iterator=_createForOfIteratorHelper(elements),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var element=_step.value;if(!element.namespaces){element.namespaces={};}var _iterator2=_createForOfIteratorHelper(events),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var event=_step2.value;var options=opts||false;var needsPassiveFix=['touchstart','touchmove','mousewheel','DOMMouseScroll'].indexOf(event.split('.')[0])>=0;if(needsPassiveFix&&this.isPassiveEventsSupported){if(_typeof(options)==='object'){options.passive=true;}else{options={passive:true};}}element.namespaces[event]=callback;element.addEventListener(event.split('.')[0],callback,options);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"removeEventListener",value:function removeEventListener(elements,events){elements=this.wrap(elements);events=this.wrap(events);var _iterator3=_createForOfIteratorHelper(elements),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var element=_step3.value;var _iterator4=_createForOfIteratorHelper(events),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var event=_step4.value;if(element.namespaces&&element.namespaces[event]){element.removeEventListener(event.split('.')[0],element.namespaces[event]);delete element.namespaces[event];}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}},{key:"fadeOut",value:function fadeOut(elements,duration,callback){var _this10=this;elements=this.wrap(elements);var _iterator5=_createForOfIteratorHelper(elements),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var element=_step5.value;element.style.opacity=parseFloat(element)||window.getComputedStyle(element).getPropertyValue("opacity");}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}this.isFadeIn=false;var step=16.66666/(duration||this.options.fadeSpeed),fade=function fade(){var currentOpacity=parseFloat(elements[0].style.opacity);if((currentOpacity-=step)<0){var _iterator6=_createForOfIteratorHelper(elements),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var element=_step6.value;element.style.display="none";element.style.opacity=1;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}callback&&callback.call(_this10,elements);}else{var _iterator7=_createForOfIteratorHelper(elements),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _element=_step7.value;_element.style.opacity=currentOpacity;}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}requestAnimationFrame(fade);}};fade();}},{key:"fadeIn",value:function fadeIn(elements,duration,callback,display){var _this11=this;elements=this.wrap(elements);var _iterator8=_createForOfIteratorHelper(elements),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var element=_step8.value;if(element){element.style.opacity=0;element.style.display=display||"block";}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}this.isFadeIn=true;var opacityTarget=parseFloat(elements[0].dataset.opacityTarget||1),step=16.66666*opacityTarget/(duration||this.options.fadeSpeed),fade=function fade(){var currentOpacity=parseFloat(elements[0].style.opacity);if(!((currentOpacity+=step)>opacityTarget)){var _iterator9=_createForOfIteratorHelper(elements),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var element=_step9.value;if(element){element.style.opacity=currentOpacity;}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}if(!_this11.isFadeIn)return;requestAnimationFrame(fade);}else{var _iterator10=_createForOfIteratorHelper(elements),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _element2=_step10.value;if(_element2){_element2.style.opacity=opacityTarget;}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}callback&&callback.call(_this11,elements);}};fade();}},{key:"hide",value:function hide(elements){elements=this.wrap(elements);var _iterator11=_createForOfIteratorHelper(elements),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var element=_step11.value;if(element.style.display!='none'){element.dataset.initialDisplay=element.style.display;}element.style.display='none';}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}},{key:"show",value:function show(elements,display){elements=this.wrap(elements);var _iterator12=_createForOfIteratorHelper(elements),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var element=_step12.value;element.style.display=element.dataset.initialDisplay||display||'block';}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}},{key:"wrap",value:function wrap(input){return typeof input[Symbol.iterator]==='function'&&typeof input!=='string'?input:[input];}},{key:"on",value:function on(events,callback){events=this.wrap(events);var _iterator13=_createForOfIteratorHelper(this.elements),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var element=_step13.value;if(!element.fullyNamespacedEvents){element.fullyNamespacedEvents={};}var _iterator14=_createForOfIteratorHelper(events),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var event=_step14.value;element.fullyNamespacedEvents[event]=callback;element.addEventListener(event,callback);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}return this;}},{key:"off",value:function off(events){events=this.wrap(events);var _iterator15=_createForOfIteratorHelper(this.elements),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var element=_step15.value;var _iterator16=_createForOfIteratorHelper(events),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var event=_step16.value;if(typeof element.fullyNamespacedEvents!=='undefined'&&event in element.fullyNamespacedEvents){element.removeEventListener(event,element.fullyNamespacedEvents[event]);}}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}return this;}},{key:"open",value:function open(elem){var position=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;elem=elem||this.elements[0];if(typeof jQuery!=="undefined"&&elem instanceof jQuery){elem=elem.get(0);}if(position>0){elem=this.elements[position];}this.initialImageIndex=this.elements.indexOf(elem);if(this.initialImageIndex>-1){this.openImage(elem);}}},{key:"openPosition",value:function openPosition(position){var elem=this.elements[position];this.open(elem,position);}},{key:"next",value:function next(){this.loadImage(1);}},{key:"prev",value:function prev(){this.loadImage(-1);}},{key:"getLighboxData",value:function getLighboxData(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth};}},{key:"destroy",value:function destroy(){this.off(['close.'+this.eventNamespace,'closed.'+this.eventNamespace,'nextImageLoaded.'+this.eventNamespace,'prevImageLoaded.'+this.eventNamespace,'change.'+this.eventNamespace,'nextDone.'+this.eventNamespace,'prevDone.'+this.eventNamespace,'error.'+this.eventNamespace,'changed.'+this.eventNamespace,'next.'+this.eventNamespace,'prev.'+this.eventNamespace,'show.'+this.eventNamespace,'shown.'+this.eventNamespace]);this.removeEventListener(this.elements,'click.'+this.eventNamespace);this.removeEventListener(document,'focusin.'+this.eventNamespace);this.removeEventListener(document.body,'contextmenu.'+this.eventNamespace);this.removeEventListener(document.body,'keyup.'+this.eventNamespace);this.removeEventListener(this.domNodes.navigation.getElementsByTagName('button'),'click.'+this.eventNamespace);this.removeEventListener(this.domNodes.closeButton,'click.'+this.eventNamespace);this.removeEventListener(window,'resize.'+this.eventNamespace);this.removeEventListener(window,'hashchange.'+this.eventNamespace);this.close();if(this.isOpen){document.body.removeChild(this.domNodes.wrapper);document.body.removeChild(this.domNodes.overlay);}this.elements=null;}},{key:"refresh",value:function refresh(){if(!this.initialSelector){throw'refreshing only works when you initialize using a selector!';}var options=this.options,selector=this.initialSelector;this.destroy();this.constructor(selector,options);return this;}}]);return SimpleLightbox;}();var _default=SimpleLightbox;exports["default"]=_default;global.SimpleLightbox=SimpleLightbox;}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1]);jQuery(document).on('PROSEMIRROR_API_INITIALIZED',function(){function addGallerySchema(nodes,marks){nodes=nodes.addToEnd('dwplugin_gallery',{content:'',marks:'',attrs:jQuery.extend({renderedHTML:{default:null},},JSINFO.plugins.gallery.defaults),group:'protected_block',});return{nodes:nodes,marks:marks};}window.Prosemirror.pluginSchemas.push(addGallerySchema);function getGalleryFormFields(attrs){return[{name:'namespace',label:LANG.plugins.gallery.label_namespace,type:'text',value:attrs['namespace'],},{name:'thumbnailsize',label:LANG.plugins.gallery.label_thumbnailsize,type:'text',pattern:'\\d+x\\d+',title:LANG.plugins.gallery.pattern_hint_thumbnailsize,value:attrs['thumbnailsize'],},{name:'imagesize',label:LANG.plugins.gallery.label_imagesize,type:'text',pattern:'\\d+X\\d+',title:LANG.plugins.gallery.pattern_hint_imagesize,value:attrs['imagesize'],},{name:'cache',label:LANG.plugins.gallery.label_cache,type:'checkbox',value:'1',checked:attrs['cache'],},{name:'filter',label:LANG.plugins.gallery.label_filter,type:'text',value:attrs['filter'],},{name:'showname',label:LANG.plugins.gallery.label_showname,type:'checkbox',value:'1',checked:attrs['showname'],},{name:'showtitle',label:LANG.plugins.gallery.label_showtitle,type:'checkbox',value:'1',checked:attrs['showtitle'],},{name:'crop',label:LANG.plugins.gallery.label_crop,type:'checkbox',value:'1',checked:attrs['crop'],},{name:'direct',label:LANG.plugins.gallery.label_direct,type:'checkbox',value:'1',checked:attrs['direct'],},{name:'lightbox',label:LANG.plugins.gallery.label_lightbox,type:'checkbox',value:'1',checked:attrs['lightbox'],},{name:'reverse',label:LANG.plugins.gallery.label_reverse,type:'checkbox',value:'1',checked:attrs['reverse'],},{name:'recursive',label:LANG.plugins.gallery.label_recursive,type:'checkbox',value:'1',checked:attrs['recursive'],},{name:'align',label:LANG.plugins.gallery.label_align_left,type:'radio',value:'left',checked:attrs['align']==='left',},{name:'align',label:LANG.plugins.gallery.label_align_center,type:'radio',value:'center',checked:attrs['align']==='center',},{name:'align',label:LANG.plugins.gallery.label_align_right,type:'radio',value:'right',checked:attrs['align']==='right',},{name:'cols',label:LANG.plugins.gallery.label_cols,type:'number',value:attrs['cols'],min:0,},{name:'limit',label:LANG.plugins.gallery.label_limit,type:'number',value:attrs['limit'],min:0,},{name:'offset',label:LANG.plugins.gallery.label_offset,type:'number',value:attrs['offset'],min:0,},{name:'paginate',label:LANG.plugins.gallery.label_paginate,type:'number',value:attrs['paginate'],min:0,},{name:'sort',label:LANG.plugins.gallery.label_sort_file,type:'radio',value:'filesort',checked:attrs['sort']==='filesort',},{name:'sort',label:LANG.plugins.gallery.label_sort_random,type:'radio',value:'random',checked:attrs['sort']==='random',},{name:'sort',label:LANG.plugins.gallery.label_sort_mod,type:'radio',value:'modsort',checked:attrs['sort']==='modsort',},{name:'sort',label:LANG.plugins.gallery.label_sort_exif_date,type:'radio',value:'datesort',checked:attrs['sort']==='datesort',},{name:'sort',label:LANG.plugins.gallery.label_sort_exif_title,type:'radio',value:'titlesort',checked:attrs['sort']==='titlesort',},];}function handleFormSubmit(event){event.preventDefault();event.stopPropagation();var newAttrs=jQuery(event.target).serializeArray().reduce(function(acc,cur){acc[cur['name']]=cur['value'];return acc;},{});var nodeStartPos=this.getPos();newAttrs=Object.entries(this.node.type.attrs).reduce(function(acc,cur){if(acc[cur[0]]){return acc;}if(cur[1].default&&cur[1].default===true){acc[cur[0]]=false;}return acc;},newAttrs);this.form.hide();this.outerView.dispatch(this.outerView.state.tr .setNodeMarkup(nodeStartPos,null,newAttrs,this.node.marks));}function retrieveRenderedHTML(attrs,nodeview){const ajaxEndpoint=DOKU_BASE+'lib/exe/ajax.php';jQuery.post(ajaxEndpoint,{'call':'plugin_gallery_prosemirror','attrs':JSON.stringify(attrs),}).done(function(data){var newAttrs=jQuery.extend({},attrs);newAttrs.renderedHTML=data;nodeview.outerView.dispatch(nodeview.outerView.state.tr .setNodeMarkup(nodeview.getPos(),null,newAttrs,nodeview.node.marks));});}function dwplugin_gallery(node,outerview,getPos){function GalleryNodeView(node,outerview,getPos){this.form=new window.Prosemirror.classes.KeyValueForm(LANG.plugins.gallery.title_dialog,getGalleryFormFields(node.attrs));AbstractNodeView.call(this,node,outerview,getPos);}GalleryNodeView.prototype=Object.create(AbstractNodeView.prototype);GalleryNodeView.prototype.constructor=GalleryNodeView;GalleryNodeView.prototype.renderNode=function(attrs){var thisView=this;if(!this.dom){this.dom=document.createElement('div');var $settingsButton=jQuery('<button>',{type:'button',class:'settings'}).text('settings');$settingsButton.on('click',function(){thisView.form.show();});jQuery(this.dom).text('GalleryPlugin').append($settingsButton);this.form.on('submit',handleFormSubmit.bind(this));}if(!attrs.renderedHTML){retrieveRenderedHTML(attrs,this);jQuery(this.dom).addClass('dwplugin dwplugin_gallery');}else{var $renderedWrapper=jQuery(attrs.renderedHTML);this.dom.innerHTML=$renderedWrapper.html();this.dom.classList=$renderedWrapper.attr('class')+' dwplugin_gallery nodeHasForm';jQuery(this.dom).children().css('pointer-events','none');jQuery(this.dom).on('click',function(){thisView.form.show();});}};GalleryNodeView.prototype.update=function(node){this.node=node;this.renderNode(node.attrs);return true;};GalleryNodeView.prototype.selectNode=function(){this.dom.classList.add('ProseMirror-selectednode');};GalleryNodeView.prototype.deselectNode=function(){this.dom.classList.remove('ProseMirror-selectednode');this.form.hide();};return new GalleryNodeView(node,outerview,getPos);}window.Prosemirror.pluginNodeViews.dwplugin_gallery=dwplugin_gallery;function GalleryMenuItemDispatcher(){this.prototype=Object.create(window.Prosemirror.classes.AbstractMenuItemDispatcher.prototype);this.prototype.constructor=this;this.isAvailable=function(schema){return Boolean(schema.nodes.dwplugin_gallery);};this.getMenuItem=function(schema){return new window.Prosemirror.classes.MenuItem({command:function(state,dispatch){var isAllowed=window.Prosemirror.commands.setBlockTypeNoAttrCheck(schema.nodes.dwplugin_gallery)(state);if(!isAllowed){return false;}if(dispatch){var defaultAttributes=Object.entries(schema.nodes.dwplugin_gallery.attrs).reduce(function(acc,attr){acc[attr[0]]=attr[1].default;return acc;},{});var form=new window.Prosemirror.classes.KeyValueForm(LANG.plugins.gallery.title_dialog,getGalleryFormFields(defaultAttributes));form.show();form.on('submit',function(event){event.preventDefault();event.stopPropagation();var newAttrs=jQuery(this).serializeArray().reduce(function(acc,cur){acc[cur['name']]=cur['value'];return acc;},{});form.destroy();dispatch(state.tr.replaceSelectionWith(schema.nodes.dwplugin_gallery.createChecked(newAttrs)));});}return true;},label:LANG.plugins.gallery.label_toolbar_button,icon:(function(){var puzzleSVG='<svg viewBox="0 0 24 24"><path d="M22,16V4A2,2 0 0,0 20,2H8A2,2 0 0,0 6,4V16A2,2 0 0,0 8,18H20A2,2 0 0,0 22,16M11,12L13.03,14.71L16,11L20,16H8M2,6V20A2,2 0 0,0 4,22H18V20H4V6" /></svg>';return jQuery('<span>').html(puzzleSVG).get(0);})(),});};}window.Prosemirror.pluginMenuItemDispatchers.push(new GalleryMenuItemDispatcher());});jQuery(function(){(function(){const $opts=jQuery('#media__opts');if(!$opts.length)return;if(!window.opener)return;const glbl=document.createElement('label');const glnk=document.createElement('a');const gbrk=document.createElement('br');glnk.innerHTML=LANG.plugins.gallery.addgal;glnk.style.cursor='pointer';glnk.href='#';glnk.onclick=function(){const $h1=jQuery('#media__ns');if(!$h1.length)return;const ns=$h1[0].textContent;opener.insertAtCarret('wiki__text','{{gallery>'+ns+'}}');if(!dw_mediamanager.keepopen)window.close();};$opts[0].appendChild(glbl);glbl.appendChild(glnk);$opts[0].appendChild(gbrk);})();(function(){jQuery('.plugin-gallery').each(function(){const $gallery=jQuery(this);$gallery.find('.gallery-page').hide().eq(0).show();$gallery.find('.gallery-page-selector a').eq(0).addClass('active');});jQuery('.gallery-page-selector a').click(function(e){const $self=jQuery(this);$self.siblings().removeClass('active');$self.addClass('active');const $gallery=$self.closest('.plugin-gallery');$gallery.find('.gallery-page').hide();$gallery.find(e.target.hash).show();e.preventDefault();});jQuery('.gallery-page-selector').show();})();new SimpleLightbox("a.lightbox, a[rel^='lightbox']",{sourceAttr:'data-url',captionSelector:'self',captionType:'data',captionsData:'caption',captionPosition:'outside',captionHTML:true,alertError:false,fileExt:false,uniqueImages:false});});jQuery(function(){jQuery('#usrmgr__del').click(function(){return confirm(LANG.del_confirm);});});function MM_swapImgRestore(){var i,x,a=document.MM_sr;for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++)x.src=x.oSrc;}function MM_preloadImages(){var d=document;if(d.images){if(!d.MM_p)d.MM_p=new Array();var i,j=d.MM_p.length,a=MM_preloadImages.arguments;for(i=0;i<a.length;i++)if(a[i].indexOf("#")!=0){d.MM_p[j]=new Image;d.MM_p[j++].src=a[i];}}}function MM_findObj(n,d){var p,i,x;if(!d)d=document;if((p=n.indexOf("?"))>0&&parent.frames.length){d=parent.frames[n.substring(p+1)].document;n=n.substring(0,p);}if(!(x=d[n])&&d.all)x=d.all[n];for(i=0;!x&&i<d.forms.length;i++)x=d.forms[i][n];for(i=0;!x&&d.layers&&i<d.layers.length;i++)x=MM_findObj(n,d.layers[i].document);if(!x&&d.getElementById)x=d.getElementById(n);return x;}function MM_swapImage(){var i,j=0,x,a=MM_swapImage.arguments;document.MM_sr=new Array;for(i=0;i<(a.length-2);i+=3)if((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x;if(!x.oSrc)x.oSrc=x.src;x.src=a[i+2];}}jQuery(function(){var $dl=jQuery('#plugin__logviewer').find('dl');if(!$dl.length)return;$dl.animate({scrollTop:$dl.prop("scrollHeight")},500);var $filter=jQuery('<input>');$filter.on('keyup',function(e){var re=new RegExp($filter.val(),'i');$dl.find('dt').each(function(idx,elem){if(elem.innerText.match(re)){jQuery(elem).removeClass('hidden');}else{jQuery(elem).addClass('hidden');}});});$dl.before($filter);$filter.wrap('<label></label>');$filter.before(LANG.plugins.logviewer.filter+' ');});jQuery().ready(function(){var stripHtml=function(htmlString){var tempDiv=document.createElement("div");tempDiv.innerHTML=htmlString;return tempDiv.textContent||tempDiv.innerText||"";};var urlMatches=function(url,start='start'){const windowURL=new URL(window.location);const urlObject=new URL(url.startsWith('http')?url:window.origin+url);let match=true;let windowPath=windowURL.pathname.replace(/\/$/,'');;let urlPath=urlObject.pathname.replace(/\/$/,'');;if(windowURL.searchParams.has('id')||urlObject.searchParams.has('id')){if(windowURL.searchParams.has('id')===false){windowURL.searchParams.append('id',start);}if(urlObject.searchParams.has('id')===false){urlObject.searchParams.append('id',start);}}else{if(windowPath.endsWith('/doku.php')){windowPath=windowPath+'/'+start;}if(urlPath.endsWith('/doku.php')){urlPath=urlPath+'/'+start;}}if(windowURL.origin!==urlObject.origin||windowPath!==urlPath){return false;}urlObject.searchParams.forEach((val,key)=>{if(!windowURL.searchParams.has(key)||windowURL.searchParams.get(key)!==val){match=false;}});return match;};jQuery('.mikiop-button').on('click',function(event){if(jQuery(this).hasClass('mikiop-disabled')){event.preventDefault();}if(jQuery(this).attr('data-toggle')=='collapse'){event.preventDefault();jQuery(jQuery(this).attr('data-target')).slideToggle();}});jQuery('.mikiop-accordian-title').on('click',function(event){event.preventDefault();let accordianBody=jQuery(this).siblings('.mikiop-accordian-body');if(!accordianBody.is(':visible')){let accordian=jQuery(this).closest('.mikiop-accordian');if(accordian.hasClass('mikiop-autoclose')){accordian.find('.mikiop-accordian-body:visible').slideUp();}}jQuery(this).siblings('.mikiop-accordian-body').slideToggle();});jQuery('.mikiop-alert-close').on('click',function(event){event.preventDefault();jQuery(this).closest('.mikiop-alert').hide();});jQuery('.mikiop-carousel').each(function(){var items=jQuery(this).find('.mikiop-carousel-item');var indicators='';var active=false;for(var i=0;i<items.length;i++){if(jQuery(items[i]).hasClass('mikiop-active')){active=true;indicators+='<li class="mikiop mikiop-carousel-indicator mikiop-active"></li>';}else{indicators+='<li class="mikiop mikiop-carousel-indicator"></li>';}};jQuery(this).find('.mikiop-carousel-indicators').html(indicators);if(!active){jQuery(this).find('.mikiop-carousel-item').first().addClass('mikiop-active');jQuery(this).find('.mikiop-carousel-indicator').first().addClass('mikiop-active');}if(jQuery(this).attr('data-auto-start')=='true'){var carousel=jQuery(this);timeout=carousel.find('.mikiop-carousel-item.mikiop-active').attr('data-interval');if(timeout==0){timeout=3;}var nextSlide=function(){var timeout=carouselNext(carousel);if(timeout==0){timeout=3;}window.setTimeout(nextSlide,(timeout*1000)+500);};window.setTimeout(nextSlide,(timeout*1000)+500);}});jQuery('.mikiop-carousel-control-prev').on('click',function(event){event.preventDefault();var parent=jQuery(this).parent();carouselPrev(parent);});function carouselPrev(parent){var slides=parent.find('.mikiop-carousel-item');for(var i=0;i<slides.length;i++){if(jQuery(slides[i]).hasClass('mikiop-active')){var target=null;var next=0;if(i==0){next=slides.length-1;}else{next=i-1;}target=jQuery(slides[next]);if(jQuery(parent).hasClass('mikiop-transition-fade')){target.css('z-index',0).addClass('mikiop-active');jQuery(slides[i]).fadeOut(function(){jQuery(this).removeClass('mikiop-active').css('display','');target.css('z-index','');});}else if(jQuery(parent).hasClass('mikiop-transition-slide')){target.css('left','-100%').addClass('mikiop-active');target.animate({left:'0'},500);jQuery(slides[i]).animate({left:'100%'},500,function(){jQuery(this).removeClass('mikiop-active').css('left','');target.css('left','');})}else{target.addClass('mikiop-active');jQuery(slides[i]).removeClass('mikiop-active');}parent.find('.mikiop-carousel-indicator').removeClass('mikiop-active');parent.find('.mikiop-carousel-indicator:nth-child('+(next+1)+')').addClass('mikiop-active');break;}}};jQuery('.mikiop-carousel-control-next').on('click',function(event){event.preventDefault();var parent=jQuery(this).parent();carouselNext(parent);});function carouselNext(parent){var slides=parent.find('.mikiop-carousel-item');var delay=0;for(var i=0;i<slides.length;i++){if(jQuery(slides[i]).hasClass('mikiop-active')){var target=null;var next=0;if(i==slides.length-1){next=0;}else{next=i+1;}target=jQuery(slides[next]);delay=target.attr('data-interval');if(typeof delay=='undefined'){delay=0;}if(jQuery(parent).hasClass('mikiop-transition-fade')){target.css('z-index',0).addClass('mikiop-active');jQuery(slides[i]).fadeOut(function(){jQuery(this).removeClass('mikiop-active').css('display','');target.css('z-index','');});}else if(jQuery(parent).hasClass('mikiop-transition-slide')){target.css('left','100%').addClass('mikiop-active');target.animate({left:'0'},500);jQuery(slides[i]).animate({left:'-100%'},500,function(){jQuery(this).removeClass('mikiop-active').css('left','');target.css('left','');})}else{target.addClass('mikiop-active');jQuery(slides[i]).removeClass('mikiop-active');}parent.find('.mikiop-carousel-indicator').removeClass('mikiop-active');parent.find('.mikiop-carousel-indicator:nth-child('+(next+1)+')').addClass('mikiop-active');break;}}return(delay);};jQuery('.mikiop-carousel-indicator').on('click',function(event){event.preventDefault();var parent=jQuery(this).closest('.mikiop-carousel-indicators');if(parent){var group=jQuery(this).closest('.mikiop-carousel');if(group){var items=jQuery(group).find('.mikiop-carousel-indicator');var item=-1;var active=0;for(var i=0;i<items.length;i++){if(jQuery(items[i]).hasClass('mikiop-active')){active=i;}if(items[i]==jQuery(this)[0]){item=i;}}if(item!=active){if(jQuery(group).hasClass('mikiop-transition-fade')){var target=jQuery(group).find('.mikiop-carousel-item:nth-child('+(item+1)+')');target.css('z-index',0).addClass('mikiop-active');jQuery(group).find('.mikiop-carousel-item:nth-child('+(active+1)+')').fadeOut(function(){jQuery(this).removeClass('mikiop-active').css('display','');target.css('z-index','');});jQuery(group).find('.mikiop-carousel-indicator:nth-child('+(item+1)+')').addClass('mikiop-active');jQuery(group).find('.mikiop-carousel-indicator:nth-child('+(active+1)+')').removeClass('mikiop-active');}else if(jQuery(group).hasClass('mikiop-transition-slide')){var target=jQuery(group).find('.mikiop-carousel-item:nth-child('+(item+1)+')');if(item<active){target.css('left','-100%').addClass('mikiop-active');target.animate({left:'0'},500);jQuery(group).find('.mikiop-carousel-item:nth-child('+(active+1)+')').animate({left:'100%'},500,function(){jQuery(this).removeClass('mikiop-active').css('left','');target.css('left','');});}else{target.css('left','100%').addClass('mikiop-active');target.animate({left:'0'},500);jQuery(group).find('.mikiop-carousel-item:nth-child('+(active+1)+')').animate({left:'-100%'},500,function(){jQuery(this).removeClass('mikiop-active').css('left','');target.css('left','');});}jQuery(group).find('.mikiop-carousel-indicator:nth-child('+(item+1)+')').addClass('mikiop-active');jQuery(group).find('.mikiop-carousel-indicator:nth-child('+(active+1)+')').removeClass('mikiop-active');}else{jQuery(group).find('.mikiop-carousel-item:nth-child('+(item+1)+')').addClass('mikiop-active');jQuery(group).find('.mikiop-carousel-indicator:nth-child('+(item+1)+')').addClass('mikiop-active');jQuery(group).find('.mikiop-carousel-item:nth-child('+(active+1)+')').removeClass('mikiop-active');jQuery(group).find('.mikiop-carousel-indicator:nth-child('+(active+1)+')').removeClass('mikiop-active');}}}}});jQuery('.mikiop-tab-item a').on('click',function(event){event.preventDefault();var parent=jQuery(this).closest('.mikiop-tab-item');if(parent){var group=jQuery(parent).closest('.mikiop-tab-group');if(group){var items=jQuery(group).find('.mikiop-tab-item');var item=-1;for(var i=0;i<items.length;i++){if(items[i]==parent[0]){item=i;break;}}if(item!=-1){var panes=jQuery(group).siblings('.mikiop-tab-content').find('.mikiop-tab-pane');if(panes.length>item){if(!jQuery(panes[item]).hasClass('mikiop-show')){jQuery(panes).removeClass('mikiop-show');jQuery(panes[item]).addClass('mikiop-show');jQuery(items).find('a').removeClass('mikiop-active');jQuery(items[item]).find('a').addClass('mikiop-active');}}}}}});var quizReset=function(quizRef){quizRef.find('.mikiop-quiz-button-prev').attr('disabled',true);quizRef.find('.mikiop-quiz-result').hide();quizRef.find('.mikiop-quiz-button-submit').show().attr('disabled',false);quizRef.find('.mikiop-quiz-button-reset').hide();var status=quizRef.attr('data-status');status=status.replace('$1','1');status=status.replace('$2',quizRef.children('.mikiop-quiz-item').length);quizRef.find('.mikiop-quiz-status-text').html(status);if(quizRef.children('.mikiop-quiz-item').length==1){quizRef.find('.mikiop-quiz-button-next').attr('disabled',true);}else{quizRef.find('.mikiop-quiz-button-next').attr('disabled',false);}quizRef.children('.mikiop-quiz-item').find('input[type="radio"], input[type="checkbox"]').prop('checked',false);var full=quizRef.attr('data-full');if(!full){quizRef.children('.mikiop-quiz-item').not(':first-child').hide();quizRef.children('.mikiop-quiz-item:first-child').show();}else{quizRef.children('.mikiop-quiz-item').show();}};jQuery('.mikiop-quiz').each(function(){quizReset(jQuery(this));});jQuery('.mikiop-quiz-button-prev').on('click',function(event){var parent=jQuery(this).closest('.mikiop-quiz');var questions=parent.children('.mikiop-quiz-item');parent.find('.mikiop-quiz-button-next').attr('disabled',false);for(var i=0;i<questions.length;i++){if(jQuery(questions[i]).is(':visible')){i--;if(i<=0){jQuery(this).attr('disabled',true);}jQuery(questions[i+1]).hide();jQuery(questions[i]).show();parent.find('.mikiop-quiz-status-number').html(i+1);var status=parent.attr('data-status');status=status.replace('$1',i+1);status=status.replace('$2',parent.children('.mikiop-quiz-item').length);parent.find('.mikiop-quiz-status-text').html(status);break;}}});jQuery('.mikiop-quiz-button-next').on('click',function(event){var parent=jQuery(this).closest('.mikiop-quiz');var questions=parent.children('.mikiop-quiz-item');parent.find('.mikiop-quiz-button-prev').attr('disabled',false);for(var i=0;i<questions.length;i++){if(jQuery(questions[i]).is(':visible')){i++;if(i>=questions.length-1){jQuery(this).attr('disabled',true);}jQuery(questions[i-1]).hide();jQuery(questions[i]).show();var status=parent.attr('data-status');status=status.replace('$1',i+1);status=status.replace('$2',parent.children('.mikiop-quiz-item').length);parent.find('.mikiop-quiz-status-text').html(status);break;}}});jQuery('.mikiop-quiz-button-submit').on('click',function(event){var parent=jQuery(this).closest('.mikiop-quiz');var questions=parent.children('.mikiop-quiz-item');var correct=0;var totalScore=0;var result='<div class="mikiop-quiz-question">Result</div>';var usingScoring=false;var usingCorrect=false;var questionCount=0;parent.find('.mikiop-quiz-button-prev').attr('disabled',true);parent.find('.mikiop-quiz-button-next').attr('disabled',true);parent.find('.mikiop-quiz-button-submit').attr('disabled',true);parent.find('.mikiop-quiz-status-text').html('');var resetButton=parent.find('.mikiop-quiz-button-reset');if(resetButton.length>0){parent.find('.mikiop-quiz-button-submit').hide();resetButton.show();}for(var i=0;i<questions.length;i++){var showNewLine=true;var question=stripHtml(jQuery(questions[i]).attr('data-question'));var regex=/^((\w+ ?)*[):])/;if(regex.test(question)){question=question.match(regex)[1];showNewLine=false;}result+='<p class="mikiop-quiz-result-question"><strong>'+question+'</strong>'+(showNewLine?'<br>':' ');var checked=jQuery(questions[i]).find("input:checked");var answer=jQuery(questions[i]).attr('data-answer');var value=checked.val();if(answer!=undefined){usingCorrect=true;questionCount++;}if(typeof value=='undefined'){result+='Not answered';}else{let radioPass=true;let radioGroups={};const radios=jQuery(questions[i]).find('input[type="radio"]');radios.each(function(){const groupName=jQuery(this).attr('name');if(!radioGroups[groupName]){radioGroups[groupName]=[];}radioGroups[groupName].push(jQuery(this));});for(const key in radioGroups){if(radioGroups.hasOwnProperty(key)){const group=radioGroups[key];const anySelected=group.some(function(radio){return radio.prop('checked');});if(!anySelected){result+='An option was not answered';radioPass=false;break;}}}if(radioPass){var totalItemScore=0;var selectedItems=[];var itemIsScored=false;checked.each(function(){var item=jQuery(this);var score=item.attr('data-score');if(score!=undefined&&score.length>0){usingScoring=true;itemIsScored=true;totalItemScore+=parseInt(score,10);}else if(answer!=undefined){usingCorrect=true;selectedItems.push(item.val());}});if(itemIsScored){var scorePlaceholder=parent.attr('data-result-score');result+=scorePlaceholder.replace('$1',totalItemScore);totalScore+=totalItemScore;}else{var correctText=parent.attr('data-correct');var incorrectText=parent.attr('data-incorrect');result+=selectedItems.join(", ")+' - ';if(answer==undefined){result+="No answer set for question";}else if(answer.indexOf('|')!==-1){var answerArray=answer.split('|');if(answerArray.length==selectedItems.length){var totalMatch=true;answerArray.forEach(function(answerItem){var matching=selectedItems.some(function(selectedItem){return answerItem.localeCompare(selectedItem)===0;});if(!matching){totalMatch=false;}});if(totalMatch){correct++;result+=correctText;}else{result+=incorrectText;}}else{result+=incorrectText;}}else{if(selectedItems.length>0&&answer.localeCompare(selectedItems[0])==0){correct++;result+=correctText;}else{result+=incorrectText;}}}}}result+='</p>';jQuery(questions[i]).hide();}var status=[];if(usingScoring){status.push(parent.attr('data-result-score-total').replace('$1',totalScore));}if(usingCorrect){status.push(parent.attr('data-result-correct').replace('$1',correct).replace('$2',questionCount));}result+='<p class="mikiop-quiz-result-total">'+status.join('<br>')+'</p>';parent.find('.mikiop-quiz-result').html(result).show();});jQuery('.mikiop-quiz-button-reset').on('click',function(event){quizReset(jQuery(this).closest('.mikiop-quiz'));});jQuery('.mikiop-pagination').each(function(){var pagination=jQuery(this);var startId=pagination.attr('data-start')||'start';var pages=pagination.find('li:not(.mikiop-pagination-prev,.mikiop-pagination-next)');if(pages.length>0){var active=-1;var found=-1;for(i=0;i<pages.length;i++){if(jQuery(pages[i]).hasClass('mikiop-active')){if(active!=-1){jQuery(pages[i]).removeClass('mikiop-active')}else{active=i;}}var link=jQuery(pages[i]).find('a').attr('href');if(urlMatches(link,startId)){found=i;}}if(active==-1&&found!=-1){active=found;jQuery(pages[found]).addClass('mikiop-active');}if(active!=-1){if(active==0){jQuery('.mikiop-pagination').find('.mikiop-pagination-prev').addClass('mikiop-disabled');}else{jQuery('.mikiop-pagination').find('.mikiop-pagination-prev').find('a').attr('href',jQuery(pages[active-1]).find('a').attr('href'));}if(active==pages.length-1){jQuery('.mikiop-pagination').find('.mikiop-pagination-next').addClass('mikiop-disabled');}else{jQuery('.mikiop-pagination').find('.mikiop-pagination-next').find('a').attr('href',jQuery(pages[active+1]).find('a').attr('href'));}}else{jQuery('.mikiop-pagination').find('.mikiop-pagination-prev').addClass('mikiop-disabled');jQuery('.mikiop-pagination').find('.mikiop-pagination-next').addClass('mikiop-disabled');}}else{jQuery('.mikiop-pagination').find('.mikiop-pagination-prev').addClass('mikiop-disabled');jQuery('.mikiop-pagination').find('.mikiop-pagination-next').addClass('mikiop-disabled');}});jQuery('.mikiop-box').on('mouseenter',function(){jQuery(this).children('.mikiop-reveal').fadeOut();});jQuery('.mikiop-box').on('mouseleave',function(){jQuery(this).children('.mikiop-reveal').fadeIn();});jQuery('.mikiop-tooltip').hover(function(event){jQuery('<div class="mikiop-tooltip-banner">'+jQuery(this).attr('data-tooltip')+'</div>').appendTo('body');},function(){jQuery('.mikiop-tooltip-banner').remove();});jQuery('.mikiop-tooltip').on('mousemove',function(event){var moveLeft=20;var moveDown=10;jQuery('.mikiop-tooltip-banner').css('top',event.pageY+moveDown).css('left',event.pageX+moveLeft);});jQuery('.mikiop-nav').on('click',function(event){jQuery('.mikiop-nav').not(this).removeClass('mikiop-nav-open');jQuery(this).toggleClass('mikiop-nav-open');});jQuery(document).on('click',function(event){if(!jQuery(event.target).closest('.mikiop-nav').length){jQuery('.mikiop-nav').removeClass('mikiop-nav-open');}});jQuery('.mikiop-collapse').hide();});if(typeof JSON!=='object'){JSON={};}(function(){'use strict';function f(n){return n<10?'0'+n:n;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}if(typeof rep==='function'){value=rep.call(holder,key,value);}switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}return str('',{'':value});};}if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}throw new SyntaxError('JSON.parse');};}}());class MoveMediaManager{constructor(){if(!JSINFO.move_allowrename)return;const filePanel=document.querySelector('#mediamanager__page .panel.file');if(filePanel){const observer=new MutationObserver(this.#addMoveButton.bind(this));observer.observe(filePanel,{childList:true,subtree:true});}}async #addMoveButton(mutationsList,observer){for(let mutation of mutationsList){if(mutation.type!=='childList')continue;if(mutation.target.classList.contains('file')===false)continue;const link=mutation.target.querySelector('a.select.mediafile');if(!link)continue;const actionList=mutation.target.querySelector('ul.actions');if(actionList.querySelector('button.move-btn'))continue;const deleteButton=actionList.querySelector('form#mediamanager__btn_delete');if(deleteButton===null)continue;const src=link.textContent;const moveButton=document.createElement('button');moveButton.classList.add('move-btn');moveButton.innerText=LANG.plugins.move.moveButton;moveButton.addEventListener('click',this.#showDialog.bind(this,src));actionList.appendChild(moveButton);}}async #showDialog(src,event){event.preventDefault();event.stopPropagation();const $form=jQuery(this.#buildForm(src));$form.dialog({title:LANG.plugins.move.moveButton,width:600,appendTo:'.dokuwiki',modal:true,close:function(){jQuery(this).dialog('destroy').remove();}});}#buildForm(src){const wrapper=document.createElement('div');const form=document.createElement('form');wrapper.appendChild(form);const intro=document.createElement('p');intro.innerText=LANG.plugins.move.dialogIntro;form.appendChild(intro);const errorContainer=document.createElement('div');errorContainer.className='move-error';form.appendChild(errorContainer);const original=document.createElement('input');original.type='hidden';original.name='move-old-filename';original.value=src;form.appendChild(original);const sectok=document.querySelector('form#mediamanager__btn_delete input[name=sectok]').cloneNode();form.appendChild(sectok);const fileExt=document.createElement('input');fileExt.type='text';fileExt.readOnly=true;fileExt.size=5;fileExt.name='move-file-ext';fileExt.value=src.split('.').pop();const destination=document.createElement('input');destination.type='text';destination.className='edit';destination.name='move-new-filename';destination.value=src.substring(0,src.length-(fileExt.value.length+1));destination.size=50;form.appendChild(destination);form.appendChild(fileExt);const button=document.createElement('button');button.innerText=LANG.plugins.move.moveButton;form.appendChild(button);form.addEventListener('submit',this.#requestMove.bind(this,form));return wrapper;}async #requestMove(form,event){event.preventDefault();event.stopPropagation();const src=form.querySelector('input[name="move-old-filename"]').value;const dst=form.querySelector('input[name="move-new-filename"]').value;const ext=form.querySelector('input[name="move-file-ext"]').value;const sectok=form.querySelector('input[name="sectok"]').value;const err=form.querySelector('div.move-error');jQuery.post(DOKU_BASE+'lib/exe/ajax.php',{call:'plugin_move_rename_mediamanager',src:src,dst:dst+'.'+ext,sectok:sectok},function(result){if(result.success){window.location.href=result.redirect_url;}else{err.classList.add('error');err.innerText=result.error;}});}}document.addEventListener('DOMContentLoaded',()=>{new MoveMediaManager();});jQuery(function(){jQuery('form.plugin_move_form').each(function(){var $form=jQuery(this);$form.find('.click-page').click(function(){$form.find('input[name=dst]').val($form.find('.click-page code').text());$form.find('.select').hide();}).click();$form.find('.click-ns').click(function(){$form.find('input[name=dst]').val($form.find('.click-ns code').text());$form.find('.select').show();});});jQuery('#plugin_move__progress').each(function(){var $this=jQuery(this);var $progressbar=$this.find('.progress');$progressbar.html('');$progressbar.progressbar({value:$progressbar.data('progress')});var setButtons=function(isError){$this.find('.ctlfrm-start').addClass('hide');if(isError){$this.find('.ctlfrm-skip').removeClass('hide');$this.find('.ctlfrm-retry').removeClass('hide');$this.find('.ctlfrm-continue').addClass('hide');}else{$this.find('.ctlfrm-skip').addClass('hide');$this.find('.ctlfrm-retry').addClass('hide');$this.find('.ctlfrm-continue').addClass('hide');}};var nextStep=function(skip){$this.find('.output').html('');$this.find('.controls img').removeClass('hide');setButtons(false);jQuery.post(DOKU_BASE+'lib/exe/ajax.php',{call:'plugin_move_progress',skip:skip},function(data){$progressbar.progressbar('option','value',data.progress);$this.find('.controls img').addClass('hide');if(data.error){$this.find('.output').html('<p><div class="error">'+data.error+'</div></p>');setButtons(true);}else if(data.complete){$progressbar.progressbar('option','value',100);alert(LANG.plugins.move.complete);window.location.href=DOKU_BASE;}else{nextStep(skip);}});};$this.find('.ctl-continue').click(function(e){e.preventDefault();jQuery('#plugin_move__preview').remove();var skip=e.target.form.skip.value;nextStep(skip);});});jQuery('#plugin_move__preview').each(function(){var $this=jQuery(this);$this.find('ul').hide();$this.find('span').click(function(){$this.find('ul').dw_toggle();$this.find('span').toggleClass('closed');}).addClass('closed');});var $GUI=jQuery('#plugin_move__tree');$GUI.show();jQuery('#plugin_move__treelink').show();var checkForMovement=function($li){var $all=$li.add($li.find('li.moved'));$all.each(function(){var $this=jQuery(this);var oldid=$this.data('id');var newid=determineNewID($this);if(newid!=oldid&&!$this.hasClass('created')){$this.addClass('moved');$this.children('div').attr('title',oldid+' -> '+newid);}else{$this.removeClass('moved');$this.children('div').attr('title','');}});};var checkNameAllowed=function($li,$parent,name){var ok=true;$parent.children('li').each(function(){if(this===$li[0])return;var cname='type-f';if($li.hasClass('type-d'))cname='type-d';var $this=jQuery(this);if($this.data('name')==name&&$this.hasClass(cname))ok=false;});return ok;};var determineNewID=function($li){var myname=$li.data('name');var $parent=$li.parent().closest('li');if($parent.length){return(determineNewID($parent)+':'+myname).replace(/^:/,'');}else{return myname;}};var cleanID=function(id){if(!id)return'';id=id.replace(/[!"#$%§&\'()+,/;<=>?@\[\]^`\{|\}~\\;:\/\*]+/g,'_');id=id.replace(/^_+/,'');id=id.replace(/_+$/,'');id=id.toLowerCase();return id;};var initTree=function(){var $li=jQuery(this);var my_root=$li.closest('.tree_root')[0];$li.draggable({revert:true,revertDuration:0,opacity:0.5,stop:function(event,ui){ui.helper.css({height:"auto",width:"auto"});}}).droppable({tolerance:'pointer',greedy:true,accept:function(draggable){return my_root==draggable.closest('.tree_root')[0];},drop:function(event,ui){var $dropped=ui.draggable;var $me=jQuery(this);if($dropped.children('div.li').children('input').prop('checked')){$dropped=$dropped.add(jQuery(my_root).find('input').filter(function(){return jQuery(this).prop('checked');}).parent().parent());}if($me.parents().addBack().is($dropped)){return;}var insert_child=!($me.hasClass("type-f")||$me.hasClass("closed"));var $new_parent=insert_child?$me.children('ul'):$me.parent();var allowed=true;$dropped.each(function(){var $this=jQuery(this);allowed&=checkNameAllowed($this,$new_parent,$this.data('name'));});if(allowed){if(insert_child){$dropped.prependTo($new_parent);}else{$dropped.insertAfter($me);}}checkForMovement($dropped);}}).find('img.rename').attr('title',LANG.plugins.move.renameitem).end().find('img.add').attr('title',LANG.plugins.move.add);};var add_template='<li class="type-d open created" data-name="%s" data-id="%s"><div class="li"><input type="checkbox"> <a href="%s" class="idx_dir">%s</a><img class="rename" src="'+DOKU_BASE+'lib/plugins/move/images/rename.png"></div><ul class="tree_list"></ul></li>';$GUI.find('div.tree_root > ul.tree_list').click(function(e){var $clicky=jQuery(e.target);var $li=$clicky.parent().parent();if($clicky[0].tagName=='A'&&$li.hasClass('type-d')){e.stopPropagation();if($li.hasClass('open')){$li .removeClass('open').addClass('closed');}else{$li .removeClass('closed').addClass('open');if(!$li.find('ul').length){var is_media=$li.closest('div.tree_root').hasClass('tree_media')?1:0;jQuery.post(DOKU_BASE+'lib/exe/ajax.php',{call:'plugin_move_tree',ns:$clicky.attr('href'),is_media:is_media},function(data){$li.append(data);$li.find('li').each(initTree);});}}e.preventDefault();}else if($clicky[0].tagName=='IMG'){e.stopPropagation();var $a=$clicky.parent().find('a');if($clicky.hasClass('rename')){var newname=window.prompt(LANG.plugins.move.renameitem,$li.data('name'));newname=cleanID(newname);if(newname){if(checkNameAllowed($li,$li.parent(),newname)){$li.data('name',newname);$a.text(newname);checkForMovement($li);}else{alert(LANG.plugins.move.duplicate.replace('%s',newname));}}}else{var newname=window.prompt(LANG.plugins.move.add);newname=cleanID(newname);if(newname){if(checkNameAllowed($li,$li.children('ul'),newname)){var $new_li=jQuery(add_template.replace(/%s/g,newname));$li.children('ul').prepend($new_li);$new_li.each(initTree);}else{alert(LANG.plugins.move.duplicate.replace('%s',newname));}}}e.preventDefault();}}).find('li').each(initTree);jQuery('#plugin_move__tree_execute').submit(function(e){var data=[];$GUI.find('.tree_pages .moved').each(function(idx,el){var $el=jQuery(el);var newid=determineNewID($el);data[data.length]={'class':$el.hasClass('type-d')?'ns':'doc',type:'page',src:$el.data('id'),dst:newid};});$GUI.find('.tree_media .moved').each(function(idx,el){var $el=jQuery(el);var newid=determineNewID($el);data[data.length]={'class':$el.hasClass('type-d')?'ns':'doc',type:'media',src:$el.data('id'),dst:newid};});jQuery(this).find('input[name=json]').val(JSON.stringify(data));});(function(){if(!JSINFO||!JSINFO.move_renameokay)return;const $dialog=jQuery('<div>'+'<form>'+'<label>'+LANG.plugins.move.newname+'<br>'+'<input type="text" name="id" style="width:100%">'+'</label>'+'</form>'+'</div>');const renameFN=function(){const newid=$dialog.find('input[name=id]').val();if(!newid)return false;$dialog.html('<img src="'+DOKU_BASE+'lib/images/throbber.gif" /> '+LANG.plugins.move.inprogress);$dialog.dialog('option','buttons',[]);jQuery.post(DOKU_BASE+'lib/exe/ajax.php',{call:'plugin_move_rename',id:JSINFO.id,newid:newid},function(result){if(result.error){$dialog.html(result.error.msg);}else{window.location.href=result.redirect_url;}});return false;};const showDialog=function(){$dialog.dialog({title:LANG.plugins.move.rename+' '+JSINFO.id,width:800,height:200,dialogClass:'plugin_move_dialog',modal:true,buttons:[{text:LANG.plugins.move.cancel,click:function(){$dialog.dialog("close");}},{text:LANG.plugins.move.rename,click:renameFN}],close:function(){jQuery(this).remove();}});$dialog.find('input[name=id]').val(JSINFO.id);$dialog.find('form').submit(renameFN);};const bindFirst=function($owner,event,handler){$owner.unbind(event,handler);$owner.bind(event,handler);const events=jQuery._data($owner[0])['events'][event];events.unshift(events.pop());jQuery._data($owner[0])['events'][event]=events;};jQuery('.plugin_move_page').show().click(function(e){e.preventDefault();showDialog();});const $mobileMenuOption=jQuery('form select[name=do] option[value=plugin_move]');if($mobileMenuOption.length===1){bindFirst($mobileMenuOption.closest('select[name=do]'),'change',function(e){const $select=jQuery(this);if($select.val()!=='plugin_move')return;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();$select.val('');showDialog();});}})();});var plugin_searchindex=(function(){var pub={};var pages=null,page=null,url=null,done=1,count=0,$msg=null,$buttons=null,lang=null;force='';pub.init=function(){$msg=jQuery('#plugin__searchindex_msg');if(!$msg)return;lang=LANG.plugins.searchindex;url=DOKU_BASE+'lib/plugins/searchindex/ajax.php';$buttons=jQuery('#plugin__searchindex_buttons');jQuery('#plugin__searchindex_update').click(pub.update);jQuery('#plugin__searchindex_rebuild').click(pub.rebuild);};var message=function(text){if(text.charAt(0)!=='<'){text='<p>'+text+'</p>'}$msg.html(text);};var index=function(){if(page){jQuery.post(url,'call=indexpage&page='+encodeURI(page)+'&force='+force,function(response){var wait=250;page=pages.shift();done++;var msg=(response!=='true')?lang.notindexed:lang.indexed;status='<p class="status">'+msg+'</p>';message('<p>'+lang.indexing+' '+done+'/'+count+'</p><p class="name">'+page+'</p>'+status);window.setTimeout(index,wait);});}else{finished();}};var finished=function(){throbber_off();message(lang.done);window.setTimeout(function(){message('');$buttons.show('slow');},3000);};var clear=function(){message(lang.clearing);jQuery.post(url,'call=clearindex',function(response){if(response!=='true'){message(response);window.setTimeout(clear,5000);}else{force='true';window.setTimeout(index,1000);}});};pub.rebuild=function(){pub.update(true);};pub.update=function(rebuild){done=1;rebuild=rebuild||false;$buttons.hide('slow');throbber_on();message(lang.finding);jQuery.post(url,'call=pagelist',function(response){if(response!=='true'){pages=response.split("\n");count=pages.length;message(lang.pages.replace(/%d/,pages.length));page=pages.shift();if(rebuild===true){clear();}else{force='';window.setTimeout(index,1000);}}else{finished();}});};var throbber_on=function(){$msg.addClass('updating');};var throbber_off=function(){$msg.removeClass('updating');};return pub;})();jQuery(function(){plugin_searchindex.init();});jQuery(function(){function applyPreview(target){var $style=target.jQuery('link[rel=stylesheet][href*="lib/exe/css.php"]');$style.attr('href','');var $loader=target.jQuery('#plugin__styling_loader');if(!$loader.length){$loader=target.jQuery('<div id="plugin__styling_loader">'+LANG.plugins.styling.loader+'</div>');$loader.css({'position':'absolute','width':'100%','height':'100%','top':0,'left':0,'z-index':5000,'background-color':'#fff','opacity':'0.7','color':'#000','font-size':'2.5em','text-align':'center','line-height':1.5,'padding-top':'2em'});target.jQuery('body').append($loader);}setTimeout(function(){var now=new Date().getTime();$style.attr('href',DOKU_BASE+'lib/exe/css.php?preview=1&tseed='+now);},500);}var doreload=1;var $styling_plugin=jQuery('#plugin__styling');if(!$styling_plugin.length){if(DokuCookie.getValue('styling_plugin')==1){applyPreview(window);}return;}if(!$styling_plugin.hasClass('ispopup')){var $form=$styling_plugin.find('form.styling').first();var $btn=jQuery('<button>'+LANG.plugins.styling.popup+'</button>');$form.prepend($btn);$btn.on('click',function(e){var windowFeatures="menubar=no,location=no,resizable=yes,scrollbars=yes,status=false,width=500,height=500";window.open(DOKU_BASE+'lib/plugins/styling/popup.php','styling_popup',windowFeatures);e.preventDefault();e.stopPropagation();}).wrap('<p></p>');return;}window.onunload=function(e){if(doreload){DokuCookie.setValue('styling_plugin',0);if(window.opener)window.opener.document.location.reload();}return null;};jQuery(':button').click(function(e){doreload=false;});if(window.opener)applyPreview(window.opener);DokuCookie.setValue('styling_plugin',1);});jQuery(function(){jQuery('form.plugin__tag_search table input').change(function(){if(jQuery(this).attr('checked')){if(jQuery(this).parent().hasClass('minus')){jQuery(this).closest('tr').find('.plus input').attr('checked',false);}else{jQuery(this).closest('tr').find('.minus input').attr('checked',false);}}})});var tplmod_aside_width=0;var tplmod_content_width=0;var tplmod_toggle_open=0;var tplmod_nav_aside=0;var tplmod_content_padding={'b':0,'t':0};jQuery(document).ready(function(){if(JSINFO['tmplft_template']=='bootstrap3'){tplmod_aside_width=parseInt(jQuery("aside#dokuwiki__aside").css('width'));tplmod_content_width=parseInt(jQuery("article#dokuwiki__content").css('width'));}else if(jQuery("nav#dokuwiki__aside").length){tplmod_nav_aside=true;tplmod_aside_width=parseInt(jQuery("nav#dokuwiki__aside").css('width'));tplmod_content_width=parseInt(jQuery("main#dokuwiki__content").css('width'));}else{tplmod_aside_width=parseInt(jQuery("div#dokuwiki__aside").css('width'));tplmod_content_width=parseInt(jQuery("div#dokuwiki__content").css('width'));}tplmod_toggle_open=tplmod_aside_width+tplmod_content_width;tplmod_content_padding.t=jQuery("div.wrapper").css('padding-top');tplmod_content_padding.b=jQuery("div.wrapper").css('padding-bottom');if(isNaN(JSINFO['tmplftacl'])){JSINFO['tmplftacl']=0;}if(JSINFO['tmplftacl']<255){jQuery("#dokuwiki__usertools > ul > li.admin").hide();}if(JSINFO['tmplft_template']=='monochrome'&&JSINFO['tmplft_bgcolor']){jQuery("html").css('background-color',JSINFO['tmplft_bgcolor']);jQuery("body").css('background-color',JSINFO['tmplft_bgcolor']);jQuery("div#dw__toc").css('background-color',JSINFO['tmplft_bgcolor']);}var acl=((JSINFO['tmplftacl']>=0)&&(JSINFO['tmplftacl']<=JSINFO['tmplft_aclgen']))?true:false;if(JSINFO['tmplft_template']=='monochrome'&&!JSINFO['tmplft_logo']){jQuery("div.pad div.headings img").first().css('padding-right','4px');}if(JSINFO['tmplft_logo']){if(JSINFO['tmplft_template']=='monochrome'){jQuery("div.pad div.headings img").first().attr("src",function(i,val){if(JSINFO['tmplft_logo_width']){this.width=JSINFO['tmplft_logo_width'];}var elems=val.split(/[\/\\]/);this.style.padding='4px';var img=elems.pop();return val.replace(img,JSINFO['tmplft_logo']);});}else{jQuery("div.headings.group h1 img,div.navbar-header img").attr("src",function(i,val){if(JSINFO['tmplft_logo_width']){this.width=JSINFO['tmplft_logo_width'];}var elems=val.split(/[\/\\]/);var img=elems.pop();return val.replace(img,JSINFO['tmplft_logo']);});}}if(JSINFO['tmplft_tag']){jQuery("p.claim,span#dw__tagline").html(function(i,val){if(val.match(/<.*?>/)){val=val.replace(/^\s*(<.*?>)(.*?)(<\/)/,function(m,m1,m2,m3){return m1+JSINFO['tmplft_tag']+m3;});}else val=JSINFO['tmplft_tag'];if(JSINFO['tmplft_template']=='bootstrap3'){jQuery("span#dw__tagline").css("padding-top","2px");}return val;});}if(JSINFO['tmplft_title']){jQuery("div.headings.group h1 span").html(function(index,val){return JSINFO['tmplft_title'];});jQuery("span#dw__title").html(function(index,val){var elems=val.split('<span');return JSINFO['tmplft_title']+'<span'+elems[1];});}if(acl&&JSINFO['tmplft_template']=='bootstrap3'){var regex;if(JSINFO['tmplft_mobile'])regex=new RegExp(JSINFO['tmplft_mobile']);else regex='/NONE/';jQuery("ul.dropdown-menu.tools li").each(function(index){var _html=jQuery(this).html();if(_html.match(regex)){jQuery(this). html("");}});}if(acl&&JSINFO['tmplft_pagetools']){var regex=new RegExp(JSINFO['tmplft_pagetools'].replace(/,/g,"|"));if(JSINFO['tmplft_ptools_xcl']){var xcludes=new RegExp(JSINFO['tmplft_ptools_xcl'].replace(/,/g,"|"));}if(typeof xcludes=='undefined'){xcludes=new RegExp("NONE");}jQuery("#dokuwiki__pagetools a, nav#dw__pagetools li a").each(function(index){var url=jQuery(this).attr('href');var _class=jQuery(this).attr('class');if(_class&&_class.match(/show/)){return 1;}if(url.match(regex)&&!url.match(xcludes)){jQuery(this).hide();}});}jQuery("div.mobileTools option").each(function(index,opt){var opts,regex,xcludes,optparent;optparent=jQuery(this).parent("optgroup");if(optparent.attr('label')&&optparent.attr('label').match(/User\s+Tools/i))return;if(JSINFO['tmplft_ptools_xcl']){xcludes=new RegExp(JSINFO['tmplft_ptools_xcl'].replace(/,/g,"|"));if(acl&&typeof xcludes!='undefined'){if(opt.value.match(xcludes))return;}}var regex=new RegExp(JSINFO['tmplft_mobile']);if(acl&&regex){if(opt.value.match(regex))jQuery(this).hide();}});if(acl&&JSINFO['tmplft_sitetools']){var regex=new RegExp(JSINFO['tmplft_sitetools'].replace(/,/g,"|"));jQuery("#dokuwiki__sitetools a,#sidebar-site-tools a,#dokuwiki__usertools > ul > li a").each(function(index){var url=jQuery(this).attr('href');if(url.match(regex)){jQuery(this).hide();}});}if(JSINFO['tmplft_profile']){if(JSINFO['tmplft_template']=='bootstrap3'){jQuery("li a.action.profile").parent().html("");}else{jQuery("div#dokuwiki__usertools li.profile, div#dokuwiki__usertools a[href$='profile']").hide();}}if(acl&&JSINFO['tmplft_search'])jQuery("form#dw__search").hide();});function tplmod_toggle_aside(){var display,content_width;if(JSINFO['tmplft_template']=='bootstrap3'){content_width=parseInt(jQuery("article#dokuwiki__content").css('width'));}else if(jQuery("main#dokuwiki__content").length){content_width=parseInt(jQuery("main#dokuwiki__content").css('width'))}else{content_width=parseInt(jQuery("div#dokuwiki__content").css('width'))}if(content_width==tplmod_toggle_open){content_width=tplmod_content_width;if(JSINFO['tmplft_template']=='monochrome'){jQuery("div#dokuwiki__content").css('padding-left','0px');jQuery("div.wrapper").css('padding-top',tplmod_content_padding.t);jQuery("div.wrapper").css('padding-bottom',tplmod_content_padding.b);}display=true;}else{content_width=tplmod_toggle_open;if(JSINFO['tmplft_template']=='monochrome'){jQuery("div.wrapper").css('padding-top','0px');jQuery("div.wrapper").css('padding-bottom','0px');jQuery("div#dokuwiki__content").css('padding-left','8px');jQuery("div#dokuwiki__content").css('background-color','white');}display=false;}if(JSINFO['tmplft_template']=='bootstrap3'){jQuery("aside#dokuwiki__aside").toggle(display);jQuery("article#dokuwiki__content").css("width",content_width+'px');}else if(tplmod_nav_aside){jQuery("nav#dokuwiki__aside").toggle(display);jQuery("main#dokuwiki__content").css("width",content_width+'px');}else{jQuery("div#dokuwiki__aside").toggle(display);jQuery("div#dokuwiki__content").css("width",content_width+'px');}}function tplmod_setui_lang(m,client,dw_val_obj){var params="tplmod_val="+m;params+='&call=tplmod_ui_lang';params+="&tplmod_client="+client;jQuery.post(DOKU_BASE+'lib/exe/ajax.php',params,function(data){if(data=='done'){alert(LANG.plugins.tplmod.ui_updated+m);}else{alert(LANG.plugins.tplmod.ui_save_err+data);}},'html');}jQuery(function(){jQuery('#usrmgr__del').on('click',function(){return confirm(LANG.del_confirm);});});if(window.toolbar!==undefined){toolbar[toolbar.length]={"type":"pluginvshare","title":LANG['plugins']['vshare']['button'],"icon":"../../plugins/vshare/button.png","key":""};}function tb_pluginvshare(btn,props,edid){PluginVShare.edid=edid;PluginVShare.buildSyntax();}const PluginVShare={edid:null,buildSyntax:function(){const text=prompt(LANG['plugins']['vshare']['prompt']);if(!text)return;for(const[site,rex]of Object.entries(JSINFO.plugins.vshare)){const RE=new RegExp(rex,'i');const match=text.match(RE);if(match){const urlparam='';const videoid=match[1];PluginVShare.insert(site,videoid,urlparam);return;}}alert(LANG['plugins']['vshare']['notfound']);},insert:function(key,videoid,urlparam){const code='{{'+key+'>'+videoid+'?'+urlparam+'}}';insertAtCarret(PluginVShare.edid,code);},attachGDPRHandler:function(){const $videos=jQuery('div.vshare');$videos.on('click',function(){const iframe=document.createElement('iframe');let attr;let attributes=Array.prototype.slice.call(this.attributes);while(attr=attributes.pop()){iframe.setAttribute(attr.nodeName,attr.nodeValue);}this.replaceWith(iframe);});$videos.each(function(){const $self=jQuery(this);const info=document.createElement('p');info.innerText=LANG.plugins.vshare.click.replace('%s',$self.data('domain'));$self.append(info);});}};jQuery(function(){PluginVShare.attachGDPRHandler();});jQuery(function(){dw_locktimer.init(840,1);});
